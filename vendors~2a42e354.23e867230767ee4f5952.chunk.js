(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{GAND:function(e,t,i){},GmYv:function(e,t,i){"use strict";i.r(t);var n,r=i("xIXs");Object.defineProperty(r.PLATFORM,"Loader",{get:function(){return n||(n=i("8NMn").WebpackLoader)},set:function(e){n=e}})},H7XF:function(e,t,i){"use strict";t.byteLength=function(e){var t=h(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){var t,i,n=h(e),s=n[0],a=n[1],l=new o(function(e,t,i){return 3*(t+i)/4-i}(0,s,a)),c=0,u=a>0?s-4:s;for(i=0;i<u;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===a&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,l[c++]=255&t);1===a&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,o=[],s=16383,a=0,l=i-r;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function h(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function c(e,t,i){for(var r,o,s=[],a=t;a<i;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},SkM8:function(e,t,i){"use strict";i.r(t),i.d(t,"animationEvent",(function(){return x})),i.d(t,"Animator",(function(){return B})),i.d(t,"CompositionTransactionNotifier",(function(){return I})),i.d(t,"CompositionTransactionOwnershipToken",(function(){return E})),i.d(t,"CompositionTransaction",(function(){return P})),i.d(t,"_hyphenate",(function(){return R})),i.d(t,"_isAllWhitespace",(function(){return D})),i.d(t,"ViewEngineHooksResource",(function(){return L})),i.d(t,"viewEngineHooks",(function(){return H})),i.d(t,"ElementEvents",(function(){return z})),i.d(t,"ResourceLoadContext",(function(){return q})),i.d(t,"ViewCompileInstruction",(function(){return K})),i.d(t,"BehaviorInstruction",(function(){return W})),i.d(t,"TargetInstruction",(function(){return X})),i.d(t,"viewStrategy",(function(){return Z})),i.d(t,"RelativeViewStrategy",(function(){return G})),i.d(t,"ConventionalViewStrategy",(function(){return Y})),i.d(t,"NoViewStrategy",(function(){return J})),i.d(t,"TemplateRegistryViewStrategy",(function(){return ee})),i.d(t,"InlineViewStrategy",(function(){return te})),i.d(t,"StaticViewStrategy",(function(){return ie})),i.d(t,"ViewLocator",(function(){return ne})),i.d(t,"BindingLanguage",(function(){return oe})),i.d(t,"SlotCustomAttribute",(function(){return ae})),i.d(t,"PassThroughSlot",(function(){return le})),i.d(t,"ShadowSlot",(function(){return he})),i.d(t,"ShadowDOM",(function(){return ce})),i.d(t,"validateBehaviorName",(function(){return de})),i.d(t,"ViewResources",(function(){return me})),i.d(t,"View",(function(){return fe})),i.d(t,"ViewSlot",(function(){return ge})),i.d(t,"BoundViewFactory",(function(){return Ae})),i.d(t,"ViewFactory",(function(){return Me})),i.d(t,"ViewCompiler",(function(){return xe})),i.d(t,"ResourceModule",(function(){return Be})),i.d(t,"ResourceDescription",(function(){return Ie})),i.d(t,"ModuleAnalyzer",(function(){return Ee})),i.d(t,"ViewEngine",(function(){return ke})),i.d(t,"Controller",(function(){return Re})),i.d(t,"BehaviorPropertyObserver",(function(){return De})),i.d(t,"BindableProperty",(function(){return He})),i.d(t,"HtmlBehaviorResource",(function(){return Ke})),i.d(t,"children",(function(){return $e})),i.d(t,"child",(function(){return Xe})),i.d(t,"SwapStrategies",(function(){return tt})),i.d(t,"CompositionEngine",(function(){return nt})),i.d(t,"ElementConfigResource",(function(){return rt})),i.d(t,"resource",(function(){return ot})),i.d(t,"behavior",(function(){return st})),i.d(t,"customElement",(function(){return at})),i.d(t,"customAttribute",(function(){return lt})),i.d(t,"templateController",(function(){return ht})),i.d(t,"bindable",(function(){return ct})),i.d(t,"dynamicOptions",(function(){return ut})),i.d(t,"useShadowDOM",(function(){return pt})),i.d(t,"processAttributes",(function(){return mt})),i.d(t,"processContent",(function(){return gt})),i.d(t,"containerless",(function(){return wt})),i.d(t,"useViewStrategy",(function(){return vt})),i.d(t,"useView",(function(){return bt})),i.d(t,"inlineView",(function(){return yt})),i.d(t,"noView",(function(){return Ct})),i.d(t,"view",(function(){return Vt})),i.d(t,"elementConfig",(function(){return Ot})),i.d(t,"viewResources",(function(){return St})),i.d(t,"TemplatingEngine",(function(){return At}));var n,r,o,s,a,l,h,c,u,d,p,m,f,g,w,v,b,y,C,V,O=i("KKpb"),S=i("SGXf"),A=i("xIXs"),M=i("489m"),_=i("n+sw"),N=i("NDtI"),T=i("OeXm"),j=i("aWZo");const x={enterBegin:"animation:enter:begin",enterActive:"animation:enter:active",enterDone:"animation:enter:done",enterTimeout:"animation:enter:timeout",leaveBegin:"animation:leave:begin",leaveActive:"animation:leave:active",leaveDone:"animation:leave:done",leaveTimeout:"animation:leave:timeout",staggerNext:"animation:stagger:next",removeClassBegin:"animation:remove-class:begin",removeClassActive:"animation:remove-class:active",removeClassDone:"animation:remove-class:done",removeClassTimeout:"animation:remove-class:timeout",addClassBegin:"animation:add-class:begin",addClassActive:"animation:add-class:active",addClassDone:"animation:add-class:done",addClassTimeout:"animation:add-class:timeout",animateBegin:"animation:animate:begin",animateActive:"animation:animate:active",animateDone:"animation:animate:done",animateTimeout:"animation:animate:timeout",sequenceBegin:"animation:sequence:begin",sequenceDone:"animation:sequence:done"};let B=class{enter(e){return Promise.resolve(!1)}leave(e){return Promise.resolve(!1)}removeClass(e,t){return e.classList.remove(t),Promise.resolve(!1)}addClass(e,t){return e.classList.add(t),Promise.resolve(!1)}animate(e,t){return Promise.resolve(!1)}runSequence(e){}registerEffect(e,t){}unregisterEffect(e){}},I=class{constructor(e){this.owner=e,this.owner._compositionCount++}done(){this.owner._compositionCount--,this.owner._tryCompleteTransaction()}},E=class{constructor(e){this.owner=e,this.owner._ownershipToken=this,this.thenable=this._createThenable()}waitForCompositionComplete(){return this.owner._tryCompleteTransaction(),this.thenable}resolve(){this._resolveCallback()}_createThenable(){return new Promise(((e,t)=>{this._resolveCallback=e}))}},P=class{constructor(){this._ownershipToken=null,this._compositionCount=0}tryCapture(){return null===this._ownershipToken?new E(this):null}enlist(){return new I(this)}_tryCompleteTransaction(){if(this._compositionCount<=0&&(this._compositionCount=0,null!==this._ownershipToken)){let e=this._ownershipToken;this._ownershipToken=null,e.resolve()}}};const F=/([A-Z])/g;function k(e){return"-"+e.toLowerCase()}function R(e){return(e.charAt(0).toLowerCase()+e.slice(1)).replace(F,k)}function D(e){return!(e.auInterpolationTarget||/[^\t\n\r ]/.test(e.textContent))}let L=class e{constructor(){}initialize(e,t){this.instance=e.get(t)}register(e,t){e.registerViewEngineHooks(this.instance)}load(e,t){}static convention(t){if(t.endsWith("ViewEngineHooks"))return new e}};function H(e){let t=function(e){S.d.define(S.d.resource,new L,e)};return e?t(e):t}let z=(r=n=class e{constructor(e){this.element=e,this.subscriptions={}}_enqueueHandler(e){this.subscriptions[e.eventName]=this.subscriptions[e.eventName]||[],this.subscriptions[e.eventName].push(e)}_dequeueHandler(e){let t,i=this.subscriptions[e.eventName];return i&&(t=i.indexOf(e),t>-1&&i.splice(t,1)),e}publish(e,t={},i=!0,n=!0){let r=A.DOM.createCustomEvent(e,{cancelable:n,bubbles:i,detail:t});this.element.dispatchEvent(r)}subscribe(t,i,n){if("function"==typeof i){void 0===n&&(n=e.defaultListenerOptions);return new U(this,t,i,n,!1)}}subscribeOnce(t,i,n){if("function"==typeof i){void 0===n&&(n=e.defaultListenerOptions);return new U(this,t,i,n,!0)}}dispose(e){if(e&&"string"==typeof e){let t=this.subscriptions[e];if(t)for(;t.length;){let e=t.pop();e&&e.dispose()}}else this.disposeAll()}disposeAll(){for(let e in this.subscriptions)this.dispose(e)}},n.defaultListenerOptions=!0,r),U=class{constructor(e,t,i,n,r){this.owner=e,this.eventName=t,this.handler=i,this.capture="boolean"==typeof n?n:n.capture,this.bubbles=!this.capture,this.captureOrOptions=n,this.once=r,e.element.addEventListener(t,this,n),e._enqueueHandler(this)}handleEvent(e){(0,this.handler)(e),this.once&&this.dispose()}dispose(){this.owner.element.removeEventListener(this.eventName,this,this.captureOrOptions),this.owner._dequeueHandler(this),this.owner=this.handler=null}},q=class{constructor(){this.dependencies={}}addDependency(e){this.dependencies[e]=!0}hasDependency(e){return e in this.dependencies}},K=class{constructor(e=!1,t=!1){this.targetShadowDOM=e,this.compileSurrogate=t,this.associatedModuleId=null}};K.normal=new K;let W=class e{static enhance(){let t=new e;return t.enhance=!0,t}static unitTest(t,i){let n=new e;return n.type=t,n.attributes=i||{},n}static element(t,i){let n=new e;return n.type=i,n.attributes={},n.anchorIsContainer=!(t.hasAttribute("containerless")||i.containerless),n.initiatedByBehavior=!0,n}static attribute(t,i){let n=new e;return n.attrName=t,n.type=i||null,n.attributes={},n}static dynamic(t,i,n){let r=new e;return r.host=t,r.viewModel=i,r.viewFactory=n,r.inheritBindingContext=!0,r}};const $=W.prototype;$.initiatedByBehavior=!1,$.enhance=!1,$.partReplacements=null,$.viewFactory=null,$.originalAttrName=null,$.skipContentProcessing=!1,$.contentFactory=null,$.viewModel=null,$.anchorIsContainer=!1,$.host=null,$.attributes=null,$.type=null,$.attrName=null,$.inheritBindingContext=!1,W.normal=new W;let X=(s=o=class e{static shadowSlot(t){let i=new e;return i.parentInjectorId=t,i.shadowSlot=!0,i}static contentExpression(t){let i=new e;return i.contentExpression=t,i}static letElement(t){let i=new e;return i.expressions=t,i.letElement=!0,i}static lifting(t,i){let n=new e;return n.parentInjectorId=t,n.expressions=e.noExpressions,n.behaviorInstructions=[i],n.viewFactory=i.viewFactory,n.providers=[i.type.target],n.lifting=!0,n}static normal(t,i,n,r,o,s){let a=new e;return a.injectorId=t,a.parentInjectorId=i,a.providers=n,a.behaviorInstructions=r,a.expressions=o,a.anchorIsContainer=!s||s.anchorIsContainer,a.elementInstruction=s,a}static surrogate(t,i,n,r){let o=new e;return o.expressions=n,o.behaviorInstructions=i,o.providers=t,o.values=r,o}},o.noExpressions=Object.freeze([]),s);const Q=X.prototype;Q.injectorId=null,Q.parentInjectorId=null,Q.shadowSlot=!1,Q.slotName=null,Q.slotFallbackFactory=null,Q.contentExpression=null,Q.letElement=!1,Q.expressions=null,Q.expressions=null,Q.providers=null,Q.viewFactory=null,Q.anchorIsContainer=!1,Q.elementInstruction=null,Q.lifting=!1,Q.values=null;const Z=S.f.create("aurelia:view-strategy",{validate:e=>"function"==typeof e.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>",compose(e){"function"!=typeof e.makeRelativeTo&&(e.makeRelativeTo=A.PLATFORM.noop)}});let G=Z()(a=class{constructor(e){this.path=e,this.absolutePath=null}loadViewFactory(e,t,i,n){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=Object(_.d)(this.path,this.moduleId)),t.associatedModuleId=this.moduleId,e.loadViewFactory(this.absolutePath||this.path,t,i,n)}makeRelativeTo(e){null===this.absolutePath&&(this.absolutePath=Object(_.d)(this.path,e))}})||a,Y=Z()(l=class{constructor(e,t){this.moduleId=t.moduleId,this.viewUrl=e.convertOriginToViewUrl(t)}loadViewFactory(e,t,i,n){return t.associatedModuleId=this.moduleId,e.loadViewFactory(this.viewUrl,t,i,n)}})||l,J=Z()(h=class{constructor(e,t){this.dependencies=e||null,this.dependencyBaseUrl=t||""}loadViewFactory(e,t,i,n){let r=this.entry,o=this.dependencies;if(r&&r.factoryIsReady)return Promise.resolve(null);if(this.entry=r=new M.c(this.moduleId||this.dependencyBaseUrl),r.dependencies=[],r.templateIsLoaded=!0,null!==o)for(let e=0,t=o.length;e<t;++e){let t=o[e];"string"==typeof t||"function"==typeof t?r.addDependency(t):r.addDependency(t.from,t.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(r,t,i,n)}})||h,ee=Z()(c=class{constructor(e,t){this.moduleId=e,this.entry=t}loadViewFactory(e,t,i,n){let r=this.entry;return r.factoryIsReady?Promise.resolve(r.factory):(t.associatedModuleId=this.moduleId,e.loadViewFactory(r,t,i,n))}})||c,te=Z()(u=class{constructor(e,t,i){this.markup=e,this.dependencies=t||null,this.dependencyBaseUrl=i||""}loadViewFactory(e,t,i,n){let r=this.entry,o=this.dependencies;if(r&&r.factoryIsReady)return Promise.resolve(r.factory);if(this.entry=r=new M.c(this.moduleId||this.dependencyBaseUrl),r.template=A.DOM.createTemplateFromMarkup(this.markup),null!==o)for(let e=0,t=o.length;e<t;++e){let t=o[e];"string"==typeof t||"function"==typeof t?r.addDependency(t):r.addDependency(t.from,t.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(r,t,i,n)}})||u,ie=Z()(d=class{constructor(e){("string"==typeof e||e instanceof A.DOM.Element&&"TEMPLATE"===e.tagName)&&(e={template:e}),this.template=e.template,this.dependencies=e.dependencies||[],this.factoryIsReady=!1,this.onReady=null,this.moduleId="undefined"}loadViewFactory(e,t,i,n){if(this.factoryIsReady)return Promise.resolve(this.factory);let r=this.dependencies;return r="function"==typeof r?r():r,r=r||[],r=Array.isArray(r)?r:[r],Promise.all(r).then((i=>{const r=e.container,o=e.appResources,s=e.viewCompiler,a=new me(o);let l,h=[];n&&a.autoRegister(r,n);for(let e of i)if("function"==typeof e)l=a.autoRegister(r,e),null!==l.elementName&&h.push(l);else{if(!e||"object"!=typeof e)throw new Error(`dependency neither function nor object. Received: "${typeof e}"`);for(let t in e){let i=e[t];"function"==typeof i&&(l=a.autoRegister(r,i),null!==l.elementName&&h.push(l))}}return Promise.all(h.map((e=>e.load(r,e.target)))).then((()=>{const e=null!==this.template?s.compile(this.template,a,t):null;return this.factoryIsReady=!0,this.factory=e,e}))}))}})||d,ne=(m=p=class e{getViewStrategy(t){if(!t)return null;if("object"==typeof t&&"getViewStrategy"in t){let e=S.a.get(t.constructor);return"string"==typeof(t=t.getViewStrategy())&&(t=new G(t)),Z.assert(t),e.moduleId&&t.makeRelativeTo(e.moduleId),t}if("string"==typeof t&&(t=new G(t)),Z.validate(t))return t;if("function"!=typeof t&&(t=t.constructor),"$view"in t){let i,n=t.$view;return n="function"==typeof n?n.call(t):n,i=null===n?new J:n instanceof ie?n:new ie(n),S.d.define(e.viewStrategyMetadataKey,i,t),i}let i=S.a.get(t),n=S.d.get(e.viewStrategyMetadataKey,t);if(n)i.moduleId&&(n.moduleId=i.moduleId);else{if(!i.moduleId)throw new Error("Cannot determine default view strategy for object.",t);n=this.createFallbackViewStrategy(i)}return n}createFallbackViewStrategy(e){return new Y(this,e)}convertOriginToViewUrl(e){let t=e.moduleId;return(t.endsWith(".js")||t.endsWith(".ts")?t.substring(0,t.length-3):t)+".html"}},p.viewStrategyMetadataKey="aurelia:view-strategy",m);function re(e){throw new Error(`BindingLanguage must implement ${e}().`)}let oe=class{inspectAttribute(e,t,i,n){re("inspectAttribute")}createAttributeInstruction(e,t,i,n){re("createAttributeInstruction")}createLetExpressions(e,t){re("createLetExpressions")}inspectTextContent(e,t){re("inspectTextContent")}},se=Object.freeze([]),ae=class{static inject(){return[A.DOM.Element]}constructor(e){this.element=e,this.element.auSlotAttribute=this}valueChanged(e,t){}},le=class e{constructor(e,t,i,n){this.anchor=e,this.anchor.viewSlot=this,this.name=t,this.destinationName=i,this.fallbackFactory=n,this.destinationSlot=null,this.projections=0,this.contentView=null,new ae(this.anchor).value=this.destinationName}get needsFallbackRendering(){return this.fallbackFactory&&0===this.projections}renderFallbackContent(e,t,i,n){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);let e=Object.create(null);e[this.destinationSlot.name]=this.destinationSlot,ce.distributeView(this.contentView,e,i,n,this.destinationSlot.name)}}passThroughTo(e){this.destinationSlot=e}addNode(t,i,n,r){null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),i.viewSlot instanceof e?i.viewSlot.passThroughTo(this):(this.projections++,this.destinationSlot.addNode(t,i,n,r))}removeView(e,t){this.projections--,this.destinationSlot.removeView(e,t),this.needsFallbackRendering&&this.renderFallbackContent(null,se,t)}removeAll(e){this.projections=0,this.destinationSlot.removeAll(e),this.needsFallbackRendering&&this.renderFallbackContent(null,se,e)}projectFrom(e,t){this.destinationSlot.projectFrom(e,t)}created(e){this.ownerView=e}bind(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)}attached(){this.contentView&&this.contentView.attached()}detached(){this.contentView&&this.contentView.detached()}unbind(){this.contentView&&this.contentView.unbind()}},he=class{constructor(e,t,i){this.anchor=e,this.anchor.isContentProjectionSource=!0,this.anchor.viewSlot=this,this.name=t,this.fallbackFactory=i,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}get needsFallbackRendering(){return this.fallbackFactory&&0===this.projections}addNode(e,t,i,n,r){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),t.viewSlot instanceof le)t.viewSlot.passThroughTo(this);else if(null!==this.destinationSlots)ce.distributeNodes(e,[t],this.destinationSlots,this,n);else{t.auOwnerView=e,t.auProjectionSource=i,t.auAssignedSlot=this;let r=this._findAnchor(e,t,i,n);r.parentNode.insertBefore(t,r),this.children.push(t),this.projections++}}removeView(e,t){if(null!==this.destinationSlots)ce.undistributeView(e,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)ce.undistributeView(e,this.contentView.slots,t);else{let i=this.children.find((e=>e.auSlotProjectFrom===t));if(i){let n=i.auProjectionChildren,r=this.children;for(let t=0,i=n.length;t<i;++t){let o=n[t];if(o.auOwnerView===e){n.splice(t,1),e.fragment.appendChild(o),t--,i--,this.projections--;let s=r.indexOf(o);s>-1&&r.splice(s,1)}}this.needsFallbackRendering&&this.renderFallbackContent(e,se,t)}}}removeAll(e){if(null!==this.destinationSlots)ce.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)ce.undistributeAll(this.contentView.slots,e);else{let t=this.children.find((t=>t.auSlotProjectFrom===e));if(t){let i=t.auProjectionChildren,n=this.children;for(let e=0,t=i.length;e<t;++e){let t=i[e];t.auOwnerView.fragment.appendChild(t),this.projections--;let r=n.indexOf(t);r>-1&&n.splice(r,1)}t.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,se,e)}}}_findAnchor(e,t,i,n){if(i){let r=this.children.find((e=>e.auSlotProjectFrom===i));if(r){if(void 0!==n){let i,o=r.auProjectionChildren,s=-1;for(let r=0,a=o.length;r<a;++r){let a=o[r];if(a.auOwnerView!==i&&(s++,i=a.auOwnerView,s>=n&&i!==e))return o.splice(r,0,t),a}}return r.auProjectionChildren.push(t),r}}return this.anchor}projectTo(e){this.destinationSlots=e}projectFrom(e,t){let i=A.DOM.createComment("anchor"),n=this.anchor.parentNode;i.auSlotProjectFrom=t,i.auOwnerView=e,i.auProjectionChildren=[],n.insertBefore(i,this.anchor),this.children.push(i),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(i)}renderFallbackContent(e,t,i,n){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){let r=this.contentView.slots,o=this.projectFromAnchors;if(null!==o)for(let e in r){let t=r[e];for(let e=0,i=o.length;e<i;++e){let i=o[e];t.projectFrom(i.auOwnerView,i.auSlotProjectFrom)}}this.fallbackSlots=r,ce.distributeNodes(e,t,r,i,n)}}created(e){this.ownerView=e}bind(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)}attached(){this.contentView&&this.contentView.attached()}detached(){this.contentView&&this.contentView.detached()}unbind(){this.contentView&&this.contentView.unbind()}},ce=(g=f=class e{static getSlotName(t){return void 0===t.auSlotAttribute?e.defaultSlotKey:t.auSlotAttribute.value}static distributeView(t,i,n,r,o){let s;if(null===t)s=se;else{let e=t.fragment.childNodes,i=e.length;s=new Array(i);for(let t=0;t<i;++t)s[t]=e[t]}e.distributeNodes(t,s,i,n,r,o)}static undistributeView(e,t,i){for(let n in t)t[n].removeView(e,i)}static undistributeAll(e,t){for(let i in e)e[i].removeAll(t)}static distributeNodes(t,i,n,r,o,s){for(let a=0,l=i.length;a<l;++a){let h=i[a],c=h.nodeType;if(h.isContentProjectionSource){h.viewSlot.projectTo(n);for(let e in n)n[e].projectFrom(t,h.viewSlot);i.splice(a,1),l--,a--}else if(1===c||3===c||h.viewSlot instanceof le)if(3===c&&D(h))i.splice(a,1),l--,a--;else{let c=n[s||e.getSlotName(h)];c&&(c.addNode(t,h,r,o),i.splice(a,1),l--,a--)}else i.splice(a,1),l--,a--}for(let e in n){let s=n[e];s.needsFallbackRendering&&s.renderFallbackContent(t,i,r,o)}}},f.defaultSlotKey="__au-default-slot-key__",g);function ue(e,t,i,n){if(!t)return;let r=e[t];if(r){if(r!==i)throw new Error(`Attempted to register ${n} when one with the same name already exists. Name: ${t}.`)}else e[t]=i}function de(e,t){if(/[A-Z]/.test(e)){let i=R(e);return O.getLogger("templating").warn(`'${e}' is not a valid ${t} name and has been converted to '${i}'. Upper-case letters are not allowed because the DOM is not case-sensitive.`),i}return e}const pe="__au_resource__";let me=class e{static convention(e,t){let i;if(t&&pe in t)return t;if("$resource"in e){let n=e.$resource;if("string"==typeof n)i=t||new Ke,i.__au_resource__=!0,i.elementName||(i.elementName=de(n,"custom element"));else{"function"==typeof n&&(n=n.call(e)),"string"==typeof n&&(n={name:n}),n=Object.assign({},n);let r=n.type||"element",o=n.name;switch(r){case"element":case"attribute":i=t||new Ke,i.__au_resource__=!0,"element"===r?i.elementName||(i.elementName=o?de(o,"custom element"):R(e.name)):i.attributeName||(i.attributeName=o?de(o,"custom attribute"):R(e.name)),"templateController"in n&&(n.liftsContent=n.templateController,delete n.templateController),"defaultBindingMode"in n&&void 0!==i.attributeDefaultBindingMode&&(n.attributeDefaultBindingMode=n.defaultBindingMode,delete n.defaultBindingMode),delete n.name,Object.assign(i,n);break;case"valueConverter":i=new N.Z(Object(N.eb)(o||e.name));break;case"bindingBehavior":i=new N.i(Object(N.eb)(o||e.name));break;case"viewEngineHooks":i=new L}}if(i instanceof Ke){let t="string"==typeof n?void 0:n.bindables,r=i.properties;if(Array.isArray(t))for(let n=0,o=t.length;o>n;++n){let o=t[n];if(!o||"string"!=typeof o&&!o.name)throw new Error(`Invalid bindable property at "${n}" for class "${e.name}". Expected either a string or an object with "name" property.`);let s=new He(o),a=!1;for(let e=0,t=r.length;t>e;++e)if(r[e].name===s.name){a=!0;break}a||s.registerWith(e,i)}}}return i}constructor(e,t){this.bindingLanguage=null,this.parent=e||null,this.hasParent=null!==this.parent,this.viewUrl=t||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}_tryAddHook(e,t){if("function"==typeof e[t]){let i,n=e[t].bind(e),r=1;for(;void 0!==this[i=t+r.toString()];)r++;this[t]=!0,this[i]=n}}_invokeHook(e,t,i,n,r){if(this.hasParent&&this.parent._invokeHook(e,t,i,n,r),this[e]){this[e+"1"](t,i,n,r);let o=e+"2";if(this[o]&&(this[o](t,i,n,r),o=e+"3",this[o])){this[o](t,i,n,r);let s=4;for(;void 0!==this[o=e+s.toString()];)this[o](t,i,n,r),s++}}}registerViewEngineHooks(e){this._tryAddHook(e,"beforeCompile"),this._tryAddHook(e,"afterCompile"),this._tryAddHook(e,"beforeCreate"),this._tryAddHook(e,"afterCreate"),this._tryAddHook(e,"beforeBind"),this._tryAddHook(e,"beforeUnbind")}getBindingLanguage(e){return this.bindingLanguage||(this.bindingLanguage=e)}patchInParent(e){let t=this.parent;this.parent=e||null,this.hasParent=null!==this.parent,null===e.parent&&(e.parent=t,e.hasParent=null!==t)}relativeToView(e){return Object(_.d)(e,this.viewUrl)}registerElement(e,t){ue(this.elements,e,t,"an Element")}getElement(e){return this.elements[e]||(this.hasParent?this.parent.getElement(e):null)}mapAttribute(e){return this.attributeMap[e]||(this.hasParent?this.parent.mapAttribute(e):null)}registerAttribute(e,t,i){this.attributeMap[e]=i,ue(this.attributes,e,t,"an Attribute")}getAttribute(e){return this.attributes[e]||(this.hasParent?this.parent.getAttribute(e):null)}registerValueConverter(e,t){ue(this.valueConverters,e,t,"a ValueConverter")}getValueConverter(e){return this.valueConverters[e]||(this.hasParent?this.parent.getValueConverter(e):null)}registerBindingBehavior(e,t){ue(this.bindingBehaviors,e,t,"a BindingBehavior")}getBindingBehavior(e){return this.bindingBehaviors[e]||(this.hasParent?this.parent.getBindingBehavior(e):null)}registerValue(e,t){ue(this.values,e,t,"a value")}getValue(e){return this.values[e]||(this.hasParent?this.parent.getValue(e):null)}autoRegister(t,i){let n=S.d.getOwn(S.d.resource,i);return n?n instanceof Ke&&(e.convention(i,n),null===n.attributeName&&null===n.elementName&&Ke.convention(i.name,n),null===n.attributeName&&null===n.elementName&&(n.elementName=R(i.name))):(n=e.convention(i)||Ke.convention(i.name)||N.Z.convention(i.name)||N.i.convention(i.name)||L.convention(i.name),n||(n=new Ke,n.elementName=R(i.name)),S.d.define(S.d.resource,n,i)),n.initialize(t,i),n.register(this),n}},fe=class{constructor(e,t,i,n,r,o,s){this.container=e,this.viewFactory=t,this.resources=t.resources,this.fragment=i,this.firstChild=i.firstChild,this.lastChild=i.lastChild,this.controllers=n,this.bindings=r,this.children=o,this.slots=s,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this._isUserControlled=!1,this.contentView=null;for(let e in s){this.hasSlots=!0;break}}returnToCache(){this.viewFactory.returnViewToCache(this)}created(){let e,t,i=this.controllers;for(e=0,t=i.length;e<t;++e)i[e].created(this)}bind(e,t,i){let n,r,o,s,a;if(!i||!this._isUserControlled){if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e,this.overrideContext=t||Object(N.kb)(e),this.resources._invokeHook("beforeBind",this),r=this.bindings,s=0,a=r.length;s<a;++s)r[s].bind(this);for(null!==this.viewModelScope&&(e.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),n=this.controllers,s=0,a=n.length;s<a;++s)n[s].bind(this);for(o=this.children,s=0,a=o.length;s<a;++s)o[s].bind(e,t,!0);this.hasSlots&&ce.distributeView(this.contentView,this.slots)}}addBinding(e){this.bindings.push(e),this.isBound&&e.bind(this)}unbind(){let e,t,i,n,r;if(this.isBound){for(this.isBound=!1,this.resources._invokeHook("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),t=this.bindings,n=0,r=t.length;n<r;++n)t[n].unbind();for(e=this.controllers,n=0,r=e.length;n<r;++n)e[n].unbind();for(i=this.children,n=0,r=i.length;n<r;++n)i[n].unbind();this.bindingContext=null,this.overrideContext=null}}insertNodesBefore(e){e.parentNode.insertBefore(this.fragment,e)}appendNodesTo(e){e.appendChild(this.fragment)}removeNodes(){let e,t=this.fragment,i=this.firstChild,n=this.lastChild;for(;i&&(e=i.nextSibling,t.appendChild(i),i!==n);)i=e}attached(){let e,t,i,n;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),e=this.controllers,i=0,n=e.length;i<n;++i)e[i].attached();for(t=this.children,i=0,n=t.length;i<n;++i)t[i].attached()}}detached(){let e,t,i,n;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),e=this.controllers,i=0,n=e.length;i<n;++i)e[i].detached();for(t=this.children,i=0,n=t.length;i<n;++i)t[i].detached()}}};let ge=class{constructor(e,t,i=B.instance){this.anchor=e,this.anchorIsContainer=t,this.bindingContext=null,this.overrideContext=null,this.animator=i,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,e.viewSlot=this,e.isContentProjectionSource=!1}animateView(e,t="enter"){let i=function(e){if(void 0!==e.animatableElement)return e.animatableElement;let t=e.firstChild;for(;t&&1!==t.nodeType;)t=t.nextSibling;return t&&1===t.nodeType?e.animatableElement=t.classList.contains("au-animate")?t:null:e.animatableElement=null}(e);if(null!==i)switch(t){case"enter":return this.animator.enter(i);case"leave":return this.animator.leave(i);default:throw new Error("Invalid animation direction: "+t)}}transformChildNodesIntoView(){let e=this.anchor;this.children.push({fragment:e,firstChild:e.firstChild,lastChild:e.lastChild,returnToCache(){},removeNodes(){let t;for(;t=e.lastChild;)e.removeChild(t)},created(){},bind(){},unbind(){},attached(){},detached(){}})}bind(e,t){let i,n,r;if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e=e||this.bindingContext,this.overrideContext=t=t||this.overrideContext,r=this.children,i=0,n=r.length;i<n;++i)r[i].bind(e,t,!0)}unbind(){if(this.isBound){let e,t,i=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,e=0,t=i.length;e<t;++e)i[e].unbind()}}add(e){if(this.anchorIsContainer?e.appendNodesTo(this.anchor):e.insertNodesBefore(this.anchor),this.children.push(e),this.isAttached)return e.attached(),this.animateView(e,"enter")}insert(e,t){let i=this.children,n=i.length;return 0===e&&0===n||e>=n?this.add(t):(t.insertNodesBefore(i[e].firstChild),i.splice(e,0,t),this.isAttached?(t.attached(),this.animateView(t,"enter")):void 0)}move(e,t){if(e===t)return;const i=this.children,n=i[e];n.removeNodes(),n.insertNodesBefore(i[t].firstChild),i.splice(e,1),i.splice(t,0,n)}remove(e,t,i){return this.removeAt(this.children.indexOf(e),t,i)}removeMany(e,t,i){const n=this.children;let r,o=e.length,s=[];e.forEach((e=>{if(i)return void e.removeNodes();let t=this.animateView(e,"leave");t?s.push(t.then((()=>e.removeNodes()))):e.removeNodes()}));let a=()=>{if(this.isAttached)for(r=0;r<o;++r)e[r].detached();if(t)for(r=0;r<o;++r)e[r].returnToCache();for(r=0;r<o;++r){const t=n.indexOf(e[r]);t>=0&&n.splice(t,1)}};return s.length>0?Promise.all(s).then((()=>a())):a()}removeAt(e,t,i){let n=this.children[e],r=()=>(e=this.children.indexOf(n),n.removeNodes(),this.children.splice(e,1),this.isAttached&&n.detached(),t&&n.returnToCache(),n);if(!i){let e=this.animateView(n,"leave");if(e)return e.then((()=>r()))}return r()}removeAll(e,t){let i,n=this.children,r=n.length,o=[];n.forEach((e=>{if(t)return void e.removeNodes();let i=this.animateView(e,"leave");i?o.push(i.then((()=>e.removeNodes()))):e.removeNodes()}));let s=()=>{if(this.isAttached)for(i=0;i<r;++i)n[i].detached();if(e)for(i=0;i<r;++i){const e=n[i];e&&e.returnToCache()}this.children=[]};return o.length>0?Promise.all(o).then((()=>s())):s()}attached(){let e,t,i,n;if(!this.isAttached)for(this.isAttached=!0,i=this.children,e=0,t=i.length;e<t;++e)n=i[e],n.attached(),this.animateView(n,"enter")}detached(){let e,t,i;if(this.isAttached)for(this.isAttached=!1,i=this.children,e=0,t=i.length;e<t;++e)i[e].detached()}projectTo(e){this.projectToSlots=e,this.add=this._projectionAdd,this.insert=this._projectionInsert,this.move=this._projectionMove,this.remove=this._projectionRemove,this.removeAt=this._projectionRemoveAt,this.removeMany=this._projectionRemoveMany,this.removeAll=this._projectionRemoveAll,this.children.forEach((t=>ce.distributeView(t,e,this)))}_projectionAdd(e){ce.distributeView(e,this.projectToSlots,this),this.children.push(e),this.isAttached&&e.attached()}_projectionInsert(e,t){0===e&&!this.children.length||e>=this.children.length?this.add(t):(ce.distributeView(t,this.projectToSlots,this,e),this.children.splice(e,0,t),this.isAttached&&t.attached())}_projectionMove(e,t){if(e===t)return;const i=this.children,n=i[e];ce.undistributeView(n,this.projectToSlots,this),ce.distributeView(n,this.projectToSlots,this,t),i.splice(e,1),i.splice(t,0,n)}_projectionRemove(e,t){ce.undistributeView(e,this.projectToSlots,this),this.children.splice(this.children.indexOf(e),1),this.isAttached&&e.detached(),t&&e.returnToCache()}_projectionRemoveAt(e,t){let i=this.children[e];ce.undistributeView(i,this.projectToSlots,this),this.children.splice(e,1),this.isAttached&&i.detached(),t&&i.returnToCache()}_projectionRemoveMany(e,t){e.forEach((e=>this.remove(e,t)))}_projectionRemoveAll(e){ce.undistributeAll(this.projectToSlots,this);let t=this.children,i=t.length;for(let n=0;n<i;++n)e?t[n].returnToCache():this.isAttached&&t[n].detached();this.children=[]}},we=new(Object(T.A)(w=class{get(e,t){let i=t.__providerId__;return i in e?e[i]:e[i]=e.invoke(t)}})||w);function ve(e){if(e===A.DOM.Element)return this.element;if(e===Ae){if(this.boundViewFactory)return this.boundViewFactory;let e=this.instruction.viewFactory,t=this.partReplacements;return t&&(e=t[e.part]||e),this.boundViewFactory=new Ae(this,e,t),this.boundViewFactory}return e===ge?(void 0===this.viewSlot&&(this.viewSlot=new ge(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):e===z?this.elementEvents||(this.elementEvents=new z(this.element)):e===P?this.compositionTransaction||(this.compositionTransaction=this.parent.get(e)):e===me?this.viewResources:e===X?this.instruction:this.superGet(e)}function be(e){return this._element.hasAttribute(e)}function ye(e){return this._element.getAttribute(e)}function Ce(e,t){this._element.setAttribute(e,t)}function Ve(e,t,i,n,r,o,s,a,l){let h,c,u,d,p,m=i.behaviorInstructions,f=i.expressions;if(i.contentExpression)return r.push(i.contentExpression.createBinding(t.nextSibling)),t.nextSibling.auInterpolationTarget=!0,void t.parentNode.removeChild(t);if(i.shadowSlot){let e,r=A.DOM.createComment("slot");return e=i.slotDestination?new le(r,i.slotName,i.slotDestination,i.slotFallbackFactory):new he(r,i.slotName,i.slotFallbackFactory),A.DOM.replaceNode(r,t),s[i.slotName]=e,void n.push(e)}if(i.letElement){for(c=0,u=f.length;c<u;++c)r.push(f[c].createBinding());t.parentNode.removeChild(t)}else{if(m.length)for(i.anchorIsContainer||(t=function(e,t){let i=A.DOM.createComment("anchor");if(t){let t=e.firstChild;t&&"AU-CONTENT"===t.tagName&&(i.contentElement=t),i._element=e,i.hasAttribute=be,i.getAttribute=ye,i.setAttribute=Ce}return A.DOM.replaceNode(i,e),i}(t,i.elementInstruction)),e[i.injectorId]=h=function(e,t,i,n,r,o){let s,a,l=e.createChild();for(l.element=t,l.instruction=i,l.children=n,l.viewResources=o,l.partReplacements=r,s=i.providers,a=s.length;a--;)l._resolvers.set(s[a],we);return l.superGet=l.get,l.get=ve,l}(e[i.parentInjectorId],t,i,o,a,l),c=0,u=m.length;c<u;++c)d=m[c],p=d.type.create(h,d,t,r),n.push(p);for(c=0,u=f.length;c<u;++c)r.push(f[c].createBinding(t))}}function Oe(e,t){let i,n,r,o,s,a=e.split(";");for(t=t||{},n=0;n<a.length;n++)r=a[n],i=r.indexOf(":"),o=r.substring(0,i).trim(),s=r.substring(i+1).trim(),t[o]=s;return t}function Se(e){let t="";for(let i in e)t+=i+":"+e[i]+";";return t}let Ae=class{constructor(e,t,i){this.parentContainer=e,this.viewFactory=t,this.factoryCreateInstruction={partReplacements:i}}create(){let e=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return e._isUserControlled=!0,e}get isCaching(){return this.viewFactory.isCaching}setCacheSize(e,t){this.viewFactory.setCacheSize(e,t)}getCachedView(){return this.viewFactory.getCachedView()}returnViewToCache(e){this.viewFactory.returnViewToCache(e)}},Me=class{constructor(e,t,i){this.isCaching=!1,this.template=e,this.instructions=t,this.resources=i,this.cacheSize=-1,this.cache=null}setCacheSize(e,t){e&&("*"===e?e=Number.MAX_VALUE:"string"==typeof e&&(e=parseInt(e,10))),-1!==this.cacheSize&&t||(this.cacheSize=e),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}getCachedView(){return null!==this.cache&&this.cache.pop()||null}returnViewToCache(e){e.isAttached&&e.detached(),e.isBound&&e.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(e.fromCache=!0,this.cache.push(e))}create(e,t,i){t=t||W.normal;let n=this.getCachedView();if(null!==n)return n;let r,o,s,a,l,h=t.enhance?this.template:this.template.cloneNode(!0),c=h.querySelectorAll(".au-target"),u=this.instructions,d=this.resources,p=[],m=[],f=[],g=Object.create(null),w={root:e},v=t.partReplacements;for(this.resources._invokeHook("beforeCreate",this,e,h,t),i&&null!==this.surrogateInstruction&&function(e,t,i,n,r,o){let s,a,l,h,c,u=i.behaviorInstructions,d=i.expressions,p=i.providers,m=i.values;for(s=p.length;s--;)e._resolvers.set(p[s],we);for(let e in m)if(c=t.getAttribute(e),c){if("class"===e)t.setAttribute("class",c+" "+m[e]);else if("style"===e){let i=Oe(m[e]);Oe(c,i),t.setAttribute("style",Se(i))}}else t.setAttribute(e,m[e]);if(u.length)for(s=0,a=u.length;s<a;++s)l=u[s],h=l.type.create(e,l,t,r),h.contentView&&o.push(h.contentView),n.push(h);for(s=0,a=d.length;s<a;++s)r.push(d[s].createBinding(t))}(e,i,this.surrogateInstruction,p,m,f),t.enhance&&h.hasAttribute("au-target-id")&&(a=h,l=u[a.getAttribute("au-target-id")],Ve(w,a,l,p,m,f,g,v,d)),r=0,o=c.length;r<o;++r)a=c[r],l=u[a.getAttribute("au-target-id")],Ve(w,a,l,p,m,f,g,v,d);return s=new fe(e,this,h,p,m,f,g),t.initiatedByBehavior||s.created(),this.resources._invokeHook("afterCreate",s),s}},_e=0;let Ne=0;function Te(e){let t=e.getAttribute("class"),i=(++Ne).toString();return e.setAttribute("class",t?t+" au-target":"au-target"),e.setAttribute("au-target-id",i),i}const je=oe.prototype.createLetExpressions;let xe=class{static inject(){return[oe,me]}constructor(e,t){this.bindingLanguage=e,this.resources=t}compile(e,t,i){let n,r,o;t=t||this.resources,i=i||K.normal,(e="string"==typeof e?A.DOM.createTemplateFromMarkup(e):e).content?(r=e.getAttribute("part"),o=e.getAttribute("view-cache"),n=A.DOM.adoptNode(e.content)):n=e,i.targetShadowDOM=i.targetShadowDOM&&A.FEATURE.shadowDOM,t._invokeHook("beforeCompile",n,t,i);let s={};this._compileNode(n,t,s,e,"root",!i.targetShadowDOM);let a=n.firstChild;if(a&&1===a.nodeType){let e=a.getAttribute("au-target-id");if(e){let t=s[e];(t.shadowSlot||t.lifting||t.elementInstruction&&!t.elementInstruction.anchorIsContainer)&&n.insertBefore(A.DOM.createComment("view"),a)}}let l=new Me(n,s,t);return l.surrogateInstruction=i.compileSurrogate?this._compileSurrogate(e,t):null,l.part=r,o&&l.setCacheSize(o),t._invokeHook("afterCompile",l),l}_compileNode(e,t,i,n,r,o){switch(e.nodeType){case 1:return this._compileElement(e,t,i,n,r,o);case 3:let s=t.getBindingLanguage(this.bindingLanguage).inspectTextContent(t,e.wholeText);if(s){let t=A.DOM.createElement("au-marker"),r=Te(t);for((e.parentNode||n).insertBefore(t,e),e.textContent=" ",i[r]=X.contentExpression(s);e.nextSibling&&3===e.nextSibling.nodeType;)(e.parentNode||n).removeChild(e.nextSibling)}else for(;e.nextSibling&&3===e.nextSibling.nodeType;)e=e.nextSibling;return e.nextSibling;case 11:let a=e.firstChild;for(;a;)a=this._compileNode(a,t,i,e,r,o)}return e.nextSibling}_compileSurrogate(e,t){let i,n,r,o,s,a,l,h,c,u,d,p=e.tagName.toLowerCase(),m=e.attributes,f=t.getBindingLanguage(this.bindingLanguage),g=[],w=[],v={},b=!1,y=[];for(o=0,s=m.length;o<s;++o){if(a=m[o],l=a.name,h=a.value,c=f.inspectAttribute(t,p,l,h),u=t.getAttribute(c.attrName),u&&(i=t.mapAttribute(c.attrName),i&&(n=u.attributes[i],n&&(c.defaultBindingMode=n.defaultBindingMode,c.command||c.expression||(c.command=n.hasOptions?"options":null),c.command&&"options"!==c.command&&u.primaryProperty)))){const e=u.primaryProperty;l=c.attrName=e.attribute,c.defaultBindingMode=e.defaultBindingMode}if(r=f.createAttributeInstruction(t,e,c,void 0,u),r)if(r.alteredAttr&&(u=t.getAttribute(r.attrName)),r.discrete)g.push(r);else if(u){if(r.type=u,this._configureProperties(r,t),u.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");w.push(r)}else g.push(r.attributes[r.attrName]);else if(u){if(r=W.attribute(l,u),r.attributes[t.mapAttribute(l)]=h,u.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");w.push(r)}else"id"!==l&&"part"!==l&&"replace-part"!==l&&(b=!0,v[l]=h)}if(g.length||w.length||b){for(o=0,s=w.length;o<s;++o)r=w[o],r.type.compile(this,t,e,r),y.push(r.type.target);for(o=0,s=g.length;o<s;++o)d=g[o],void 0!==d.attrToRemove&&e.removeAttribute(d.attrToRemove);return X.surrogate(y,w,g,v)}return null}_compileElement(e,t,i,n,r,o){let s,a,l,h,c,u,d,p,m,f,g,w,v,b,y,C,V,O,S=e.tagName.toLowerCase(),M=e.attributes,_=[],N=[],T=[],j=t.getBindingLanguage(this.bindingLanguage);if("slot"===S)return o&&(e=function(e,t,i,n,r){let o=A.DOM.createElement("au-shadow-slot");A.DOM.replaceNode(o,i);let s=Te(o),a=X.shadowSlot(r);if(a.slotName=i.getAttribute("name")||ce.defaultSlotKey,a.slotDestination=i.getAttribute("slot"),i.innerHTML.trim()){let n,r=A.DOM.createDocumentFragment();for(;n=i.firstChild;)r.appendChild(n);a.slotFallbackFactory=e.compile(r,t)}return n[s]=a,o}(this,t,e,i,r)),e.nextSibling;if("template"===S){if(!("content"in e))throw new Error("You cannot place a template element within "+e.namespaceURI+" namespace");l=this.compile(e,t),l.part=e.getAttribute("part")}else{if(h=t.getElement(e.getAttribute("as-element")||S),"let"===S&&!h&&j.createLetExpressions!==je)return _=j.createLetExpressions(t,e),V=Te(e),i[V]=X.letElement(_),e.nextSibling;h&&(c=W.element(e,h),h.processAttributes(this,t,e,M,c),N.push(c))}for(d=0,p=M.length;d<p;++d){if(m=M[d],w=f=m.name,g=m.value,b=j.inspectAttribute(t,S,f,g),o&&"slot"===b.attrName&&(b.attrName=f="au-slot"),h=t.getAttribute(b.attrName),u=null,h){if(C=t.mapAttribute(b.attrName),C&&(y=h.attributes[C],y&&(b.defaultBindingMode=y.defaultBindingMode,b.command||b.expression||(b.command=y.hasOptions?"options":null),b.command&&"options"!==b.command&&h.primaryProperty))){const e=h.primaryProperty;f=b.attrName=e.attribute,b.defaultBindingMode=e.defaultBindingMode}}else c&&(u=c.type.attributes[b.attrName],u&&(b.defaultBindingMode=u.defaultBindingMode));if(v=u?j.createAttributeInstruction(t,e,b,c):j.createAttributeInstruction(t,e,b,void 0,h),v)if(v.alteredAttr&&(h=t.getAttribute(v.attrName)),v.discrete)_.push(v);else if(h){if(v.type=h,this._configureProperties(v,t),h.liftsContent){v.originalAttrName=w,a=v;break}N.push(v)}else u?c.attributes[b.attrName].targetProperty=u.name:_.push(v.attributes[v.attrName]);else if(h){if(v=W.attribute(f,h),v.attributes[t.mapAttribute(f)]=g,h.liftsContent){v.originalAttrName=w,a=v;break}N.push(v)}else u&&(c.attributes[f]=g)}if(a)a.viewFactory=l,V=Te(e=a.type.compile(this,t,e,a,n)),i[V]=X.lifting(r,a);else{let a=!1;if(_.length||N.length){for(O=!!N.length&&++_e,d=0,p=N.length;d<p;++d)v=N[d],v.type.compile(this,t,e,v,n),T.push(v.type.target),a=a||v.skipContentProcessing;for(d=0,p=_.length;d<p;++d)s=_[d],void 0!==s.attrToRemove&&e.removeAttribute(s.attrToRemove);V=Te(e),i[V]=X.normal(O,r,T,N,_,c)}if(a)return e.nextSibling;let l=e.firstChild;for(;l;)l=this._compileNode(l,t,i,e,O||r,o)}return e.nextSibling}_configureProperties(e,t){let i,n,r,o=e.type,s=e.attrName,a=e.attributes,l=t.mapAttribute(s);for(n in l&&s in a&&l!==s&&(a[l]=a[s],delete a[s]),a)r=a[n],null!==r&&"object"==typeof r&&(i=o.attributes[n],r.targetProperty=void 0!==i?i.name:n)}},Be=class{constructor(e){this.id=e,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}initialize(e){let t=this.mainResource,i=this.resources,n=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==t&&(t.metadata.viewStrategy=n,t.initialize(e));for(let r=0,o=i.length;r<o;++r)t=i[r],t.metadata.viewStrategy=n,t.initialize(e)}}register(e,t){let i=this.mainResource,n=this.resources;void 0!==i&&(i.register(e,t),t=null);for(let i=0,r=n.length;i<r;++i)n[i].register(e,t),t=null}load(e,t){if(null!==this.onLoaded)return this.loadContext===t?Promise.resolve():this.onLoaded;let i,n=this.mainResource,r=this.resources;if(void 0!==n){i=new Array(r.length+1),i[0]=n.load(e,t);for(let n=0,o=r.length;n<o;++n)i[n+1]=r[n].load(e,t)}else{i=new Array(r.length);for(let n=0,o=r.length;n<o;++n)i[n]=r[n].load(e,t)}return this.loadContext=t,this.onLoaded=Promise.all(i),this.onLoaded}},Ie=class{constructor(e,t,i){i||(i=S.d.get(S.d.resource,t))||((i=new Ke).elementName=R(e),S.d.define(S.d.resource,i,t)),i instanceof Ke?void 0===i.elementName?i.elementName=R(e):void 0===i.attributeName?i.attributeName=R(e):null===i.attributeName&&null===i.elementName&&Ke.convention(e,i):i.name||(i.name=R(e)),this.metadata=i,this.value=t}initialize(e){this.metadata.initialize(e,this.value)}register(e,t){this.metadata.register(e,t)}load(e,t){return this.metadata.load(e,this.value,t)}},Ee=class{constructor(){this.cache=Object.create(null)}getAnalysis(e){return this.cache[e]}analyze(e,t,i){let n,r,o,s,a,l,h,c,u,d=[];if(u=this.cache[e],u)return u;for(a in u=new Be(e),this.cache[e]=u,"function"==typeof t&&(t={default:t}),i&&(n=new Ie(i,t[i])),t)l=t[a],a!==i&&"function"==typeof l&&(s=S.d.get(S.d.resource,l),s?(s instanceof Ke&&(me.convention(l,s),null===s.attributeName&&null===s.elementName&&Ke.convention(a,s),null===s.attributeName&&null===s.elementName&&(s.elementName=R(a))),!n&&s instanceof Ke&&null!==s.elementName?n=new Ie(a,l,s):d.push(new Ie(a,l,s))):Z.decorates(l)?c=l:l instanceof M.c?c=new ee(e,l):(h=me.convention(l))||(h=Ke.convention(a))?(null===h.elementName||n?d.push(new Ie(a,l,h)):n=new Ie(a,l,h),S.d.define(S.d.resource,h,l)):(h=N.Z.convention(a)||N.i.convention(a)||L.convention(a))?(d.push(new Ie(a,l,h)),S.d.define(S.d.resource,h,l)):r||(r=l,o=a));return!n&&r&&(n=new Ie(o,r)),u.moduleInstance=t,u.mainResource=n,u.resources=d,u.viewStrategy=c,u}},Pe=O.getLogger("templating");let Fe=null,ke=(b=v=class e{static inject(){return[M.a,T.b,xe,Ee,me]}constructor(e,t,i,n,r){this.loader=e,this.container=t,this.viewCompiler=i,this.moduleAnalyzer=n,this.appResources=r,this._pluginMap={},null===Fe&&(Fe=new Ke,Fe.attributeName="au-slot",S.d.define(S.d.resource,Fe,ae)),Fe.initialize(t,ae),Fe.register(r)}addResourcePlugin(e,t){let i=e.replace(".","")+"-resource-plugin";this._pluginMap[e]=i,this.loader.addPlugin(i,t)}loadViewFactory(e,t,i,n){return i=i||new q,function(e,t){return t instanceof M.c?Promise.resolve(t):e.loadTemplate(t)}(this.loader,e).then((e=>{const r=e.address;return e.onReady?i.hasDependency(r)?null===e.template?e.onReady:Promise.resolve(new class{constructor(e){e.then((e=>this.viewFactory=e))}create(e,t,i,n){return this.viewFactory.create(e,t,i,n)}get isCaching(){return this.viewFactory.isCaching}setCacheSize(e,t){this.viewFactory.setCacheSize(e,t)}getCachedView(){return this.viewFactory.getCachedView()}returnViewToCache(e){this.viewFactory.returnViewToCache(e)}}(e.onReady)):(i.addDependency(r),e.onReady):(i.addDependency(r),e.onReady=this.loadTemplateResources(e,t,i,n).then((i=>{if(e.resources=i,null===e.template)return e.factory=null;let n=this.viewCompiler.compile(e.template,i,t);return e.factory=n})),e.onReady)}))}loadTemplateResources(t,i,n,r){let o,s,a=new me(this.appResources,t.address),l=t.dependencies;if(i=i||K.normal,0===l.length&&!i.associatedModuleId)return Promise.resolve(a);if(o=l.map((e=>e.src)),s=l.map((e=>e.name)),Pe.debug("importing resources for "+t.address,o),r){let n=S.d.get(e.viewModelRequireMetadataKey,r);if(n){let e=o.length;for(let e=0,i=n.length;e<i;++e){let i=n[e],r="function"==typeof i?S.a.get(i).moduleId:Object(_.d)(i.src||i,t.address);-1===o.indexOf(r)&&(o.push(r),s.push(i.as))}Pe.debug("importing ViewModel resources for "+i.associatedModuleId,o.slice(e))}}return this.importViewResources(o,s,a,i,n)}importViewModelResource(e,t){return this.loader.loadModule(e).then((i=>{let n=S.a.get(i).moduleId,r=this.moduleAnalyzer.analyze(n,i,t);if(!r.mainResource)throw new Error(`No view model found in module "${e}".`);return r.initialize(this.container),r.mainResource}))}importViewResources(e,t,i,n,r){return r=r||new q,n=n||K.normal,e=e.map((e=>this._applyLoaderPlugin(e))),this.loader.loadAllModules(e).then((e=>{let o,s,a,l,h,c,u=this.container,d=this.moduleAnalyzer,p=new Array(e.length);for(o=0,s=e.length;o<s;++o)h=e[o],l=S.a.get(h).moduleId,a=d.analyze(l,h),a.initialize(u),a.register(i,t[o]),p[o]=a;for(n.associatedModuleId&&(c=d.getAnalysis(n.associatedModuleId),c&&c.register(i)),o=0,s=p.length;o<s;++o)p[o]=p[o].load(u,r);return Promise.all(p).then((()=>i))}))}_applyLoaderPlugin(e){let t=e.lastIndexOf(".");if(-1!==t){let i=e.substring(t),n=this._pluginMap[i];return void 0===n?e:this.loader.applyPluginToUrl(e,n)}return e}},v.viewModelRequireMetadataKey="aurelia:view-model-require",b),Re=class{constructor(e,t,i,n){this.behavior=e,this.instruction=t,this.viewModel=i,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=n,this.elementEvents=n.elementEvents||null;let r,o,s=e.observerLocator.getOrCreateObserversLookup(i),a=e.handlesBind,l=t.attributes,h=this.boundProperties=[],c=e.properties;for(e._ensurePropertiesDefined(i,s),r=0,o=c.length;r<o;++r)c[r]._initialize(i,s,l,a,h)}created(e){this.behavior.handlesCreated&&this.viewModel.created(e,this.view)}automate(e,t){this.view.bindingContext=this.viewModel,this.view.overrideContext=e||Object(N.kb)(this.viewModel),this.view._isUserControlled=!0,this.behavior.handlesCreated&&this.viewModel.created(t||null,this.view),this.bind(this.view)}bind(e){let t,i,n,r,o,s,a=this.behavior.handlesBind,l=this.boundProperties;if(this.isBound){if(this.scope===e)return;this.unbind()}for(this.isBound=!0,this.scope=e,t=0,i=l.length;t<i;++t)n=l[t],r=n.observer,o=r.selfSubscriber,r.publishing=!1,a&&(r.selfSubscriber=null),n.binding.bind(e),r.call(),r.publishing=!0,r.selfSubscriber=o;null!==this.view?(a&&(this.view.viewModelScope=e),this.viewModel===e.overrideContext.bindingContext?s=e.overrideContext:this.instruction.inheritBindingContext?s=Object(N.kb)(this.viewModel,e.overrideContext):(s=Object(N.kb)(this.viewModel),s.__parentOverrideContext=e.overrideContext),this.view.bind(this.viewModel,s)):a&&(s=e.overrideContext,void 0!==e.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&(s=Object.assign({},e.overrideContext),s.parentOverrideContext=e.overrideContext.__parentOverrideContext),this.viewModel.bind(e.bindingContext,s))}unbind(){if(this.isBound){let e,t,i=this.boundProperties;for(this.isBound=!1,this.scope=null,null!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),e=0,t=i.length;e<t;++e)i[e].binding.unbind()}}attached(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())}detached(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())}},De=Object(N.Jb)()(y=class{constructor(e,t,i,n,r){this.taskQueue=e,this.obj=t,this.propertyName=i,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=n,this.currentValue=this.oldValue=r}getValue(){return this.currentValue}setValue(e){let t=this.currentValue;Object.is(e,t)||(this.oldValue=t,this.currentValue=e,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))}call(){let e=this.oldValue,t=this.currentValue;this.notqueued=!0,Object.is(t,e)||(this.selfSubscriber&&this.selfSubscriber(t,e),this.callSubscribers(t,e),this.oldValue=t)}subscribe(e,t){this.addSubscriber(e,t)}unsubscribe(e,t){this.removeSubscriber(e,t)}})||y;function Le(e,t){let i=e.__observers__;if(void 0===i){let t=Object.getPrototypeOf(e).constructor,n=S.d.get(S.d.resource,t);n.isInitialized||n.initialize(T.b.instance||new T.b,e.constructor),i=n.observerLocator.getOrCreateObserversLookup(e),n._ensurePropertiesDefined(e,i)}return i[t]}let He=class{constructor(e){"string"==typeof e?this.name=e:Object.assign(this,e),this.attribute=this.attribute||R(this.name);let t=this.defaultBindingMode;null==t?this.defaultBindingMode=N.cb.oneWay:"string"==typeof t&&(this.defaultBindingMode=N.cb[t]||N.cb.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}registerWith(e,t,i){if(t.properties.push(this),t.attributes[this.attribute]=this,this.owner=t,i)return this.descriptor=i,this._configureDescriptor(i)}_configureDescriptor(e){let t=this.name;return e.configurable=!0,e.enumerable=!0,"initializer"in e&&(this.defaultValue=e.initializer,delete e.initializer,delete e.writable),"value"in e&&(this.defaultValue=e.value,delete e.value,delete e.writable),e.get=function(){return Le(this,t).getValue()},e.set=function(e){Le(this,t).setValue(e)},e.get.getObserver=function(e){return Le(e,t)},e}defineOn(e,t){let i,n=this.name;null===this.changeHandler&&(i=n+"Changed",i in e.prototype&&(this.changeHandler=i)),null===this.descriptor&&Object.defineProperty(e.prototype,n,this._configureDescriptor(t,{}))}createObserver(e){let t,i=null,n=this.defaultValue,r=this.changeHandler,o=this.name;if(!this.hasOptions){if(r in e)i="propertyChanged"in e?(t,i)=>{e[r](t,i),e.propertyChanged(o,t,i)}:(t,i)=>e[r](t,i);else if("propertyChanged"in e)i=(t,i)=>e.propertyChanged(o,t,i);else if(null!==r)throw new Error(`Change handler ${r} was specified but not declared on the class.`);return void 0!==n&&(t="function"==typeof n?n.call(e):n),new De(this.owner.taskQueue,e,this.name,i,t)}}_initialize(e,t,i,n,r){let o,s,a,l=this.defaultValue;if(this.isDynamic)for(let o in i)this._createDynamicProperty(e,t,n,o,i[o],r);else this.hasOptions||(s=t[this.name],null!==i&&(o=s.selfSubscriber,a=i[this.attribute],n&&(s.selfSubscriber=null),"string"==typeof a?(e[this.name]=a,s.call()):a?r.push({observer:s,binding:a.createBinding(e)}):void 0!==l&&s.call(),s.selfSubscriber=o),s.publishing=!0)}_createDynamicProperty(e,t,i,n,r,o){let s,a,l=n+"Changed",h=null;l in e?h="propertyChanged"in e?(t,i)=>{e[l](t,i),e.propertyChanged(n,t,i)}:(t,i)=>e[l](t,i):"propertyChanged"in e&&(h=(t,i)=>e.propertyChanged(n,t,i)),s=t[n]=new De(this.owner.taskQueue,e,n,h),Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:s.getValue.bind(s),set:s.setValue.bind(s)}),i&&(s.selfSubscriber=null),"string"==typeof r?(e[n]=r,s.call()):r&&(a={observer:s,binding:r.createBinding(e)},o.push(a)),s.publishing=!0,s.selfSubscriber=h}},ze=0;function Ue(){return!0}function qe(){}let Ke=class e{constructor(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=qe,this.processContent=Ue,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}static convention(t,i){let n;return t.endsWith("CustomAttribute")&&(n=i||new e,n.attributeName=R(t.substring(0,t.length-15))),t.endsWith("CustomElement")&&(n=i||new e,n.elementName=R(t.substring(0,t.length-13))),n}addChildBinding(e){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(e)}initialize(e,t){let i,n,r,o=t.prototype,s=this.properties,a=this.attributeName,l=this.attributeDefaultBindingMode;if(!this.isInitialized)if(this.isInitialized=!0,t.__providerId__=++ze,this.observerLocator=e.get(N.N),this.taskQueue=e.get(j.a),this.target=t,this.usesShadowDOM=this.targetShadowDOM&&A.FEATURE.shadowDOM,this.handlesCreated="created"in o,this.handlesBind="bind"in o,this.handlesUnbind="unbind"in o,this.handlesAttached="attached"in o,this.handlesDetached="detached"in o,this.htmlName=this.elementName||this.attributeName,null!==a)if(0===s.length&&new He({name:"value",changeHandler:"valueChanged"in o?"valueChanged":null,attribute:a,defaultBindingMode:l}).registerWith(t,this),r=s[0],1===s.length&&"value"===r.name)r.isDynamic=r.hasOptions=this.hasDynamicOptions,r.defineOn(t,this);else{for(i=0,n=s.length;i<n;++i)if(s[i].defineOn(t,this),s[i].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=s[i]}r=new He({name:"value",changeHandler:"valueChanged"in o?"valueChanged":null,attribute:a,defaultBindingMode:l}),r.hasOptions=!0,r.registerWith(t,this)}else{for(i=0,n=s.length;i<n;++i)s[i].defineOn(t,this);this._copyInheritedProperties(e,t)}}register(e,t){null!==this.attributeName&&(e.registerAttribute(t||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach((t=>{e.registerAttribute(t,this,this.attributeName)}))),null!==this.elementName&&e.registerElement(t||this.elementName,this)}load(e,t,i,n,r){let o;return null!==this.elementName?(n=e.get(ne).getViewStrategy(n||this.viewStrategy||t),o=new K(this.targetShadowDOM,!0),n.moduleId||(n.moduleId=S.a.get(t).moduleId),n.loadViewFactory(e.get(ke),o,i,t).then((e=>(r&&this.viewFactory||(this.viewFactory=e),e)))):Promise.resolve(this)}compile(e,t,i,n,r){if(this.liftsContent){if(!n.viewFactory){let o=A.DOM.createElement("template"),s=A.DOM.createDocumentFragment(),a=i.getAttribute("view-cache"),l=i.getAttribute("part");i.removeAttribute(n.originalAttrName),A.DOM.replaceNode(o,i,r),s.appendChild(i),n.viewFactory=e.compile(s,t),l&&(n.viewFactory.part=l,i.removeAttribute("part")),a&&(n.viewFactory.setCacheSize(a),i.removeAttribute("view-cache")),i=o}}else if(null!==this.elementName){let o={};if(this.processContent(e,t,i,n)&&i.hasChildNodes()){let s,a,l=i.firstChild,h=this.usesShadowDOM?null:A.DOM.createElement("au-content");for(;l;)s=l.nextSibling,"TEMPLATE"===l.tagName&&(a=l.getAttribute("replace-part"))?(o[a]=e.compile(l,t),A.DOM.removeNode(l,r),n.partReplacements=o):null!==h&&(3===l.nodeType&&D(l)?A.DOM.removeNode(l,r):h.appendChild(l)),l=s;null!==h&&h.hasChildNodes()&&i.appendChild(h),n.skipContentProcessing=!1}else n.skipContentProcessing=!0}else this.processContent(e,t,i,n)||(n.skipContentProcessing=!0);return i}create(e,t,i,n){let r,o=null;t=t||W.normal,i=i||null,n=n||null,null!==this.elementName&&i&&(this.usesShadowDOM?(r=i.attachShadow(this.shadowDOMOptions),e.registerInstance(A.DOM.boundary,r)):(r=i,this.targetShadowDOM&&e.registerInstance(A.DOM.boundary,r))),null!==i&&(i.au=o=i.au||{});let s,a=t.viewModel||e.get(this.target),l=new Re(this,t,a,e),h=this.childBindings;if(this.liftsContent)o.controller=l;else if(null!==this.elementName){if(s=t.viewFactory||this.viewFactory,e.viewModel=a,s&&(l.view=s.create(e,t,i)),null!==i){if(o.controller=l,l.view){if(!this.usesShadowDOM&&(1===i.childNodes.length||i.contentElement)){let e=i.childNodes[0]||i.contentElement;l.view.contentView={fragment:e},e.parentNode&&A.DOM.removeNode(e)}if(t.anchorIsContainer){if(null!==h)for(let e=0,t=h.length;e<t;++e)l.view.addBinding(h[e].create(i,a,l));l.view.appendNodesTo(r)}else l.view.insertNodesBefore(r)}else if(null!==h)for(let e=0,t=h.length;e<t;++e)n.push(h[e].create(i,a,l))}else if(l.view){if(l.view.controller=l,null!==h)for(let e=0,i=h.length;e<i;++e)l.view.addBinding(h[e].create(t.host,a,l))}else if(null!==h)for(let e=0,i=h.length;e<i;++e)n.push(h[e].create(t.host,a,l))}else if(null!==h)for(let e=0,t=h.length;e<t;++e)n.push(h[e].create(i,a,l));return null!==o&&(o[this.htmlName]=l),t.initiatedByBehavior&&s&&l.view.created(),l}_ensurePropertiesDefined(e,t){let i,n,r,o;if(!("__propertiesDefined__"in t))for(t.__propertiesDefined__=!0,i=this.properties,n=0,r=i.length;n<r;++n)o=i[n].createObserver(e),void 0!==o&&(t[o.propertyName]=o)}_copyInheritedProperties(e,t){let i,n=t;for(;;){let e=Object.getPrototypeOf(t.prototype);if(!(t=e&&e.constructor))return;if(i=S.d.getOwn(S.d.resource,t),i)break}i.initialize(e,t);for(let e=0,t=i.properties.length;e<t;++e){let t=i.properties[e];this.properties.some((e=>e.name===t.name))||new He(t).registerWith(n,this)}}};function We(e,t){return function(i,n,r){let o="string"==typeof n?i.constructor:i,s=S.d.getOrCreateOwn(S.d.resource,Ke,o);"string"==typeof e&&(e={selector:e,name:n}),r&&(r.writable=!0,r.configurable=!0),e.all=t,s.addChildBinding(new Qe(e))}}function $e(e){return We(e,!0)}function Xe(e){return We(e,!1)}let Qe=class{constructor(e){this.name=e.name,this.changeHandler=e.changeHandler||this.name+"Changed",this.selector=e.selector,this.all=e.all}create(e,t,i){return new Je(this.selector,e,this.name,t,i,this.changeHandler,this.all)}};const Ze=[];function Ge(e,t,i){let n=e.get(t);n||(n=[],e.set(t,n)),n.push(i)}function Ye(e,t){let i=t.binders,n=i.length,r=new Map;for(let t=0,o=e.length;t<o;++t){let o=e[t],s=o.addedNodes,a=o.removedNodes;for(let e=0,t=a.length;e<t;++e){let t=a[e];if(1===t.nodeType)for(let e=0;e<n;++e){let n=i[e];n.onRemove(t)&&Ge(r,n,o)}}for(let e=0,t=s.length;e<t;++e){let t=s[e];if(1===t.nodeType)for(let e=0;e<n;++e){let n=i[e];n.onAdd(t)&&Ge(r,n,o)}}}r.forEach(((e,t)=>{t.isBound&&null!==t.changeHandler&&t.viewModel[t.changeHandler](e)}))}let Je=class{constructor(e,t,i,n,r,o,s){this.selector=e,this.viewHost=t,this.property=i,this.viewModel=n,this.controller=r,this.changeHandler=o in n?o:null,this.usesShadowDOM=r.behavior.usesShadowDOM,this.all=s,!this.usesShadowDOM&&r.view&&r.view.contentView?this.contentView=r.view.contentView:this.contentView=null,this.source=null,this.isBound=!1}matches(e){if(e.matches(this.selector)){if(null===this.contentView)return!0;let t=this.contentView,i=e.auAssignedSlot;if(i&&i.projectFromAnchors){let e=i.projectFromAnchors;for(let i=0,n=e.length;i<n;++i)if(e[i].auOwnerView===t)return!0;return!1}return e.auOwnerView===t}return!1}bind(e){if(this.isBound){if(this.source===e)return;this.source=e}this.isBound=!0;let t=this.viewHost,i=this.viewModel,n=t.__childObserver__;if(!n){n=t.__childObserver__=A.DOM.createMutationObserver(Ye);let e={childList:!0,subtree:!this.usesShadowDOM};n.observe(t,e),n.binders=[]}if(n.binders.push(this),this.usesShadowDOM){let e=t.firstElementChild;if(this.all){let t=i[this.property];for(t?t.splice(0):t=i[this.property]=[];e;)this.matches(e)&&t.push(e.au&&e.au.controller?e.au.controller.viewModel:e),e=e.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](Ze)}else for(;e;){if(this.matches(e)){let t=e.au&&e.au.controller?e.au.controller.viewModel:e;this.viewModel[this.property]=t,null!==this.changeHandler&&this.viewModel[this.changeHandler](t);break}e=e.nextElementSibling}}}onRemove(e){if(this.matches(e)){let t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){let e=this.viewModel[this.property]||(this.viewModel[this.property]=[]),i=e.indexOf(t);return-1!==i&&e.splice(i,1),!0}this.viewModel[this.property]===t&&(this.viewModel[this.property]=null,this.isBound&&null!==this.changeHandler&&this.viewModel[this.changeHandler](t))}return!1}onAdd(e){if(this.matches(e)){let t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){let i=this.viewModel[this.property]||(this.viewModel[this.property]=[]);if("*"===this.selector)return i.push(t),!0;let n=0,r=e.previousElementSibling;for(;r;)this.matches(r)&&n++,r=r.previousElementSibling;return i.splice(n,0,t),!0}this.viewModel[this.property]=t,this.isBound&&null!==this.changeHandler&&this.viewModel[this.changeHandler](t)}return!1}unbind(){if(!this.isBound)return;this.isBound=!1,this.source=null;let e=this.viewHost.__childObserver__;if(e){let t=e.binders;if(t&&t.length){let i=t.indexOf(this);-1!==i&&t.splice(i,1),0===t.length&&(e.disconnect(),this.viewHost.__childObserver__=null)}this.usesShadowDOM&&(this.viewModel[this.property]=null)}}};function et(e,t){return Array.isArray(t)?e.removeMany(t,!0):e.remove(t,!0)}const tt={before:(e,t,i)=>void 0===t?i():i().then((()=>et(e,t))),with:(e,t,i)=>void 0===t?i():Promise.all([et(e,t),i()]),after:(e,t,i)=>Promise.resolve(e.removeAll(!0)).then(i)};function it(e){return e.skipActivation||"function"!=typeof e.viewModel.activate?Promise.resolve():e.viewModel.activate(e.model)||Promise.resolve()}let nt=Object(T.s)(ke,ne)(C=class{constructor(e,t){this.viewEngine=e,this.viewLocator=t}_swap(e,t){let i=tt[e.swapOrder]||tt.after,n=e.viewSlot.children.slice();return i(e.viewSlot,n,(()=>Promise.resolve(e.viewSlot.add(t)).then((()=>{e.currentController&&e.currentController.unbind()})))).then((()=>{e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done()}))}_createControllerAndSwap(e){return this.createController(e).then((t=>e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then((()=>(t.automate(e.overrideContext,e.owningView),this._swap(e,t.view)))).then((()=>t)):(t.automate(e.overrideContext,e.owningView),this._swap(e,t.view).then((()=>t)))))}createController(e){let t,i,n,r;return this.ensureViewModel(e).then(it).then((()=>{t=e.childContainer,i=e.viewModel,n=e.viewModelResource,r=n.metadata;let o=this.viewLocator.getViewStrategy(e.view||i);return e.viewResources&&o.makeRelativeTo(e.viewResources.viewUrl),r.load(t,n.value,null,o,!0)})).then((n=>r.create(t,W.dynamic(e.host,i,n))))}ensureViewModel(e){let t=e.childContainer=e.childContainer||e.container.createChild();if("string"==typeof e.viewModel)return e.viewModel=e.viewResources?e.viewResources.relativeToView(e.viewModel):e.viewModel,this.viewEngine.importViewModelResource(e.viewModel).then((i=>(t.autoRegister(i.value),e.host&&t.registerInstance(A.DOM.Element,e.host),e.viewModel=t.viewModel=t.get(i.value),e.viewModelResource=i,e)));let i=e.viewModel.constructor,n="function"==typeof e.viewModel;n&&(i=e.viewModel,t.autoRegister(i));let r=S.d.getOrCreateOwn(S.d.resource,Ke,i);return r.elementName=r.elementName||"dynamic-element",r.initialize(n?t:e.container||t,i),e.viewModelResource={metadata:r,value:i},e.host&&t.registerInstance(A.DOM.Element,e.host),t.viewModel=e.viewModel=n?t.get(i):e.viewModel,Promise.resolve(e)}compose(e){e.childContainer=e.childContainer||e.container.createChild(),e.view=this.viewLocator.getViewStrategy(e.view);let t=e.childContainer.get(P),i=t.tryCapture();return i?e.compositionTransactionOwnershipToken=i:e.compositionTransactionNotifier=t.enlist(),e.viewModel?this._createControllerAndSwap(e):e.view?(e.viewResources&&e.view.makeRelativeTo(e.viewResources.viewUrl),e.view.loadViewFactory(this.viewEngine,new K).then((t=>{let i=t.create(e.childContainer);return i.bind(e.bindingContext,e.overrideContext),e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then((()=>this._swap(e,i))).then((()=>i)):this._swap(e,i).then((()=>i))}))):e.viewSlot?(e.viewSlot.removeAll(),e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done(),Promise.resolve(null)):Promise.resolve(null)}})||C,rt=class{initialize(e,t){}register(e,t){}load(e,t){let i=new t;e.get(N.y).registerElementConfig(i)}};function ot(e){return function(t){"string"==typeof e||Object.getPrototypeOf(e)===Object.prototype?t.$resource=e:S.d.define(S.d.resource,e,t)}}function st(e){return function(t){if(e instanceof Ke)S.d.define(S.d.resource,e,t);else{let i=S.d.getOrCreateOwn(S.d.resource,Ke,t);Object.assign(i,e)}}}function at(e){return function(t){S.d.getOrCreateOwn(S.d.resource,Ke,t).elementName=de(e,"custom element")}}function lt(e,t,i){return function(n){let r=S.d.getOrCreateOwn(S.d.resource,Ke,n);r.attributeName=de(e,"custom attribute"),r.attributeDefaultBindingMode=t,r.aliases=i}}function ht(e){let t=function(e){S.d.getOrCreateOwn(S.d.resource,Ke,e).liftsContent=!0};return e?t(e):t}function ct(e,t,i){let n=function(t,i,n){let r,o=i?t.constructor:t,s=S.d.getOrCreateOwn(S.d.resource,Ke,o);return i&&((e=e||{}).name=i),r=new He(e),r.registerWith(o,s,n)};if(!e)return n;if(t){let r=e;return e=null,n(r,t,i)}return n}function ut(e){let t=function(e){S.d.getOrCreateOwn(S.d.resource,Ke,e).hasDynamicOptions=!0};return e?t(e):t}const dt={mode:"open"};function pt(e){let t="function"!=typeof e&&e?e:dt,i=function(e){let i=S.d.getOrCreateOwn(S.d.resource,Ke,e);i.targetShadowDOM=!0,i.shadowDOMOptions=t};return"function"==typeof e?i(e):i}function mt(e){return function(t){S.d.getOrCreateOwn(S.d.resource,Ke,t).processAttributes=function(t,i,n,r,o){try{e(t,i,n,r,o)}catch(e){O.getLogger("templating").error(e)}}}}function ft(){return!1}function gt(e){return function(t){S.d.getOrCreateOwn(S.d.resource,Ke,t).processContent=e?function(t,i,n,r){try{return e(t,i,n,r)}catch(e){return O.getLogger("templating").error(e),!1}}:ft}}function wt(e){let t=function(e){S.d.getOrCreateOwn(S.d.resource,Ke,e).containerless=!0};return e?t(e):t}function vt(e){return function(t){S.d.define(ne.viewStrategyMetadataKey,e,t)}}function bt(e){return vt(new G(e))}function yt(e,t,i){return vt(new te(e,t,i))}function Ct(e,t){let i,n;"function"==typeof e?i=e:(n=e,i=void 0);let r=function(e){S.d.define(ne.viewStrategyMetadataKey,new J(n,t),e)};return i?r(i):r}function Vt(e){return function(t){t.$view=e}}function Ot(e){let t=function(e){S.d.define(S.d.resource,new rt,e)};return e?t(e):t}function St(...e){return function(t){S.d.define(ke.viewModelRequireMetadataKey,e,t)}}let At=Object(T.s)(T.b,Ee,xe,nt)(V=class{constructor(e,t,i,n){this._container=e,this._moduleAnalyzer=t,this._viewCompiler=i,this._compositionEngine=n,e.registerInstance(B,B.instance=new B)}configureAnimator(e){this._container.unregister(B),this._container.registerInstance(B,B.instance=e)}compose(e){return this._compositionEngine.compose(e)}enhance(e){e instanceof A.DOM.Element&&(e={element:e});let t={letExpressions:[]},i=e.resources||this._container.get(me);this._viewCompiler._compileNode(e.element,i,t,e.element.parentNode,"root",!0);let n=new Me(e.element,t,i),r=e.container||this._container.createChild(),o=n.create(r,W.enhance());return o.bind(e.bindingContext||{},e.overrideContext),o.firstChild=o.lastChild=o.fragment,o.fragment=A.DOM.createDocumentFragment(),o.attached(),o}})||V},"aurelia-testing":function(e,t,i){"use strict";i.r(t),i.d(t,"CompileSpy",(function(){return n.CompileSpy})),i.d(t,"ViewSpy",(function(){return r.ViewSpy})),i.d(t,"StageComponent",(function(){return h})),i.d(t,"ComponentTester",(function(){return c})),i.d(t,"waitFor",(function(){return s})),i.d(t,"waitForDocumentElement",(function(){return a})),i.d(t,"waitForDocumentElements",(function(){return l})),i.d(t,"configure",(function(){return u}));var n=i("aurelia-testing/compile-spy"),r=i("aurelia-testing/view-spy"),o=i("SkM8");function s(e,t={present:!0,interval:50,timeout:5e3}){let i=!1;return t=Object.assign({present:!0,interval:50,timeout:5e3},t),Promise.race([new Promise(((e,n)=>setTimeout((()=>{i=!0,n(new Error(t.present?"Element not found":"Element not removed"))}),t.timeout))),function n(){const r=e(),o=null!==r&&(!(r instanceof NodeList)&&!r.jquery||r.length>0);return!t.present==!o||i?Promise.resolve(r):new Promise((e=>setTimeout(e,t.interval))).then(n)}()])}function a(e,t){return s((()=>document.querySelector(e)),t)}function l(e,t){return s((()=>document.querySelectorAll(e)),t)}class h{static withResources(e=[]){return(new c).withResources(e)}}class c{constructor(){this.resources=[]}configure(e){return e.use.standardConfiguration()}bootstrap(e){this.configure=e}withResources(e){return this.resources=e,this}inView(e){return this.html=e,this}boundTo(e){return this.bindingContext=e,this}manuallyHandleLifecycle(){return this._prepareLifecycle(),this}create(e){return e((e=>Promise.resolve(this.configure(e)).then((()=>(this.resources&&e.use.globalResources(this.resources),e.start().then((()=>(this.host=document.createElement("div"),this.host.innerHTML=this.html,document.body.appendChild(this.host),e.enhance(this.bindingContext,this.host).then((()=>(this.rootView=e.root,this.element=this.host.firstElementChild,e.root.controllers.length&&(this.viewModel=e.root.controllers[0].viewModel),new Promise((e=>setTimeout((()=>e()),0))))))))))))))}dispose(){if(void 0===this.host||void 0===this.rootView)throw new Error("Cannot call ComponentTester.dispose() before ComponentTester.create()");return this.rootView.detached(),this.rootView.unbind(),this.host.parentNode.removeChild(this.host)}_prepareLifecycle(){const e=o.View.prototype.bind;o.View.prototype.bind=()=>{},this.bind=t=>new Promise((i=>{o.View.prototype.bind=e,void 0!==t&&(this.bindingContext=t),this.rootView.bind(this.bindingContext),setTimeout((()=>i()),0)}));const t=o.View.prototype.attached;o.View.prototype.attached=()=>{},this.attached=()=>new Promise((e=>{o.View.prototype.attached=t,this.rootView.attached(),setTimeout((()=>e()),0)})),this.detached=()=>new Promise((e=>{this.rootView.detached(),setTimeout((()=>e()),0)})),this.unbind=()=>new Promise((e=>{this.rootView.unbind(),setTimeout((()=>e()),0)}))}waitForElement(e,t){return s((()=>this.element.querySelector(e)),t)}waitForElements(e,t){return s((()=>this.element.querySelectorAll(e)),t)}}function u(e){e.globalResources(["./compile-spy","./view-spy"])}},"aurelia-testing/compile-spy":function(e,t,i){"use strict";i.r(t),i.d(t,"CompileSpy",(function(){return l}));var n=i("SkM8"),r=i("OeXm"),o=i("KKpb"),s=i("xIXs"),a=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let l=class{constructor(e,t){Object(o.getLogger)("compile-spy").info(e.toString(),t)}};l=a([Object(n.customAttribute)("compile-spy"),Object(r.s)(s.DOM.Element,n.TargetInstruction)],l)},"aurelia-testing/view-spy":function(e,t,i){"use strict";i.r(t),i.d(t,"ViewSpy",(function(){return s}));var n=i("SkM8"),r=i("KKpb"),o=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let s=class{constructor(){this.logger=Object(r.getLogger)("view-spy")}_log(e,t){this.value||"created"!==e?this.value&&-1!==this.value.indexOf(e)&&this.logger.info(e,this.view,t):this.logger.info(e,this.view)}created(e){this.view=e,this._log("created")}bind(e){this._log("bind",e)}attached(){this._log("attached")}detached(){this._log("detached")}unbind(){this._log("unbind")}};s=o([Object(n.customAttribute)("view-spy")],s)}}]);
//# sourceMappingURL=vendors~2a42e354.23e867230767ee4f5952.bundle.map