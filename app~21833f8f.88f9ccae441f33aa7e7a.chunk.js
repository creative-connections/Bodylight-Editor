(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{IsLn:function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return v}));var i=function(){function e(){}var t=e.prototype;return t.loadFile=function(e){if(window.editorapi)return window.editorapi.bs.loadDocContent(e.name).then((function(e){return e})).catch((function(e){return e}))},t.activate=function(e,t){e.active=!0},t.deactivate=function(e){e.active=!1},t.renderlink=function(e){window.editorapi&&(window.editorapi.editor.insert("["+e.name.split(".").slice(0,-1).join(".")+"]("+e.name+")\n"),window.editorapi.editor.focus())},t.saveChanges=function(e){},e}();function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var o=i.prototype;return o.loadFile=function(t){return e.prototype.loadFile.call(this,t).then((function(e){return e?window.editorapi.editor.setValue(e):window.editorapi.editor.setValue(""),e}))},o.activate=function(t,n){if(e.prototype.activate.call(this,t,n),n){var i=new Blob([n],{type:"text/plain"});window.editorapi.bs.saveBlobContent(t.name,i).then((function(e){})).catch((function(e){})),window.editorapi.editor.setValue(n,1),window.editorapi.editor.focus()}else window.editorapi.bs.loadDocContent(t.name).then((function(e){if(e){if("string"==typeof e&&window.editorapi.editor.setValue(e,1),e instanceof Blob){var t=new FileReader;t.addEventListener("loadend",(function(){window.editorapi.editor.setValue(t.result,1)})),t.readAsText(e)}}else window.editorapi.editor.setValue("");window.editorapi.editor.focus()})).catch((function(e){return console.log("project open file error",e)}))},o.deactivate=function(t){e.prototype.deactivate.call(this,t),this.saveChanges(t)},o.saveChanges=function(e){window.editorapi.bs.saveDocContent(e.name,window.editorapi.editor.getValue())},o.renderlink=function(e){window.editorapi&&(window.editorapi.editor.insert("["+e.name.split(".").slice(0,-1).join(".")+"](#"+e.name+")\n"),window.editorapi.editor.focus())},i}(i);function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var a=i.prototype;return a.activate=function(t,n){e.prototype.activate.call(this,t,n),window.editorapi.askFile=!0,window.editorapi.askFileRef=this,window.editorapi.askFileItems=[{title:"File Type",value:t.type.name,options:[w.MODELFILE,w.ADOBEANIMATE,w.OTHERJS]}]},a.deactivate=function(t){e.prototype.deactivate.call(this,t)},i}(i);function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var a=i.prototype;return a.activate=function(t,n){e.prototype.activate.call(this,t,n),window.editorapi.askFile=!0,window.editorapi.askFileRef=t,window.editorapi.askFileItems=[{title:"File Type",value:t.type.name,options:[w.MODELFILE,w.ADOBEANIMATE,w.OTHERJS]}];var i=t.name.split(".").slice(0,-1).join("."),a='<animate-adobe src="'+t.name+'" width="800" height="600" name="'+i+'" fromid="idfmi"></animate-adobe>';window.editorapi.sendContentUpdate(a),window.editorapi.previewmode=!0,window.ani&&setTimeout((function(){window.ani.handleResize()}),500)},a.deactivate=function(t){e.prototype.deactivate.call(this,t),window.editorapi.previewmode=!1,window.ani&&setTimeout((function(){window.ani.handleResize()}),500)},i}(i);function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var a=i.prototype;return a.activate=function(t,n){e.prototype.activate.call(this,t,n)},a.deactivate=function(t){e.prototype.deactivate.call(this,t)},i}(i);function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){var t,n;function i(){return e.apply(this,arguments)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),i.prototype.deactivate=function(e){e.active=!1},i}(o);function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a=i.prototype;return a.activate=function(t,n){e.prototype.activate.call(this,t,n),window.editorapi.askFile=!0,window.editorapi.askFileRef=t,window.editorapi.askFileItems=[{title:"File Type",value:t.type.name,options:[w.IMAGE]}];var i=t.name.split(".").slice(0,-1).join("."),a="# Preview of "+t.name+"\n\n!["+i+"]("+t.name+")";window.editorapi.renderchange(window.editorapi,a),window.editorapi.previewmode=!0},a.deactivate=function(t){e.prototype.deactivate.call(this,t),window.editorapi.previewmode=!1},a.renderlink=function(e){window.editorapi&&(window.editorapi.editor.insert("!["+e.name.split(".").slice(0,-1).join(".")+"]("+e.name+")\n"),window.editorapi.editor.focus())},i}(i),w={MDFILE:{name:"MDFILE",value:0,title:"Web simulator (markdown)",faclass:"fa fa-file-text"},MODELFILE:{name:"MODELFILE",value:1,title:"Model FMU/JS(js)",faclass:"fa fa-file-code-o"},ADOBEANIMATE:{name:"ADOBEANIMATE",value:2,title:"Adobe Animate CreateJS(js)",faclass:"fa fa-file-image-o"},ANIMATEDGIF:{name:"ANIMATEDGIF",value:3,title:"Animated GIF(gif)",faclass:"fa fa-file-movie-o"},IMAGE:{name:"IMAGE",value:4,title:"Common image(png,jpg)",faclass:"fa fa-file-image-o"},OTHERJS:{name:"OTHERJS",value:5,title:"Other Javascript(js) ",faclass:"fa fa-file-o"},DESCRIPTIONFILE:{name:"DESCRIPTIONFILE",value:6,title:"description of FMU file(xml)",faclass:"fa fa-file-excel-o"}},b=new Map;b.set("MDFILE",new o),b.set("MODELFILE",new s),b.set("ADOBEANIMATE",new c),b.set("ANIMATEDGIF",new m),b.set("IMAGE",new m),b.set("OTHERJS",new u),b.set("DESCRIPTIONFILE",new f);w.MDFILE,w.MODELFILE,w.ADOBEANIMATE,w.ANIMATEDGIF;var g='# Introduction\n\nMarkdown with Bodylight Components v.2\n\nYou may use markdown to tag `**bold** or __italic__ ` so it will be rendered as **bold** or __italic__ \n\n## Sections\nsections can be added using one or multipla hash symbols `#`. \n## Mathematics\nkatex is supported thus writing LATEX like syntax between `$` symbol will render the math.\n\nE.g. Dirichlet integral `$\\int_{0}^\\infty\\frac{\\sin(x)}{x}dx = \\frac{\\pi}{2}$` is rendered:\n\n$\\int_{0}^\\infty\\frac{\\sin(x)}{x}dx = \\frac{\\pi}{2}$\n\n## Bodylight components\n\nBodylight web components can be rendered directly, use full xml-tags with closing tags (not self-closing).\n<bdl-range min="10" max="20" step="2" default="15"></bdl-range>\n\n## Animation\n\nAdobe Animate can be exported into CreateJS components, these can be imported and used with `<bdl-animate-adobe></bdl-animate-adobe>` component.\n\n## FMI \n\nModelica models exported to FMU and compiled by Bodylight FMU Compiler can be imported and used with `<bdl-fmi></bdl-fmi>` component.\n\n## Charts\nPlotly, Chartjs and Dygraph libraries are supported use `<bdl-chartjs-time></bdl-chartjs-time>` or `<bdl-plotly></bdl-plotly>` or `<bdl-dygraph></bdl-dygraph>` components.\n\n## Animated GIF\nAnimated GIF can be imported, component `bdl-animate-gif` can handle animation and controls animation per each frame.\n';function v(e){if("string"!=typeof e)throw new TypeError("parameter ‘unicodeString’ is not a string");return e.replace(/[\u0080-\u07ff]/g,(function(e){var t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)})).replace(/[\u0800-\uffff]/g,(function(e){var t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|63&t)}))}},SsNQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("oAJy"),a=n.n(i),o=n("IsLn");function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){l(o,i,a,r,s,"next",e)}function s(e){l(o,i,a,r,s,"throw",e)}r(void 0)}))}}var d="BodylightEditor.Filelist",u="BodylightEditor.Content",p="BodylightEditor.FMIEntries",f="BodylightEditor.FMISrcs",h="BodylightEditor.Name",m="BodylightEditor.ExportName",w="Bodylight.GithubSync",b=function(){function e(){}var t=e.prototype;return t.getFileList=function(){return a.a.getItem(d).then((function(e){return e})).catch((function(e){return console.error("BodylightStorage getFileList:",e),e}))},t.setFileList=function(e){var t=e.map((function(e){return{name:e.name,type:e.type}}));return a.a.setItem(d,t).then((function(e){return e})).catch((function(e){console.error("BodylightStorage setFilelist error:",e)}))},t.saveDocContent=function(e,t){return a.a.setItem(u+"."+e,t)},t.loadDocContent=function(e){return a.a.getItem(u+"."+e)},t.loadDocContentStr=function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getItem(u+"."+t);case 2:if("string"!=typeof(n=e.sent)){e.next=5;break}return e.abrupt("return",Object(o.d)(n));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.loadBlobContent=function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getItem(u+"."+t);case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,t){if("blob"==typeof n){var i=new FileReader;i.onloadend=function(){e(i.result)},i.readAsArrayBuffer(blob)}else t()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.readBlobAsync=function(e){return new Promise((function(t,n){var i=new FileReader;i.onload=function(){t(i.result)},i.onerror=n,i.readAsDataURL(e)}))},t.loadBlobContentBase64=function(){var e=c(regeneratorRuntime.mark((function e(t){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getItem(u+"."+t);case 2:if(!((n=e.sent)instanceof Blob||n instanceof File)){e.next=9;break}return e.next=6,this.readBlobAsync(n);case 6:return i=e.sent,o=i.substr(i.indexOf(",")+1),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.loadDocUrl=function(){var e=c(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getItem(u+"."+t);case 2:if(!((n=e.sent)instanceof Blob)){e.next=7;break}return e.next=6,URL.createObjectURL(n);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.renameDoc=function(e,t){var n=this;a.a.getItem(u+"."+e).then((function(i){n.saveDocContent(t,i).then((function(t){a.a.removeItem(u+"."+e)}))}))},t.saveBlobContent=function(e,t){return a.a.setItem(u+"."+e,t)},t.deleteDoc=function(e){return a.a.removeItem(u+"."+e)},t.clearStorage=function(){var e=c(regeneratorRuntime.mark((function e(){var t,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.keys();case 2:t=e.sent,n=r(t);case 4:if((i=n()).done){e.next=11;break}if(!(o=i.value).startsWith("BodylightEditor")){e.next=9;break}return e.next=9,a.a.removeItem(o);case 9:e.next=4;break;case 11:return e.abrupt("return",Promise.resolve(1));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getBlob=function(e){return a.a.getItem(u+"."+e)},t.setFmiListEntries=function(e){return a.a.setItem(p,e)},t.setFmiListSrcs=function(e){return a.a.setItem(f,e)},t.getProjectName=function(){return a.a.getItem(h).then((function(e){return e})).catch((function(e){return"project.zip"}))},t.getExportProjectName=function(){return a.a.getItem(m).then((function(e){return e})).catch((function(e){return"projectexport.zip"}))},t.setProjectName=function(e){return a.a.setItem(h,e)},t.setExportProjectName=function(e){return a.a.setItem(m,e)},t.storeghparams=function(e){var t=JSON.stringify(e);return a.a.setItem(w,t)},t.restoreghparams=function(){return a.a.getItem(w).then((function(e){return JSON.parse(e)}))},e}()},"components/project":function(e,t,n){"use strict";n.r(t),n.d(t,"Project",(function(){return b}));var i,a=n("6Y9Y"),o=n("aurelia-event-aggregator"),r=n("aurelia-framework"),s=n("xOOu"),l=n.n(s),c=n("IsLn"),d=n("xanf"),u=function(){function e(){}return e.createBodylightFile=function(e,t,n,i){var a;return a=e.endsWith(".js")?n?c.b.ADOBEANIMATE:i?c.b.OTHERJS:c.b.MODELFILE:e.endsWith(".md")?c.b.MDFILE:e.endsWith(".xml")||e.endsWith(".html")?c.b.DESCRIPTIONFILE:e.endsWith(".gif")?c.b.ANIMATEDGIF:e.endsWith(".png")||e.endsWith(".jpg")?c.b.IMAGE:c.b.OTHERJS,new d.a(e,a,t)},e}(),p=n("Cys2");function f(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){f(o,i,a,r,s,"next",e)}function s(e){f(o,i,a,r,s,"throw",e)}r(void 0)}))}}function m(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var b=Object(r.inject)(a.a,o.EventAggregator,p.a)(i=function(){function e(e,t,n){var i=this;this.showButtons=!1,this.showgithub=!1,this.uploaddialog=!1,this.currentfile=null,this.askFile=!1,this.firstmdfile=!1,this.showdoc=!0,this.showmodel=!0,this.showadobe=!0,this.showimg=!0,this.showother=!0,this.api=e,this.ea=t,this.handleContentUpdate=function(e){i.saveChanges()},this.gs=n}var t=e.prototype;return t.attached=function(){var e=this;this.STATUS=p.b,this.api.bs.getFileList().then((function(t){if(t){e.files=[],e.api.projectfiles=e.files;for(var n,i=m(t);!(n=i()).done;){var a=n.value,o=new d.a(a.name,a.type);e.files.push(o),e.firstmdfile||a.type.value!==c.b.MDFILE.value?a.type.value===c.b.MODELFILE.value||(a.type.value,c.b.ADOBEANIMATE.value):(e.firstmdfile=!0,e.open(o))}e.updateadobeentries(),e.api.getFmiEntries(),e.updatelf()}else e.files=[],e.api.projectfiles=e.files,e.api.getFmiEntries(),e.updatelf()})).catch((function(t){e.files=[],e.api.projectfiles=e.files,e.api.getFmiEntries()})),this.ea.subscribe("file-dialog",(function(t){e.currentfile.type=c.b[t[0].value]})),document.getElementById("editorref").addEventListener("contentupdate",this.handleContentUpdate),this.api.initProjectName()},t.detached=function(){var e=document.getElementById("editorref");e&&e.removeEventListener("contentupdate",this.handleContentUpdate)},t.updatelf=function(){this.api.bs.setFileList(this.files),this.updatefiletypes(),this.updateadobeentries()},t.updatefiletypes=function(){this.mdfiles=this.files.filter((function(e){return e.type.value===c.b.MDFILE.value})),this.modelfiles=this.files.filter((function(e){return e.type.value===c.b.MODELFILE.value||e.type.value===c.b.DESCRIPTIONFILE.value})),this.adobefiles=this.files.filter((function(e){return e.type.value===c.b.ADOBEANIMATE.value})),this.imgfiles=this.files.filter((function(e){return e.type.value===c.b.IMAGE.value||e.type.value===c.b.ANIMATEDGIF.value})),this.otherfiles=this.files.filter((function(e){return e.type.value===c.b.OTHERJS.value}))},t.updateadobeentries=function(){this.api.adobeentries=this.files.filter((function(e){return e.type.value===c.b.ADOBEANIMATE.value})),this.api.adobeentries},t.open=function(e){this.api.askFile=!1,this.currentfile===e&&this.currentfile.type.value===c.b.MDFILE.value||(this.currentfile&&this.currentfile.deactivate(this.strategymap),this.currentfile=e,this.currentfile.activate())},t.addlink=function(e){this.api.askFile=!1,e.renderlink()},t.delete=function(e){var t=this;this.api.askFile=!1,this.api.bs.deleteDoc(e.name).then((function(n){var i=t.files.indexOf(e);t.files.splice(i,1),t.updatelf(),t.api.deleteFmiEntry(e)}))},t.create=function(){this.api.askFile=!1;var e=prompt("Web simulator document file name (*.md):","index.md");if(e){e.endsWith(".md")||(e=e.concat(".md"));for(var t=this.files.find((function(t){return t.name===e}));t;)e=this.add1toname(e),t=this.files.find((function(t){return t.name===e}));var n=c.a,i=new d.a(e,c.b.MDFILE);this.files.push(i),this.updatelf(),this.currentfile&&(this.currentfile.api||(this.currentfile.api=this.api),this.currentfile.deactivate()),this.currentfile=i,this.currentfile.api||(this.currentfile.api=this.api),this.currentfile.activate(n)}},t.saveChanges=function(){this.currentfile&&this.currentfile.saveChanges()},t.add1toname=function(e){var t=e.split(".",2);if(/[0-8]$/g.test(t[0])){var n=t[0].length,i=parseInt(t[0][n-1],10)+1;return t[0].substr(0,n-1)+i+"."+t[1]}return/9$/g.test(t[0])?t[0].substr(0,t[0].length-1)+"10."+t[1]:t[0]+"1."+t[1]},t.toggleMenu=function(){this.showButtons=!this.showButtons},t.upload=function(){this.uploaddialog=!this.uploaddialog},t.handleFileLoad=function(e){},t.drag=function(e){this.isDragging=!0,e.preventDefault()},t.drop=function(e){this.isDragging=!1,e.preventDefault(),this.dragNdrop(e)},t.dragNdrop=function(e){(new FileReader).onload=this.handleFileLoad;var t=e.target.files||e.dataTransfer.files,n=t[0].name;if(n.endsWith(".zip"))this.extractZipFile(t);else{var i=u.createBodylightFile(n,t[0],this.api,!0,!1);this.files.push(i),this.updatelf(),this.uploaddialog=!1}},t.extractZipFile=function(e){var t=this;l.a.loadAsync(e[0]).then((function(e){t.api.newFmiEntry(),e.forEach((function(e,n){var i=n.name;n.async("blob").then((function(e){var n=new d.a(i,i.endsWith(".xml")?c.b.DESCRIPTIONFILE:c.b.MODELFILE,e);i.endsWith(".xml")?t.api.setFmiEntryDescription(e):t.api.setFmiEntrySrc(i),t.files.push(n),t.updatelf(),t.uploaddialog=!1}))}))}))},t.extractProjectZipFile=function(e){var t=this;l.a.loadAsync(e[0]).then((function(e){e.forEach((function(e,n){var i=n.name;"bodylight-project.json"===i?n.async("text").then((function(e){t.files=[];for(var n,i=JSON.parse(e),a=m(i.files);!(n=a()).done;){var o=n.value;t.files.push(new d.a(o.name,o.type))}t.api.projectfiles=t.files,t.updatelf(),t.api.fmientries=i.fmientries,t.api.fmientriessrc=i.fmientriessrc,t.api.filename=i.projectname,t.api.exportfilename=i.exportprojectname})):n.async("blob").then((function(e){new d.a(i,i.endsWith(".xml")?c.b.DESCRIPTIONFILE:c.b.MODELFILE,e)}))}))}))},t.newProject=function(){var e=this;this.showButtons=!1,confirm("Create new empty project?")&&this.api.bs.clearStorage().then((function(){e.files=[],e.updatelf()})).catch((function(e){console.warn("newProject() localstorage clear error:",e)}))},t.save=function(){var e=prompt("Enter file name of web simulator project(*.zip):",this.api.filename);if(this.showButtons=!1,e){e.endsWith(".zip")||(e=e.concat(".zip")),this.api.setProjectName(e);var t=new l.a,n=this.files.map((function(e){e.api,e.bloburl;return function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["api","bloburl"])}));t.file("bodylight-project.json",JSON.stringify({files:n,fmientries:this.api.fmientries,fmientriessrc:this.api.fmientriessrc,projectname:this.api.filename,exportprojectname:this.api.exportfilename}));for(var i,a=m(this.files);!(i=a()).done;){var o=i.value;if(o.syncstatus!==p.b.notinlocal){var r=o.type.value===c.b.MDFILE.value?this.api.bs.loadDocContentStr(o.name):this.api.bs.loadDocContent(o.name);r?t.file(o.name,r,{binary:!0}):console.warn("blob for file is not stored,",o.name)}}t.generateAsync({type:"blob"}).then((function(t){saveAs(t,e)}))}},t.load=function(e){this.showButtons=!1,(new FileReader).onload=this.handleFileLoad;var t=e.target.files||e.dataTransfer.files;t[0].name.endsWith(".zip")&&this.extractProjectZipFile(t)},t.exportAsHtml=function(){var e=this,t=prompt("Enter file name for web simulator export to HTML(packed in *.zip):",this.api.exportfilename);if(this.showButtons=!1,t){var n=t;t.endsWith(".zip")||(n=t.concat(".zip")),this.api.setExportProjectName(n);var i='<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8">\n    <title>'+t+'</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <script src="bodylight.bundle.js" data-main="aurelia-bootstrapper"><\/script>\n</head>\n<body aurelia-app="webcomponents">\n    <bdl-markdown-book2 index="'+this.files.filter((function(e){return e.type.value===c.b.MDFILE.value}))[0].name+'" summary="summary.md">\n<img src="Bodylight_loading2_amber.gif" height="140" width="85" style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"/>\n    </bdl-markdown-book2>\n</body>\n</html>\n';fetch("bodylight.bundle.js").then((function(e){return e.blob()})).then((function(t){var a=new l.a;e.files.find((function(e){return" index.html"===e.name}))||a.file("index.html",i),a.file("bodylight.bundle.js",t);for(var o,r=m(e.files);!(o=r()).done;){var s=o.value;s.syncstatus&&s.syncstatus===p.b.notinlocal||a.file(s.name,s.type.value===c.b.MDFILE.value?e.api.bs.loadDocContentStr(s.name):e.api.bs.loadDocContent(s.name),{binary:!0})}if(!e.files.find((function(e){return"summary.md"===e.name}))){for(var u,f="",h=m(e.files.filter((function(e){return e.type.value===c.b.MDFILE.value})));!(u=h()).done;){var w=u.value;f+="  * ["+w.name+"](#"+w.name+")\n"}var b=new Blob([f],{type:"text/plain;charset=utf-8"}),g=new d.a("summary.md",c.b.MDFILE,b);e.files.push(g),a.file("summary.md",f),e.updatelf()}var v="Bodylight_loading2_amber.gif";fetch(v).then((function(e){return e.blob()})).then((function(e){a.file(v,e)})).catch((function(e){console.error("Project exportAsHtml() error:",e)})).finally((function(){a.generateAsync({type:"blob"}).then((function(e){saveAs(e,n)}))}))}))}},t.rename=function(e){var t=e.name,n=prompt("Rename file name:",e.name);n&&(e.type.value===c.b.MDFILE.value&&(n.endsWith(".md")||(n=n.concat(".md"))),e.name=n,this.updatelf(),this.api.bs.renameDoc(t,n))},t.syncGithub1=function(){var e=this;this.showgithub=!this.showgithub,this.showButtons=!1,this.api.bs.restoreghparams().then((function(t){e.githuborg=t.org,e.githubrepo=t.repo,e.githubpath=t.path,e.githubtoken=t.token}))},t.compareGithub=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gs.compareDir(this.files,this.githuborg,this.githubrepo,this.githubpath,this.api.bs);case 2:this.updatefiletypes(),this.api.bs.storeghparams({org:this.githuborg,repo:this.githubrepo,path:this.githubpath,token:this.githubtoken});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.pullFromGithub=function(){alert("not yet implemented")},t.pushToGithub=function(){alert("not yet implemented")},t.syncUploadGithub=function(e){var t=prompt("The file will be uploaded to GITHUB and replaced. Confirm commit message or cancel.","UPDATE "+e.name);t&&this.gs.uploadFile(e,this.githuborg,this.githubrepo,this.githubpath,this.githubtoken,this.api.bs,t)},t.syncDownloadGithub=function(){var e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("The file will be replaced by downloaded copy from GITHUB.")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.gs.downloadFile(t,this.githuborg,this.githubrepo,this.githubpath,this.api.bs);case 5:this.updatelf(),t.type.value===c.b.MDFILE.value&&this.open(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.showGithubHelp=function(){this.api.helpsrc="github.md"},t.toggledoc=function(){this.showdoc=!this.showdoc},t.togglemodel=function(){this.showmodel=!this.showmodel},t.toggleadobe=function(){this.showadobe=!this.showadobe},t.toggleimg=function(){this.showimg=!this.showimg},t.toggleother=function(){this.showother=!this.showother},e}())||i},"components/project.css":function(e,t,n){(t=n("JPst")(!1)).push([e.i,".project td:first-child {\n  max-width:20em;\n  overflow:hidden;\n  word-break: break-all;\n}\n",""]),e.exports=t},"components/project.html":function(e,t,n){e.exports='<template>\n<require from="./file-dialog"></require>\n<require from="./project.css"></require>\n\n  <div class="w3-margin w3-card-2 w3-tiny" style="height:100%;display:block" >\n\n      <div class="w3-left w3-margin-right">\n        <button class="w3-button w3-bar-item w3-theme-l4" click.delegate="toggleMenu()"><i class="fa fa-bars"></i> <b>Project\n          menu</b></button>\n        <div show.bind="showButtons" class="w3-card au-animate animate-fade-in animate-fade-out w3-bar-block"\n             style="position:absolute;margin-top:0px;margin-left:1em">\n          <button class="w3-button w3-bar-item w3-theme-l4" click.delegate="newProject()"><i class="fa fa-plus"></i> New\n            project\n          </button>\n          <button class="w3-button w3-bar-item w3-theme-l4" click.delegate="save()"><i class="fa fa-save"></i> Save\n            project as ZIP\n          </button>\n          <button class="w3-button w3-bar-item w3-theme-l4"><label for="loadfile"><i class="fa fa-upload"></i> Load\n            project from ZIP</label><input id="loadfile" style="visibility: hidden;width:10px" type="file"\n                                           change.trigger="load($event)"/></button>\n          <button class="w3-button w3-bar-item w3-theme-l4 w3-border-bottom" click.delegate="exportAsHtml()"><i\n            class="fa fa-download"></i> Export project as HTML\n          </button>\n          <button class="w3-button w3-bar-item w3-theme-l4" click.delegate="syncGithub1()"><i class="fa fa-refresh"></i>\n            Sync with GITHUB\n          </button>\n        </div>\n      </div>\n\n      <span>\n      name: <b>${api.filename} </b><br/>\n      export:<b>${api.exportfilename}</b>\n      </span>\n      <table show.bind="showgithub">\n        <tr>\n          <td>github user/org:</td>\n          <td><input type="text" value.bind="githuborg" placeholder="creative-connections"/></td>\n        </tr>\n        <tr>\n          <td>github repo:</td>\n          <td><input type="text" value.bind="githubrepo" placehorder="Bodylight-Scenarios"/></td>\n        </tr>\n        <tr>\n          <td>github path:</td>\n          <td><input type="text" value.bind="githubpath" placeholder="(fill directory or leave empty)"/></td>\n        </tr>\n        <tr>\n          <td>github token:</td>\n          <td><input type="password" value.bind="githubtoken" placeholder="(fill token with \'repos\' permission)"/></td>\n        </tr>\n        <tr>\n          <td colspan="2" align="center">\n            <button class="w3-button w3-bar-item w3-theme-l4" click.delegate="compareGithub()"><i\n              class="fa fa-refresh"></i> Compare\n            </button>\n            <button class="w3-button w3-bar-item w3-theme-l4" click.delegate="showGithubHelp()"><i\n              class="fa fa-help"></i> Help\n            </button>\n            \x3c!--button class="w3-button w3-bar-item w3-theme-l4" click.delegate="pullFromGithub()"><i class="fa fa-download"></i> Pull</button>\n          <button class="w3-button w3-bar-item w3-theme-l4" click.delegate="pushToGithub()"><i class="fa fa-upload"></i> Push</button--\x3e\n          </td>\n        </tr>\n      </table>\n\n    <div class="w3-clear"></div>\n    <div style="overflow:scroll;overflow-x:hidden;max-height:500px">\n    <table class="project">\n      <tbody>\n      <tr><td colspan="4" click.delegate="toggledoc()" class="w3-theme-l5 w3-hover-theme"><span show.bind="showdoc">-</span><span show.bind="!showdoc">+</span> DOCUMENTS </td></tr>\n      <tr repeat.for="file of mdfiles" class.bind="file.active ? \'w3-green w3-hover-grey\': \'w3-hover-blue\'" show.bind="showdoc">\n        <td title="${file.type.title}" click.delegate="open(file)"><i class="${file.type.faclass}"></i> ${file.name}\n        </td>\n        <td title="delete file"><i class="fa fa-times" click.delegate="delete(file)"></i></td>\n        <td title="rename file"><i class="fa fa-edit" click.delegate="rename(file)"></i></td>\n        <td title="add file link to edited document"><i class="fa fa-link" click.delegate="addlink(file)"></i></td>\n        <td class="w3-text-orange">\n          <span show.bind="file.syncstatus === STATUS.different"><i class="fa fa-exchange"\n                                                                    title="different choose whether to upload/download"></i> <i\n            class="fa fa-download" click.delegate="syncDownloadGithub(file)" title="download and replace"></i> <i\n            class="fa fa-upload" click.delegate="syncUploadGithub(file)" title="upload to GITHUB"></i></span>\n          <span show.bind="file.syncstatus === STATUS.synced"><i class="fa fa-check w3-text-green"\n                                                                 title="synced"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinlocal"><i class="fa fa-download"\n                                                                     title="notinlocal, click to download"\n                                                                     click.delegate="syncDownloadGithub(file)"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinremote"><i class="fa fa-upload"\n                                                                      title="notinremote, click to upload"\n                                                                      click.delegate="syncUploadGithub(file)"></i></span>\n        </td>\n      </tr>\n      <tr><td colspan="4" click.delegate="togglemodel()" class="w3-theme-l5 w3-hover-theme"><span show.bind="showmodel">-</span><span show.bind="!showmodel">+</span> MODEL </td></tr>\n      <tr repeat.for="file of modelfiles" class.bind="file.active ? \'w3-green w3-hover-grey\': \'w3-hover-blue\'"  show.bind="showmodel">\n        <td title="${file.type.title}" click.delegate="open(file)"><i class="${file.type.faclass}"></i> ${file.name}\n        </td>\n        <td title="delete file"><i class="fa fa-times" click.delegate="delete(file)"></i></td>\n        <td title="rename file"><i class="fa fa-edit" click.delegate="rename(file)"></i></td>\n        <td class="w3-text-orange">\n          <span show.bind="file.syncstatus === STATUS.different"><i class="fa fa-exchange"\n                                                                    title="different choose whether to upload/download"></i> <i\n            class="fa fa-download" click.delegate="syncDownloadGithub(file)" title="download and replace"></i> <i\n            class="fa fa-upload" click.delegate="syncUploadGithub(file)" title="upload to GITHUB"></i></span>\n          <span show.bind="file.syncstatus === STATUS.synced"><i class="fa fa-check w3-text-green"\n                                                                 title="synced"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinlocal"><i class="fa fa-download"\n                                                                     title="notinlocal, click to download"\n                                                                     click.delegate="syncDownloadGithub(file)"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinremote"><i class="fa fa-upload"\n                                                                      title="notinremote, click to upload"\n                                                                      click.delegate="syncUploadGithub(file)"></i></span>\n        </td>\n      </tr>\n      <tr><td colspan="4" click.delegate="toggleadobe()" class="w3-theme-l5 w3-hover-theme"><span show.bind="showadobe">-</span><span show.bind="!showadobe">+</span> ANIMATE </td></tr>\n      <tr repeat.for="file of adobefiles" class.bind="file.active ? \'w3-green w3-hover-grey\': \'w3-hover-blue\'"  show.bind="showadobe">\n        <td title="${file.type.title}" click.delegate="open(file)"><i class="${file.type.faclass}"></i> ${file.name}\n        </td>\n        <td title="delete file"><i class="fa fa-times" click.delegate="delete(file)"></i></td>\n        <td title="rename file"><i class="fa fa-edit" click.delegate="rename(file)"></i></td>\n        <td class="w3-text-orange">\n          <span show.bind="file.syncstatus === STATUS.different"><i class="fa fa-exchange"\n                                                                    title="different choose whether to upload/download"></i> <i\n            class="fa fa-download" click.delegate="syncDownloadGithub(file)" title="download and replace"></i> <i\n            class="fa fa-upload" click.delegate="syncUploadGithub(file)" title="upload to GITHUB"></i></span>\n          <span show.bind="file.syncstatus === STATUS.synced"><i class="fa fa-check w3-text-green"\n                                                                 title="synced"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinlocal"><i class="fa fa-download"\n                                                                     title="notinlocal, click to download"\n                                                                     click.delegate="syncDownloadGithub(file)"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinremote"><i class="fa fa-upload"\n                                                                      title="notinremote, click to upload"\n                                                                      click.delegate="syncUploadGithub(file)"></i></span>\n        </td>\n      </tr>\n      <tr><td colspan="4" click.delegate="toggleimg()" class="w3-theme-l5 w3-hover-theme"><span show.bind="showimg">-</span><span show.bind="!showimg">+</span> IMAGES </td></tr>\n      <tr repeat.for="file of imgfiles" class.bind="file.active ? \'w3-green w3-hover-grey\': \'w3-hover-blue\'" show.bind="showimg">\n        <td title="${file.type.title}" click.delegate="open(file)"><i class="${file.type.faclass}"></i> ${file.name}\n        </td>\n        <td title="delete file"><i class="fa fa-times" click.delegate="delete(file)"></i></td>\n        <td title="rename file"><i class="fa fa-edit" click.delegate="rename(file)"></i></td>\n        <td title="add file link to edited document"><i class="fa fa-link" click.delegate="addlink(file)"></i></td>\n        <td class="w3-text-orange">\n          <span show.bind="file.syncstatus === STATUS.different"><i class="fa fa-exchange"\n                                                                    title="different choose whether to upload/download"></i> <i\n            class="fa fa-download" click.delegate="syncDownloadGithub(file)" title="download and replace"></i> <i\n            class="fa fa-upload" click.delegate="syncUploadGithub(file)" title="upload to GITHUB"></i></span>\n          <span show.bind="file.syncstatus === STATUS.synced"><i class="fa fa-check w3-text-green"\n                                                                 title="synced"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinlocal"><i class="fa fa-download"\n                                                                     title="notinlocal, click to download"\n                                                                     click.delegate="syncDownloadGithub(file)"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinremote"><i class="fa fa-upload"\n                                                                      title="notinremote, click to upload"\n                                                                      click.delegate="syncUploadGithub(file)"></i></span>\n        </td>\n      </tr>\n      <tr><td colspan="4" click.delegate="toggleother()" class="w3-theme-l5 w3-hover-theme"><span show.bind="showother">-</span><span show.bind="!showother">+</span> OTHER </td></tr>\n      <tr repeat.for="file of otherfiles" class.bind="file.active ? \'w3-green w3-hover-grey\': \'w3-hover-blue\'"  show.bind="showother">\n        <td title="${file.type.title}" click.delegate="open(file)"><i class="${file.type.faclass}"></i> ${file.name}\n        </td>\n        <td title="delete file"><i class="fa fa-times" click.delegate="delete(file)"></i></td>\n        <td title="rename file"><i class="fa fa-edit" click.delegate="rename(file)"></i></td>\n        <td class="w3-text-orange">\n          <span show.bind="file.syncstatus === STATUS.different"><i class="fa fa-exchange"\n                                                                    title="different choose whether to upload/download"></i> <i\n            class="fa fa-download" click.delegate="syncDownloadGithub(file)" title="download and replace"></i> <i\n            class="fa fa-upload" click.delegate="syncUploadGithub(file)" title="upload to GITHUB"></i></span>\n          <span show.bind="file.syncstatus === STATUS.synced"><i class="fa fa-check w3-text-green"\n                                                                 title="synced"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinlocal"><i class="fa fa-download"\n                                                                     title="notinlocal, click to download"\n                                                                     click.delegate="syncDownloadGithub(file)"></i></span>\n          <span show.bind="file.syncstatus === STATUS.notinremote"><i class="fa fa-upload"\n                                                                      title="notinremote, click to upload"\n                                                                      click.delegate="syncUploadGithub(file)"></i></span>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n    <div>\n          <span class="w3-padding-4 w3-theme-l3 w3-border w3-round w3-hover-blue" click.delegate="create()"><i\n            class="fa fa-plus"></i> Create new file</span>\n        <span class="w3-padding-4 w3-theme-l3 w3-border w3-round w3-hover-blue" click.delegate="upload()"><i\n          class="fa fa-plus"></i> Upload file</span>\n    </div>\n    <div show.bind="uploaddialog" style="position:absolute;z-index:5;margin-top:-4px;margin-left:8px;background-color:#f8fcfe">\n      <div\n         dragenter.delegate="drag($event)"\n         dragover.delegate="drag($event)"\n         drop.delegate="drop($event)"\n         style="border:4px dashed #aaa;"\n         class.bind="isDragging ? \'w3-padding w3-round-large w3-blue w3-card-24\':\'w3-padding w3-round-large w3-white w3-card-24\'">\n      <p>Drag your files here or click button to select file</p>\n      </div>\n      <input type="file" change.trigger="dragNdrop($event)"/>\n    </div>\n    <file-dialog></file-dialog>\n  </div>\n</template>\n'},"components/referencearray":function(e,t,n){"use strict";n.r(t),n.d(t,"Referencearray",(function(){return f}));var i,a,o,r,s,l=n("6Y9Y"),c=n("aurelia-framework"),d=n("hij8");function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function p(e,t,n,i,a){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var f=Object(c.inject)(l.a)((o=p((a=function(){function e(e){u(this,"value",o,this),u(this,"askids",r,this),u(this,"title",s,this),this.numerator=1,this.denominator=1,this.addend=0,this.inputid="id1",this.api=e}var t=e.prototype;return t.attached=function(){this.askids&&(this.askids="true"===this.askids)},t.getSuggestions=function(e){return this.askids?this.api.currentfmientry.modelvariables.filter((function(t){return t.name.includes(e)&&(t.tunable||t.fixed)})).map((function(e){return e.reference+"-"+(e.tunable?"t":"f")+"-"+e.name})):this.api.currentfmientry.modelvariables.filter((function(t){return t.name.includes(e)})).map((function(e){return e.reference+"-o-"+e.name}))},t.addReference=function(){var e=this.goodautocomplete.getRawValue(),t=e.split("-",2),n=t[0],i=t[1],a=e.slice(n.length+3);this.value||(this.value=[]),this.askids?this.value.push({reference:n,name:a,id:this.inputid,numerator:this.numerator,denominator:this.denominator,addend:this.addend,fixed:i}):this.value.push({reference:n,name:a}),this.goodautocomplete._value=""},t.removeReference=function(e){var t=this.value.indexOf(e);this.value.splice(t,1)},e}()).prototype,"value",[d.bindable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=p(a.prototype,"askids",[d.bindable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=p(a.prototype,"title",[d.bindable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=a))||i},"components/referencearray.css":function(e,t,n){(t=n("JPst")(!1)).push([e.i,".referencearray td {\n  white-space: nowrap;\n  text-overflow:ellipsis;\n  overflow: hidden;\n}\n",""]),e.exports=t},"components/referencearray.html":function(e,t,n){e.exports='<template>\n  <require from="./autocomplete/good-auto-complete"></require>\n  <require from="./autocomplete/good-auto-complete.css"></require>\n  <require from="./referencearray.css"></require>\n  <div class="w3-theme-l4 w3-margin-top w3-margin-bottom">\n  <table class="referencearray">\n    <tr repeat.for="item of value">\n      <td>${item.reference}</td><td>${item.name}</td><td> <span class="w3-hover-blue" click.delegate="removeReference(item)"><i class="fa fa-trash"></i></span></td>\n    </tr>\n  </table>\n  <div></div>\n  <good-auto-complete view-model.ref="goodautocomplete"\n                      additional-class-input="form-control"\n                      selected-item.bind="valuereference"\n                      _value.bind="valuereferenceraw"\n                      suggestions-provider.bind="getSuggestions"\n                      suggestions-debounce="1000"\n                      min-search-value-length="1"\n                      placeholder="type first 1-4 letters and select ...">\n  </good-auto-complete>\n  <div show.bind="askids">\n    <table>\n      <th>id</th><th>numerator</th><th>denominator</th><th>addend</th>\n      <tr><td><input value.bind="inputid" size="5"/></td><td><input value.bind="numerator" type="number" size="6"/></td><td><input value.bind="denominator" type="number" size="6"/></td><td><input value.bind="addend" type="number" size="6"/></td></tr>\n    </table>\n  </div>\n  <button class="w3-button w3-theme-l1 w3-round" click.delegate="addReference()"><i class="fa fa-plus"></i> Add</button>\n  </div>\n</template>\n'},"components/toolbar":function(e,t,n){"use strict";n.r(t),n.d(t,"Toolbar",(function(){return d}));var i,a=n("6Y9Y"),o=n("aurelia-framework"),r=n("oAJy"),s=n.n(r),l=n("Ux9w");function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=Object(o.inject)(a.a)(i=function(e){var t,n;function i(t){var n;return(n=e.call(this)||this).showButtons=!1,n.uploaddialog=!1,n.filename="webapplication.md",n.isDragging=!1,n.api=t,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var a=i.prototype;return a.attached=function(){var e=this;s.a.getItem("bodylight-projects").then((function(t){e.projects=t})).catch((function(e){}))},a.newSinglePageProject=function(){var e=this.projects?this.projects.length:0,t=prompt("Project name :","WebApplication"+e);this.projects.push({name:t,type:"single"})},a.newMultiPageProject=function(){var e=this.projects?this.projects.length:0,t=prompt("Project name :","WebApplication"+e);this.projects.push({name:t,type:"multi"})},a.exportAsZip=function(){},a.addItem=function(e){this.api.addItem(e)},a.showHelp=function(e){this.api.helpsrc=e.doc},a.undo=function(){this.api.editor.undo()},a.redo=function(){this.api.editor.redo()},a.bold=function(){this.api.editor.insert("****");var e=this.api.editor.getCursorPosition();this.api.editor.moveCursorTo(e.row,e.column-2),this.api.editor.focus()},a.italic=function(){this.api.editor.insert("__");var e=this.api.editor.getCursorPosition();this.api.editor.moveCursorTo(e.row,e.column-1),this.api.editor.focus()},a.underline=function(){this.api.editor.insert("<u></u>");var e=this.api.editor.getCursorPosition();this.api.editor.moveCursorTo(e.row,e.column-4),this.api.editor.focus()},a.code=function(){this.api.editor.insert("``");var e=this.api.editor.getCursorPosition();this.api.editor.moveCursorTo(e.row,e.column-1),this.api.editor.focus()},a.equation=function(){this.api.editor.insert("$$");var e=this.api.editor.getCursorPosition();this.api.editor.moveCursorTo(e.row,e.column-1),this.api.editor.focus()},a.h1=function(){this.api.editor.insert("# "),this.api.editor.focus()},a.h2=function(){this.api.editor.insert("## "),this.api.editor.focus()},a.h3=function(){this.api.editor.insert("### "),this.api.editor.focus()},a.h4=function(){this.api.editor.insert("#### "),this.api.editor.focus()},a.division13=function(){this.api.editor.insert('<div class="w3-row">\n<div class="w3-third">\n');var e=this.api.editor.getCursorPosition();this.api.editor.insert('\n</div>\n<div class="w3-third">\n</div>\n<div class="w3-third">\n</div></div>'),this.api.editor.moveCursorTo(e.row,e.column),this.api.editor.focus()},a.division12=function(){this.api.editor.insert('<div class="w3-row">\n<div class="w3-half">\n');var e=this.api.editor.getCursorPosition();this.api.editor.insert('\n</div>\n<div class="w3-half">\n</div>\n</div>'),this.api.editor.moveCursorTo(e.row,e.column),this.api.editor.focus()},a.division1323=function(){this.api.editor.insert('<div class="w3-row">\n<div class="w3-third">\n');var e=this.api.editor.getCursorPosition();this.api.editor.insert('\n</div>\n<div class="w3-twothird">\n</div>\n</div>'),this.api.editor.moveCursorTo(e.row,e.column),this.api.editor.focus()},a.download=function(){this.api.download()},a.upload=function(){this.uploaddialog=!this.uploaddialog},a.handleFileLoad=function(e){var t=e.target.result;window.editor.editor.setValue(t),window.editor.editor.focus()},a.drag=function(e){this.isDragging=!0,e.preventDefault()},a.drop=function(e){this.isDragging=!1,e.preventDefault(),this.dragNdrop(e)},a.dragNdrop=function(e){var t=new FileReader;window.editor=this,t.onload=this.handleFileLoad;var n=e.target.files||e.dataTransfer.files;this.filename=n[0].name,t.readAsText(n[0]),this.uploaddialog=!1},a.save=function(){},a.load=function(){},a.preview=function(){this.api.previewmode=!this.api.previewmode,window.ani&&setTimeout((function(){window.ani.handleResize()}),500)},a.autopreview=function(){this.api.autopreview=!this.api.autopreview},a.generatepreview=function(){this.api.renderchange(this.api)},a.identifyItem=function(){var e=this.api.editor.getSelectionRange(),t=this.api.editor.find(/</g,{backwards:!0,start:e,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!0}),n=this.api.editor.find(/>/g,{backwards:!1,start:e,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!0}),i=this.api.editor.find(/<\//g,{backwards:!1,start:n,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!0}),a=this.api.editor.find(/>/g,{backwards:!1,start:i,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!0});a.start=t.start,this.api.editor.selection.setSelectionRange(a);var o=this.api.editor.getSelectedText();try{var r=o.match(/<(bdl-[^(<> )]+)/g)[0].substr(1),s=this.basicitems.filter((function(e){return e.name===r})),l={};(s&&s.length>0||(s=this.advanceditems.filter((function(e){return e.name===r})))&&s.length>0)&&(l.name=r,l.def=o,l.doc=s[0].doc,l.dialog=s[0].dialog),l.name?this.api.addItem(l):console.error("identifyItem - tag not found in basic/advanced items",r)}catch(e){}},i}(l.a))||i},"components/toolbar.html":function(e,t,n){e.exports='<template>\n  <require from="./animations.css"></require>\n      <div class="w3-border w3-theme-l5 w3-small">\n        <span class="w3-small"><pre style="display:inline" title="basic bodylight components">basic :</pre></span>\n        <span repeat.for="item of basicitems" class="w3-padding-4 w3-theme-l1" style="margin-right:4px">\n          <span class="w3-hover-blue" click.delegate="addItem(item)" title="add item into edited text">${item.name}</span>\n          <span class="w3-hover-blue" click.delegate="showHelp(item)" title="show help"><i class="fa fa-question-circle"></i></span>\n        </span><br/>\n        <span class="w3-small"><pre style="display:inline" title="advanced bodylight components">advan.:</pre></span>\n        <span repeat.for="item of advanceditems" class="w3-padding-4 w3-theme-l1" style="margin-right:4px">\n          <span class="w3-hover-blue" click.delegate="addItem(item)" title="add item into edited text">${item.name}</span>\n          <span class="w3-hover-blue" click.delegate="showHelp(item)" title="show help"><i class="fa fa-question-circle"></i></span>\n        </span><br/>\n        <span class="w3-small"><pre style="display:inline" title="basic editor tools">editor:</pre></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="undo()" title="undo"><i class="fa fa-undo"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="redo()" title="redo"><i class="fa fa-repeat"></i></span>\n        <span class="w3-border-right" style="margin-left:4px;margin-right:4px"></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="bold()" title="bold"><i class="fa fa-bold"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="italic()" title="italic"><i class="fa fa-italic"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="underline()" title="underline"><i class="fa fa-underline"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="h1()" title="header 1" class="w3-large">H1</span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="h2()" title="header 2" class="w3-medium">H2</span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="h3()" title="header 3" class="w3-small">H3</span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="h4()" title="header 4" class="w3-tiny">H4</span>\n        <span class="w3-border-right" style="margin-left:4px;margin-right:4px"></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="code()" title="programming code"><i class="fa fa-code"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="equation()" title="equation"><i class="fa fa-superscript"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="division13()" title="columns 1/3 1/3 1/3">&frac13;<i class="fa fa-columns"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="division12()" title="columns 1/2">&frac12;<i class="fa fa-columns"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="division1323()" title="columns 1/3 2/3">&frac13;&frac23;<i class="fa fa-columns"></i></span>\n        <span class="w3-border-right" style="margin-left:4px;margin-right:4px"></span>\n        \x3c!--span class="w3-theme-l2" click.delegate="save()" title="save file"><i class="fa fa-save"></i></span--\x3e\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="download()" title="download file"><i class="fa fa-download"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="upload()" title="upload file"><i class="fa fa-upload"></i></span>\n        <div show.bind="uploaddialog"\n             dragenter.delegate="drag($event)"\n             dragover.delegate="drag($event)"\n             drop.delegate="drop($event)"\n             style="position:absolute;z-index:5;border:4px dashed #aaa;;margin-top:-4px;margin-left:8px"\n             class.bind="isDragging ? \'w3-padding w3-round-large w3-blue w3-card-24\':\'w3-padding w3-round-large w3-white w3-card-24\'">\n          <p>Drag your files here or click on this area</p>\n          <input type="file" change.trigger="dragNdrop($event)"/>\n        </div>\n        <span class="w3-border-right" style="margin-left:4px;margin-right:4px"></span>\n        <span class.bind="api.previewmode? \'w3-padding-4 w3-hover-blue w3-grey\' : \'w3-padding-4 w3-hover-blue\'"  click.delegate="preview()" title="expand preview"><i class="fa fa-eye"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="autopreview()" title="automatically preview"><i class.bind="api.autopreview? \'fa fa-check-square-o\':\'fa fa-square-o\'"></i><i class="fa fa-eye-slash"></i></span>\n        <span class="w3-padding-4 w3-hover-blue"  click.delegate="generatepreview()" title="generate preview"><i class="fa fa-refresh"></i></span>\n        <span class="w3-border-right" style="margin-left:4px;margin-right:4px"></span>\n        <span class="w3-padding-4 w3-theme-l1" style="margin-right:4px">\n          <span class="w3-hover-blue" click.delegate="identifyItem()" title="identify and edit component">identify/edit</span>\n        </span>\n      </div>\n</template>\n'},"components/viewer":function(e,t,n){"use strict";n.r(t),n.d(t,"Viewer",(function(){return i}));var i=function(){}},"components/viewer.html":function(e,t){e.exports='<template>\n    <markdownaurelia fromid="editorref" src=""></markdownaurelia>\n</template>\n'},editorapp:function(e,t,n){"use strict";n.r(t),n.d(t,"Editorapp",(function(){return s}));var i,a=n("aurelia-framework"),o=n("6Y9Y"),r=n("kiQV"),s=Object(a.inject)(o.a)(i=function(e){this.api=e,this.version=r.a})||i},"editorapp.html":function(e,t,n){e.exports='<template>\n  <require from="./components/toolbar"></require>\n  <require from="./components/a-dialog"></require>\n  <require from="./components/file-dialog"></require>\n  <require from="./components/help"></require>\n  <require from="./components/editor"></require>\n  <require from="./components/viewer"></require>\n  <require from="./components/project"></require>\n  <require from="w3-css/w3.css"></require>\n  <require from="./w3-theme-bodylight.css"></require>\n\n  <div class="w3-row">\n    <div class="w3-col s6 m4 l3">\n      <project></project>\n      <a-dialog></a-dialog>\n      <help></help>\n    </div>\n    <div class="w3-col s6 m8 l9">\n      <div class="w3-center"><b>Bodylight Editor v ${version}</b></div>\n      <toolbar></toolbar>\n      <div class="w3-half" show.bind="!api.previewmode">\n        <editor></editor>\n      </div>\n      <div class="w3-rest">\n        <div class="w3-border w3-padding" style.bind="tablet?\'width:768px\':\'\'">\n          <div style.bind="api.previewmode?\'width:100%\':\'transform: scale(0.5);transform-origin:top left;width:200%\'">\n            <viewer></viewer>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'},editormain:function(e,t,n){"use strict";n.d(t,"configure",(function(){return a}));n("ls82");var i=n("BEPO");n("70NS");function a(e){e.use.standardConfiguration().plugin("aurelia-bodylight-plugin").plugin("aurelia-dynamic-html").plugin("aurelia-animator-css").feature("resources/index"),e.use.developmentLogging(i.a?"debug":"warn"),i.b&&e.use.plugin("aurelia-testing"),e.start().then((function(){e.setRoot("editorapp")}))}},"resources/index":function(e,t,n){"use strict";n.r(t),n.d(t,"configure",(function(){return i}));n("70NS");function i(e){e.globalResources(["components/graphics/springmassraw.html","components/graphics/springmass.html"])}},"w3-theme-bodylight.css":function(e,t,n){(t=n("JPst")(!1)).push([e.i,".w3-theme-l5 {color:#000 !important; background-color:#f8fcfe !important}\n.w3-theme-l4 {color:#000 !important; background-color:#e7f5fb !important}\n.w3-theme-l3 {color:#000 !important; background-color:#d0ecf7 !important}\n.w3-theme-l2 {color:#000 !important; background-color:#b8e2f3 !important}\n.w3-theme-l1 {color:#000 !important; background-color:#a1d9ef !important}\n.w3-theme-d1 {color:#000 !important; background-color:#69c2e6 !important}\n.w3-theme-d2 {color:#fff !important; background-color:#4ab6e0 !important}\n.w3-theme-d3 {color:#fff !important; background-color:#2aa9db !important}\n.w3-theme-d4 {color:#fff !important; background-color:#2092bf !important}\n.w3-theme-d5 {color:#fff !important; background-color:#1b7a9f !important}\n\n.w3-theme-light {color:#000 !important; background-color:#f8fcfe !important}\n.w3-theme-dark {color:#fff !important; background-color:#1b7a9f !important}\n.w3-theme-action {color:#fff !important; background-color:#1b7a9f !important}\n\n.w3-theme {color:#000 !important; background-color:#87ceeb !important}\n.w3-text-theme {color:#87ceeb !important}\n.w3-border-theme {border-color:#87ceeb !important}\n\n.w3-hover-theme:hover {color:#000 !important; background-color:#87ceeb !important}\n.w3-hover-text-theme:hover {color:#87ceeb !important}\n.w3-hover-border-theme:hover {border-color:#87ceeb !important}\n",""]),e.exports=t},xanf:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("IsLn"),a=function(){function e(e,t,n){var a=this;if(this.name="",this.type=i.b.MDFILE,this.active=!1,this.bloburl="",this.name=e,t)this.type=t;else{var o=e.toLowerCase();o.endsWith(".md")?this.type=i.b.MDFILE:o.endsWith(".png")||o.endsWith(".jpg")||o.endsWith(".gif")?this.type=i.b.IMAGE:o.endsWith(".xml")||o.endsWith(".html")?this.type=i.b.DESCRIPTIONFILE:o.endsWith(".js")&&o.includes("_")?this.type=i.b.MODELFILE:o.endsWith(".js")&&o.endsWith(".bundle.js")?this.type=i.b.OTHERJS:o.endsWith(".js")?this.type=i.b.ADOBEANIMATE:this.type=i.b.OTHERJS}n?window.editorapi.bs.saveBlobContent(e,n).then((function(t){window.editorapi.bs.loadDocUrl(e).then((function(e){return a.bloburl=e}))})).catch((function(e){console.error("error saving blob",e)})):window.editorapi.bs.loadDocUrl(e).then((function(e){return a.bloburl=e}))}var t=e.prototype;return t.changetype=function(e){this.type=e},t.activate=function(e){i.c.get(this.type.name).activate(this,e)},t.deactivate=function(){i.c.get(this.type.name).deactivate(this)},t.renderlink=function(){i.c.get(this.type.name).renderlink(this)},t.saveChanges=function(){i.c.get(this.type.name).saveChanges(this)},e}()}}]);
//# sourceMappingURL=app~21833f8f.88f9ccae441f33aa7e7a.bundle.map