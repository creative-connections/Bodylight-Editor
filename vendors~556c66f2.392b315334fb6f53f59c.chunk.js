(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~556c66f2"],{

/***/ "3U8n":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/aurelia-dependency-injection/dist/native-modules/aurelia-dependency-injection.js ***!
  \*******************************************************************************************************/
/*! exports provided: _emptyParameters, InvocationHandler, Container, autoinject, inject, invoker, invokeAsFactory, FactoryInvoker, registration, transient, singleton, TransientRegistration, SingletonRegistration, resolver, Strategy, StrategyResolver, Lazy, All, Optional, Parent, Factory, NewInstance, getDecoratorDependencies, lazy, all, optional, parent, factory, newInstance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_emptyParameters\", function() { return _emptyParameters; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InvocationHandler\", function() { return InvocationHandler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Container\", function() { return Container; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"autoinject\", function() { return autoinject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"inject\", function() { return inject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"invoker\", function() { return invoker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"invokeAsFactory\", function() { return invokeAsFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FactoryInvoker\", function() { return FactoryInvoker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"registration\", function() { return registration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transient\", function() { return transient; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"singleton\", function() { return singleton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TransientRegistration\", function() { return TransientRegistration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SingletonRegistration\", function() { return SingletonRegistration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"resolver\", function() { return resolver; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Strategy\", function() { return Strategy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StrategyResolver\", function() { return StrategyResolver; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Lazy\", function() { return Lazy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"All\", function() { return All; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Optional\", function() { return Optional; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Parent\", function() { return Parent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Factory\", function() { return Factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NewInstance\", function() { return NewInstance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getDecoratorDependencies\", function() { return getDecoratorDependencies; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"lazy\", function() { return lazy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"all\", function() { return all; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"optional\", function() { return optional; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parent\", function() { return parent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"factory\", function() { return factory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"newInstance\", function() { return newInstance; });\n/* harmony import */ var aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-metadata */ \"qrcG\");\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-pal */ \"70NS\");\n\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\n\nfunction isInjectable(potentialTarget) {\r\n    return !!potentialTarget;\r\n}\r\nfunction autoinject(potentialTarget) {\r\n    var deco = function (target) {\r\n        if (!target.hasOwnProperty('inject')) {\r\n            target.inject = (aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].getOwn(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].paramTypes, target) ||\r\n                _emptyParameters).slice();\r\n            if (target.inject && target.inject.length > 0) {\r\n                if (target.inject[target.inject.length - 1] === Object) {\r\n                    target.inject.splice(-1, 1);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    if (isInjectable(potentialTarget)) {\r\n        return deco(potentialTarget);\r\n    }\r\n    return deco;\r\n}\r\nfunction inject() {\r\n    var rest = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        rest[_i] = arguments[_i];\r\n    }\r\n    return function (target, _key, descriptor) {\r\n        if (typeof descriptor === 'number') {\r\n            autoinject(target);\r\n            if (rest.length === 1) {\r\n                target.inject[descriptor] = rest[0];\r\n            }\r\n            return;\r\n        }\r\n        if (descriptor) {\r\n            var fn = descriptor.value;\r\n            fn.inject = rest;\r\n        }\r\n        else {\r\n            target.inject = rest;\r\n        }\r\n    };\r\n}\n\nvar resolver = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"protocol\"].create('aurelia:resolver', function (target) {\r\n    if (!(typeof target.get === 'function')) {\r\n        return 'Resolvers must implement: get(container: Container, key: any): any';\r\n    }\r\n    return true;\r\n});\r\nvar Strategy;\r\n(function (Strategy) {\r\n    Strategy[Strategy[\"instance\"] = 0] = \"instance\";\r\n    Strategy[Strategy[\"singleton\"] = 1] = \"singleton\";\r\n    Strategy[Strategy[\"transient\"] = 2] = \"transient\";\r\n    Strategy[Strategy[\"function\"] = 3] = \"function\";\r\n    Strategy[Strategy[\"array\"] = 4] = \"array\";\r\n    Strategy[Strategy[\"alias\"] = 5] = \"alias\";\r\n})(Strategy || (Strategy = {}));\r\nfunction isStrategy(actual, expected, state) {\r\n    return actual === expected;\r\n}\r\nvar StrategyResolver = (function () {\r\n    function StrategyResolver(strategy, state) {\r\n        this.strategy = strategy;\r\n        this.state = state;\r\n    }\r\n    StrategyResolver.prototype.get = function (container, key) {\r\n        if (isStrategy(this.strategy, Strategy.instance, this.state)) {\r\n            return this.state;\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.singleton, this.state)) {\r\n            var singleton = container.invoke(this.state);\r\n            this.state = singleton;\r\n            this.strategy = 0;\r\n            return singleton;\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.transient, this.state)) {\r\n            return container.invoke(this.state);\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.function, this.state)) {\r\n            return this.state(container, key, this);\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.array, this.state)) {\r\n            return this.state[0].get(container, key);\r\n        }\r\n        if (isStrategy(this.strategy, Strategy.alias, this.state)) {\r\n            return container.get(this.state);\r\n        }\r\n        throw new Error('Invalid strategy: ' + this.strategy);\r\n    };\r\n    StrategyResolver = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Number, Object])\r\n    ], StrategyResolver);\r\n    return StrategyResolver;\r\n}());\r\nvar Lazy = (function () {\r\n    function Lazy(key) {\r\n        this._key = key;\r\n    }\r\n    Lazy_1 = Lazy;\r\n    Lazy.prototype.get = function (container) {\r\n        var _this = this;\r\n        return function () { return container.get(_this._key); };\r\n    };\r\n    Lazy.of = function (key) {\r\n        return new Lazy_1(key);\r\n    };\r\n    var Lazy_1;\r\n    Lazy = Lazy_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], Lazy);\r\n    return Lazy;\r\n}());\r\nvar All = (function () {\r\n    function All(key) {\r\n        this._key = key;\r\n    }\r\n    All_1 = All;\r\n    All.prototype.get = function (container) {\r\n        return container.getAll(this._key);\r\n    };\r\n    All.of = function (key) {\r\n        return new All_1(key);\r\n    };\r\n    var All_1;\r\n    All = All_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], All);\r\n    return All;\r\n}());\r\nvar Optional = (function () {\r\n    function Optional(key, checkParent) {\r\n        if (checkParent === void 0) { checkParent = true; }\r\n        this._key = key;\r\n        this._checkParent = checkParent;\r\n    }\r\n    Optional_1 = Optional;\r\n    Optional.prototype.get = function (container) {\r\n        if (container.hasResolver(this._key, this._checkParent)) {\r\n            return container.get(this._key);\r\n        }\r\n        return null;\r\n    };\r\n    Optional.of = function (key, checkParent) {\r\n        if (checkParent === void 0) { checkParent = true; }\r\n        return new Optional_1(key, checkParent);\r\n    };\r\n    var Optional_1;\r\n    Optional = Optional_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object, Boolean])\r\n    ], Optional);\r\n    return Optional;\r\n}());\r\nvar Parent = (function () {\r\n    function Parent(key) {\r\n        this._key = key;\r\n    }\r\n    Parent_1 = Parent;\r\n    Parent.prototype.get = function (container) {\r\n        return container.parent ? container.parent.get(this._key) : null;\r\n    };\r\n    Parent.of = function (key) {\r\n        return new Parent_1(key);\r\n    };\r\n    var Parent_1;\r\n    Parent = Parent_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], Parent);\r\n    return Parent;\r\n}());\r\nvar Factory = (function () {\r\n    function Factory(key) {\r\n        this._key = key;\r\n    }\r\n    Factory_1 = Factory;\r\n    Factory.prototype.get = function (container) {\r\n        var fn = this._key;\r\n        var resolver = container.getResolver(fn);\r\n        if (resolver && resolver.strategy === Strategy.function) {\r\n            fn = resolver.state;\r\n        }\r\n        return function () {\r\n            var rest = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                rest[_i] = arguments[_i];\r\n            }\r\n            return container.invoke(fn, rest);\r\n        };\r\n    };\r\n    Factory.of = function (key) {\r\n        return new Factory_1(key);\r\n    };\r\n    var Factory_1;\r\n    Factory = Factory_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object])\r\n    ], Factory);\r\n    return Factory;\r\n}());\r\nvar NewInstance = (function () {\r\n    function NewInstance(key) {\r\n        var dynamicDependencies = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            dynamicDependencies[_i - 1] = arguments[_i];\r\n        }\r\n        this.key = key;\r\n        this.asKey = key;\r\n        this.dynamicDependencies = dynamicDependencies;\r\n    }\r\n    NewInstance_1 = NewInstance;\r\n    NewInstance.prototype.get = function (container) {\r\n        var dynamicDependencies = this.dynamicDependencies.length > 0\r\n            ? this.dynamicDependencies.map(function (dependency) {\r\n                return dependency['protocol:aurelia:resolver']\r\n                    ? dependency.get(container)\r\n                    : container.get(dependency);\r\n            })\r\n            : undefined;\r\n        var fn = this.key;\r\n        var resolver = container.getResolver(fn);\r\n        if (resolver && resolver.strategy === 3) {\r\n            fn = resolver.state;\r\n        }\r\n        var instance = container.invoke(fn, dynamicDependencies);\r\n        container.registerInstance(this.asKey, instance);\r\n        return instance;\r\n    };\r\n    NewInstance.prototype.as = function (key) {\r\n        this.asKey = key;\r\n        return this;\r\n    };\r\n    NewInstance.of = function (key) {\r\n        var dynamicDependencies = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            dynamicDependencies[_i - 1] = arguments[_i];\r\n        }\r\n        return new (NewInstance_1.bind.apply(NewInstance_1, [void 0, key].concat(dynamicDependencies)))();\r\n    };\r\n    var NewInstance_1;\r\n    NewInstance = NewInstance_1 = __decorate([\r\n        resolver(),\r\n        __metadata(\"design:paramtypes\", [Object, Object])\r\n    ], NewInstance);\r\n    return NewInstance;\r\n}());\r\nfunction getDecoratorDependencies(target) {\r\n    autoinject(target);\r\n    return target.inject;\r\n}\r\nfunction lazy(keyValue) {\r\n    return function (target, _key, index) {\r\n        var inject$$1 = getDecoratorDependencies(target);\r\n        inject$$1[index] = Lazy.of(keyValue);\r\n    };\r\n}\r\nfunction all(keyValue) {\r\n    return function (target, _key, index) {\r\n        var inject$$1 = getDecoratorDependencies(target);\r\n        inject$$1[index] = All.of(keyValue);\r\n    };\r\n}\r\nfunction optional(checkParentOrTarget) {\r\n    if (checkParentOrTarget === void 0) { checkParentOrTarget = true; }\r\n    var deco = function (checkParent) {\r\n        return function (target, _key, index) {\r\n            var inject$$1 = getDecoratorDependencies(target);\r\n            inject$$1[index] = Optional.of(inject$$1[index], checkParent);\r\n        };\r\n    };\r\n    if (typeof checkParentOrTarget === 'boolean') {\r\n        return deco(checkParentOrTarget);\r\n    }\r\n    return deco(true);\r\n}\r\nfunction parent(target, _key, index) {\r\n    var inject$$1 = getDecoratorDependencies(target);\r\n    inject$$1[index] = Parent.of(inject$$1[index]);\r\n}\r\nfunction factory(keyValue) {\r\n    return function (target, _key, index) {\r\n        var inject$$1 = getDecoratorDependencies(target);\r\n        inject$$1[index] = Factory.of(keyValue);\r\n    };\r\n}\r\nfunction newInstance(asKeyOrTarget) {\r\n    var dynamicDependencies = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        dynamicDependencies[_i - 1] = arguments[_i];\r\n    }\r\n    var deco = function (asKey) {\r\n        return function (target, _key, index) {\r\n            var inject$$1 = getDecoratorDependencies(target);\r\n            inject$$1[index] = NewInstance.of.apply(NewInstance, [inject$$1[index]].concat(dynamicDependencies));\r\n            if (!!asKey) {\r\n                inject$$1[index].as(asKey);\r\n            }\r\n        };\r\n    };\r\n    if (arguments.length >= 1) {\r\n        return deco(asKeyOrTarget);\r\n    }\r\n    return deco();\r\n}\n\nfunction validateKey(key) {\r\n    if (key === null || key === undefined) {\r\n        throw new Error('key/value cannot be null or undefined. Are you trying to inject/register something that doesn\\'t exist with DI?');\r\n    }\r\n}\r\nvar _emptyParameters = Object.freeze([]);\r\naurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration = 'aurelia:registration';\r\naurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker = 'aurelia:invoker';\r\nvar resolverDecorates = resolver.decorates;\r\nvar InvocationHandler = (function () {\r\n    function InvocationHandler(fn, invoker, dependencies) {\r\n        this.fn = fn;\r\n        this.invoker = invoker;\r\n        this.dependencies = dependencies;\r\n    }\r\n    InvocationHandler.prototype.invoke = function (container, dynamicDependencies) {\r\n        return dynamicDependencies !== undefined\r\n            ? this.invoker.invokeWithDynamicDependencies(container, this.fn, this.dependencies, dynamicDependencies)\r\n            : this.invoker.invoke(container, this.fn, this.dependencies);\r\n    };\r\n    return InvocationHandler;\r\n}());\r\nfunction invokeWithDynamicDependencies(container, fn, staticDependencies, dynamicDependencies) {\r\n    var i = staticDependencies.length;\r\n    var args = new Array(i);\r\n    var lookup;\r\n    while (i--) {\r\n        lookup = staticDependencies[i];\r\n        if (lookup === null || lookup === undefined) {\r\n            throw new Error('Constructor Parameter with index ' +\r\n                i +\r\n                ' cannot be null or undefined. Are you trying to inject/register something that doesn\\'t exist with DI?');\r\n        }\r\n        else {\r\n            args[i] = container.get(lookup);\r\n        }\r\n    }\r\n    if (dynamicDependencies !== undefined) {\r\n        args = args.concat(dynamicDependencies);\r\n    }\r\n    return Reflect.construct(fn, args);\r\n}\r\nvar classInvoker = {\r\n    invoke: function (container, Type, deps) {\r\n        var instances = deps.map(function (dep) { return container.get(dep); });\r\n        return Reflect.construct(Type, instances);\r\n    },\r\n    invokeWithDynamicDependencies: invokeWithDynamicDependencies\r\n};\r\nfunction getDependencies(f) {\r\n    if (!f.hasOwnProperty('inject')) {\r\n        return [];\r\n    }\r\n    if (typeof f.inject === 'function') {\r\n        return f.inject();\r\n    }\r\n    return f.inject;\r\n}\r\nvar Container = (function () {\r\n    function Container(configuration) {\r\n        if (configuration === undefined) {\r\n            configuration = {};\r\n        }\r\n        this._configuration = configuration;\r\n        this._onHandlerCreated = configuration.onHandlerCreated;\r\n        this._handlers =\r\n            configuration.handlers || (configuration.handlers = new Map());\r\n        this._resolvers = new Map();\r\n        this.root = this;\r\n        this.parent = null;\r\n    }\r\n    Container.prototype.makeGlobal = function () {\r\n        Container.instance = this;\r\n        return this;\r\n    };\r\n    Container.prototype.setHandlerCreatedCallback = function (onHandlerCreated) {\r\n        this._onHandlerCreated = onHandlerCreated;\r\n        this._configuration.onHandlerCreated = onHandlerCreated;\r\n    };\r\n    Container.prototype.registerInstance = function (key, instance) {\r\n        return this.registerResolver(key, new StrategyResolver(0, instance === undefined ? key : instance));\r\n    };\r\n    Container.prototype.registerSingleton = function (key, fn) {\r\n        return this.registerResolver(key, new StrategyResolver(1, fn === undefined ? key : fn));\r\n    };\r\n    Container.prototype.registerTransient = function (key, fn) {\r\n        return this.registerResolver(key, new StrategyResolver(2, fn === undefined ? key : fn));\r\n    };\r\n    Container.prototype.registerHandler = function (key, handler) {\r\n        return this.registerResolver(key, new StrategyResolver(3, handler));\r\n    };\r\n    Container.prototype.registerAlias = function (originalKey, aliasKey) {\r\n        return this.registerResolver(aliasKey, new StrategyResolver(5, originalKey));\r\n    };\r\n    Container.prototype.registerResolver = function (key, resolver$$1) {\r\n        validateKey(key);\r\n        var allResolvers = this._resolvers;\r\n        var result = allResolvers.get(key);\r\n        if (result === undefined) {\r\n            allResolvers.set(key, resolver$$1);\r\n        }\r\n        else if (result.strategy === 4) {\r\n            result.state.push(resolver$$1);\r\n        }\r\n        else {\r\n            allResolvers.set(key, new StrategyResolver(4, [result, resolver$$1]));\r\n        }\r\n        return resolver$$1;\r\n    };\r\n    Container.prototype.autoRegister = function (key, fn) {\r\n        fn = fn === undefined ? key : fn;\r\n        if (typeof fn === 'function') {\r\n            var registration = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].get(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration, fn);\r\n            if (registration === undefined) {\r\n                return this.registerResolver(key, new StrategyResolver(1, fn));\r\n            }\r\n            return registration.registerResolver(this, key, fn);\r\n        }\r\n        return this.registerResolver(key, new StrategyResolver(0, fn));\r\n    };\r\n    Container.prototype.autoRegisterAll = function (fns) {\r\n        var i = fns.length;\r\n        while (i--) {\r\n            this.autoRegister(fns[i]);\r\n        }\r\n    };\r\n    Container.prototype.unregister = function (key) {\r\n        this._resolvers.delete(key);\r\n    };\r\n    Container.prototype.hasResolver = function (key, checkParent) {\r\n        if (checkParent === void 0) { checkParent = false; }\r\n        validateKey(key);\r\n        return (this._resolvers.has(key) ||\r\n            (checkParent &&\r\n                this.parent !== null &&\r\n                this.parent.hasResolver(key, checkParent)));\r\n    };\r\n    Container.prototype.getResolver = function (key) {\r\n        return this._resolvers.get(key);\r\n    };\r\n    Container.prototype.get = function (key) {\r\n        validateKey(key);\r\n        if (key === Container) {\r\n            return this;\r\n        }\r\n        if (resolverDecorates(key)) {\r\n            return key.get(this, key);\r\n        }\r\n        var resolver$$1 = this._resolvers.get(key);\r\n        if (resolver$$1 === undefined) {\r\n            if (this.parent === null) {\r\n                return this.autoRegister(key).get(this, key);\r\n            }\r\n            var registration = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].get(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration, key);\r\n            if (registration === undefined) {\r\n                return this.parent._get(key);\r\n            }\r\n            return registration.registerResolver(this, key, key).get(this, key);\r\n        }\r\n        return resolver$$1.get(this, key);\r\n    };\r\n    Container.prototype._get = function (key) {\r\n        var resolver$$1 = this._resolvers.get(key);\r\n        if (resolver$$1 === undefined) {\r\n            if (this.parent === null) {\r\n                return this.autoRegister(key).get(this, key);\r\n            }\r\n            return this.parent._get(key);\r\n        }\r\n        return resolver$$1.get(this, key);\r\n    };\r\n    Container.prototype.getAll = function (key) {\r\n        validateKey(key);\r\n        var resolver$$1 = this._resolvers.get(key);\r\n        if (resolver$$1 === undefined) {\r\n            if (this.parent === null) {\r\n                return _emptyParameters;\r\n            }\r\n            return this.parent.getAll(key);\r\n        }\r\n        if (resolver$$1.strategy === 4) {\r\n            var state = resolver$$1.state;\r\n            var i = state.length;\r\n            var results = new Array(i);\r\n            while (i--) {\r\n                results[i] = state[i].get(this, key);\r\n            }\r\n            return results;\r\n        }\r\n        return [resolver$$1.get(this, key)];\r\n    };\r\n    Container.prototype.createChild = function () {\r\n        var child = new Container(this._configuration);\r\n        child.root = this.root;\r\n        child.parent = this;\r\n        return child;\r\n    };\r\n    Container.prototype.invoke = function (fn, dynamicDependencies) {\r\n        try {\r\n            var handler = this._handlers.get(fn);\r\n            if (handler === undefined) {\r\n                handler = this._createInvocationHandler(fn);\r\n                this._handlers.set(fn, handler);\r\n            }\r\n            return handler.invoke(this, dynamicDependencies);\r\n        }\r\n        catch (e) {\r\n            throw new aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"AggregateError\"](\"Error invoking \" + fn.name + \". Check the inner error for details.\", e, true);\r\n        }\r\n    };\r\n    Container.prototype._createInvocationHandler = function (fn) {\r\n        var dependencies;\r\n        if (fn.inject === undefined) {\r\n            dependencies =\r\n                aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].getOwn(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].paramTypes, fn) || _emptyParameters;\r\n        }\r\n        else {\r\n            dependencies = [];\r\n            var ctor = fn;\r\n            while (typeof ctor === 'function') {\r\n                dependencies.push.apply(dependencies, getDependencies(ctor));\r\n                ctor = Object.getPrototypeOf(ctor);\r\n            }\r\n        }\r\n        var invoker = aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].getOwn(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker, fn) || classInvoker;\r\n        var handler = new InvocationHandler(fn, invoker, dependencies);\r\n        return this._onHandlerCreated !== undefined\r\n            ? this._onHandlerCreated(handler)\r\n            : handler;\r\n    };\r\n    return Container;\r\n}());\n\nfunction invoker(value) {\r\n    return function (target) {\r\n        aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].define(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker, value, target);\r\n    };\r\n}\r\nfunction invokeAsFactory(potentialTarget) {\r\n    var deco = function (target) {\r\n        aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].define(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].invoker, FactoryInvoker.instance, target);\r\n    };\r\n    return potentialTarget ? deco(potentialTarget) : deco;\r\n}\r\nvar FactoryInvoker = (function () {\r\n    function FactoryInvoker() {\r\n    }\r\n    FactoryInvoker.prototype.invoke = function (container, fn, dependencies) {\r\n        var i = dependencies.length;\r\n        var args = new Array(i);\r\n        while (i--) {\r\n            args[i] = container.get(dependencies[i]);\r\n        }\r\n        return fn.apply(undefined, args);\r\n    };\r\n    FactoryInvoker.prototype.invokeWithDynamicDependencies = function (container, fn, staticDependencies, dynamicDependencies) {\r\n        var i = staticDependencies.length;\r\n        var args = new Array(i);\r\n        while (i--) {\r\n            args[i] = container.get(staticDependencies[i]);\r\n        }\r\n        if (dynamicDependencies !== undefined) {\r\n            args = args.concat(dynamicDependencies);\r\n        }\r\n        return fn.apply(undefined, args);\r\n    };\r\n    return FactoryInvoker;\r\n}());\r\nFactoryInvoker.instance = new FactoryInvoker();\n\nfunction registration(value) {\r\n    return function (target) {\r\n        aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].define(aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__[\"metadata\"].registration, value, target);\r\n    };\r\n}\r\nfunction transient(key) {\r\n    return registration(new TransientRegistration(key));\r\n}\r\nfunction singleton(keyOrRegisterInChild, registerInChild) {\r\n    if (registerInChild === void 0) { registerInChild = false; }\r\n    return registration(new SingletonRegistration(keyOrRegisterInChild, registerInChild));\r\n}\r\nvar TransientRegistration = (function () {\r\n    function TransientRegistration(key) {\r\n        this._key = key;\r\n    }\r\n    TransientRegistration.prototype.registerResolver = function (container, key, fn) {\r\n        var existingResolver = container.getResolver(this._key || key);\r\n        return existingResolver === undefined\r\n            ? container.registerTransient((this._key || key), fn)\r\n            : existingResolver;\r\n    };\r\n    return TransientRegistration;\r\n}());\r\nvar SingletonRegistration = (function () {\r\n    function SingletonRegistration(keyOrRegisterInChild, registerInChild) {\r\n        if (registerInChild === void 0) { registerInChild = false; }\r\n        if (typeof keyOrRegisterInChild === 'boolean') {\r\n            this._registerInChild = keyOrRegisterInChild;\r\n        }\r\n        else {\r\n            this._key = keyOrRegisterInChild;\r\n            this._registerInChild = registerInChild;\r\n        }\r\n    }\r\n    SingletonRegistration.prototype.registerResolver = function (container, key, fn) {\r\n        var targetContainer = this._registerInChild ? container : container.root;\r\n        var existingResolver = targetContainer.getResolver(this._key || key);\r\n        return existingResolver === undefined\r\n            ? targetContainer.registerSingleton(this._key || key, fn)\r\n            : existingResolver;\r\n    };\r\n    return SingletonRegistration;\r\n}());\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiM1U4bi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLWRlcGVuZGVuY3ktaW5qZWN0aW9uL2Rpc3QvbmF0aXZlLW1vZHVsZXMvYXVyZWxpYS1kZXBlbmRlbmN5LWluamVjdGlvbi5qcz9kZDRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1ldGFkYXRhLCBwcm90b2NvbCB9IGZyb20gJ2F1cmVsaWEtbWV0YWRhdGEnO1xuaW1wb3J0IHsgQWdncmVnYXRlRXJyb3IgfSBmcm9tICdhdXJlbGlhLXBhbCc7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG5mdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XG5cbmZ1bmN0aW9uIGlzSW5qZWN0YWJsZShwb3RlbnRpYWxUYXJnZXQpIHtcclxuICAgIHJldHVybiAhIXBvdGVudGlhbFRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBhdXRvaW5qZWN0KHBvdGVudGlhbFRhcmdldCkge1xyXG4gICAgdmFyIGRlY28gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKCF0YXJnZXQuaGFzT3duUHJvcGVydHkoJ2luamVjdCcpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5pbmplY3QgPSAobWV0YWRhdGEuZ2V0T3duKG1ldGFkYXRhLnBhcmFtVHlwZXMsIHRhcmdldCkgfHxcclxuICAgICAgICAgICAgICAgIF9lbXB0eVBhcmFtZXRlcnMpLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaW5qZWN0ICYmIHRhcmdldC5pbmplY3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5pbmplY3RbdGFyZ2V0LmluamVjdC5sZW5ndGggLSAxXSA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmluamVjdC5zcGxpY2UoLTEsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmIChpc0luamVjdGFibGUocG90ZW50aWFsVGFyZ2V0KSkge1xyXG4gICAgICAgIHJldHVybiBkZWNvKHBvdGVudGlhbFRhcmdldCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVjbztcclxufVxyXG5mdW5jdGlvbiBpbmplY3QoKSB7XHJcbiAgICB2YXIgcmVzdCA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICByZXN0W19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgX2tleSwgZGVzY3JpcHRvcikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZGVzY3JpcHRvciA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgYXV0b2luamVjdCh0YXJnZXQpO1xyXG4gICAgICAgICAgICBpZiAocmVzdC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5pbmplY3RbZGVzY3JpcHRvcl0gPSByZXN0WzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IpIHtcclxuICAgICAgICAgICAgdmFyIGZuID0gZGVzY3JpcHRvci52YWx1ZTtcclxuICAgICAgICAgICAgZm4uaW5qZWN0ID0gcmVzdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5pbmplY3QgPSByZXN0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cblxudmFyIHJlc29sdmVyID0gcHJvdG9jb2wuY3JlYXRlKCdhdXJlbGlhOnJlc29sdmVyJywgZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgaWYgKCEodHlwZW9mIHRhcmdldC5nZXQgPT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgcmV0dXJuICdSZXNvbHZlcnMgbXVzdCBpbXBsZW1lbnQ6IGdldChjb250YWluZXI6IENvbnRhaW5lciwga2V5OiBhbnkpOiBhbnknO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn0pO1xyXG52YXIgU3RyYXRlZ3k7XHJcbihmdW5jdGlvbiAoU3RyYXRlZ3kpIHtcclxuICAgIFN0cmF0ZWd5W1N0cmF0ZWd5W1wiaW5zdGFuY2VcIl0gPSAwXSA9IFwiaW5zdGFuY2VcIjtcclxuICAgIFN0cmF0ZWd5W1N0cmF0ZWd5W1wic2luZ2xldG9uXCJdID0gMV0gPSBcInNpbmdsZXRvblwiO1xyXG4gICAgU3RyYXRlZ3lbU3RyYXRlZ3lbXCJ0cmFuc2llbnRcIl0gPSAyXSA9IFwidHJhbnNpZW50XCI7XHJcbiAgICBTdHJhdGVneVtTdHJhdGVneVtcImZ1bmN0aW9uXCJdID0gM10gPSBcImZ1bmN0aW9uXCI7XHJcbiAgICBTdHJhdGVneVtTdHJhdGVneVtcImFycmF5XCJdID0gNF0gPSBcImFycmF5XCI7XHJcbiAgICBTdHJhdGVneVtTdHJhdGVneVtcImFsaWFzXCJdID0gNV0gPSBcImFsaWFzXCI7XHJcbn0pKFN0cmF0ZWd5IHx8IChTdHJhdGVneSA9IHt9KSk7XHJcbmZ1bmN0aW9uIGlzU3RyYXRlZ3koYWN0dWFsLCBleHBlY3RlZCwgc3RhdGUpIHtcclxuICAgIHJldHVybiBhY3R1YWwgPT09IGV4cGVjdGVkO1xyXG59XHJcbnZhciBTdHJhdGVneVJlc29sdmVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN0cmF0ZWd5UmVzb2x2ZXIoc3RyYXRlZ3ksIHN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5zdHJhdGVneSA9IHN0cmF0ZWd5O1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgIH1cclxuICAgIFN0cmF0ZWd5UmVzb2x2ZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChjb250YWluZXIsIGtleSkge1xyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5Lmluc3RhbmNlLCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzU3RyYXRlZ3kodGhpcy5zdHJhdGVneSwgU3RyYXRlZ3kuc2luZ2xldG9uLCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICB2YXIgc2luZ2xldG9uID0gY29udGFpbmVyLmludm9rZSh0aGlzLnN0YXRlKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHNpbmdsZXRvbjtcclxuICAgICAgICAgICAgdGhpcy5zdHJhdGVneSA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBzaW5nbGV0b247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5LnRyYW5zaWVudCwgdGhpcy5zdGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5pbnZva2UodGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5LmZ1bmN0aW9uLCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZShjb250YWluZXIsIGtleSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1N0cmF0ZWd5KHRoaXMuc3RyYXRlZ3ksIFN0cmF0ZWd5LmFycmF5LCB0aGlzLnN0YXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVswXS5nZXQoY29udGFpbmVyLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNTdHJhdGVneSh0aGlzLnN0cmF0ZWd5LCBTdHJhdGVneS5hbGlhcywgdGhpcy5zdGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQodGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJhdGVneTogJyArIHRoaXMuc3RyYXRlZ3kpO1xyXG4gICAgfTtcclxuICAgIFN0cmF0ZWd5UmVzb2x2ZXIgPSBfX2RlY29yYXRlKFtcclxuICAgICAgICByZXNvbHZlcigpLFxyXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyLCBPYmplY3RdKVxyXG4gICAgXSwgU3RyYXRlZ3lSZXNvbHZlcik7XHJcbiAgICByZXR1cm4gU3RyYXRlZ3lSZXNvbHZlcjtcclxufSgpKTtcclxudmFyIExhenkgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTGF6eShrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBMYXp5XzEgPSBMYXp5O1xyXG4gICAgTGF6eS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbnRhaW5lci5nZXQoX3RoaXMuX2tleSk7IH07XHJcbiAgICB9O1xyXG4gICAgTGF6eS5vZiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IExhenlfMShrZXkpO1xyXG4gICAgfTtcclxuICAgIHZhciBMYXp5XzE7XHJcbiAgICBMYXp5ID0gTGF6eV8xID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgcmVzb2x2ZXIoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXHJcbiAgICBdLCBMYXp5KTtcclxuICAgIHJldHVybiBMYXp5O1xyXG59KCkpO1xyXG52YXIgQWxsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFsbChrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBBbGxfMSA9IEFsbDtcclxuICAgIEFsbC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0QWxsKHRoaXMuX2tleSk7XHJcbiAgICB9O1xyXG4gICAgQWxsLm9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQWxsXzEoa2V5KTtcclxuICAgIH07XHJcbiAgICB2YXIgQWxsXzE7XHJcbiAgICBBbGwgPSBBbGxfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxyXG4gICAgXSwgQWxsKTtcclxuICAgIHJldHVybiBBbGw7XHJcbn0oKSk7XHJcbnZhciBPcHRpb25hbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPcHRpb25hbChrZXksIGNoZWNrUGFyZW50KSB7XHJcbiAgICAgICAgaWYgKGNoZWNrUGFyZW50ID09PSB2b2lkIDApIHsgY2hlY2tQYXJlbnQgPSB0cnVlOyB9XHJcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMuX2NoZWNrUGFyZW50ID0gY2hlY2tQYXJlbnQ7XHJcbiAgICB9XHJcbiAgICBPcHRpb25hbF8xID0gT3B0aW9uYWw7XHJcbiAgICBPcHRpb25hbC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIGlmIChjb250YWluZXIuaGFzUmVzb2x2ZXIodGhpcy5fa2V5LCB0aGlzLl9jaGVja1BhcmVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQodGhpcy5fa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgT3B0aW9uYWwub2YgPSBmdW5jdGlvbiAoa2V5LCBjaGVja1BhcmVudCkge1xyXG4gICAgICAgIGlmIChjaGVja1BhcmVudCA9PT0gdm9pZCAwKSB7IGNoZWNrUGFyZW50ID0gdHJ1ZTsgfVxyXG4gICAgICAgIHJldHVybiBuZXcgT3B0aW9uYWxfMShrZXksIGNoZWNrUGFyZW50KTtcclxuICAgIH07XHJcbiAgICB2YXIgT3B0aW9uYWxfMTtcclxuICAgIE9wdGlvbmFsID0gT3B0aW9uYWxfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIEJvb2xlYW5dKVxyXG4gICAgXSwgT3B0aW9uYWwpO1xyXG4gICAgcmV0dXJuIE9wdGlvbmFsO1xyXG59KCkpO1xyXG52YXIgUGFyZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhcmVudChrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBQYXJlbnRfMSA9IFBhcmVudDtcclxuICAgIFBhcmVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHJldHVybiBjb250YWluZXIucGFyZW50ID8gY29udGFpbmVyLnBhcmVudC5nZXQodGhpcy5fa2V5KSA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUGFyZW50Lm9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyZW50XzEoa2V5KTtcclxuICAgIH07XHJcbiAgICB2YXIgUGFyZW50XzE7XHJcbiAgICBQYXJlbnQgPSBQYXJlbnRfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxyXG4gICAgXSwgUGFyZW50KTtcclxuICAgIHJldHVybiBQYXJlbnQ7XHJcbn0oKSk7XHJcbnZhciBGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY3Rvcnkoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xyXG4gICAgfVxyXG4gICAgRmFjdG9yeV8xID0gRmFjdG9yeTtcclxuICAgIEZhY3RvcnkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICB2YXIgZm4gPSB0aGlzLl9rZXk7XHJcbiAgICAgICAgdmFyIHJlc29sdmVyID0gY29udGFpbmVyLmdldFJlc29sdmVyKGZuKTtcclxuICAgICAgICBpZiAocmVzb2x2ZXIgJiYgcmVzb2x2ZXIuc3RyYXRlZ3kgPT09IFN0cmF0ZWd5LmZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIGZuID0gcmVzb2x2ZXIuc3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN0ID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN0W19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5pbnZva2UoZm4sIHJlc3QpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgRmFjdG9yeS5vZiA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZhY3RvcnlfMShrZXkpO1xyXG4gICAgfTtcclxuICAgIHZhciBGYWN0b3J5XzE7XHJcbiAgICBGYWN0b3J5ID0gRmFjdG9yeV8xID0gX19kZWNvcmF0ZShbXHJcbiAgICAgICAgcmVzb2x2ZXIoKSxcclxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXHJcbiAgICBdLCBGYWN0b3J5KTtcclxuICAgIHJldHVybiBGYWN0b3J5O1xyXG59KCkpO1xyXG52YXIgTmV3SW5zdGFuY2UgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTmV3SW5zdGFuY2Uoa2V5KSB7XHJcbiAgICAgICAgdmFyIGR5bmFtaWNEZXBlbmRlbmNpZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBkeW5hbWljRGVwZW5kZW5jaWVzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLmFzS2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMuZHluYW1pY0RlcGVuZGVuY2llcyA9IGR5bmFtaWNEZXBlbmRlbmNpZXM7XHJcbiAgICB9XHJcbiAgICBOZXdJbnN0YW5jZV8xID0gTmV3SW5zdGFuY2U7XHJcbiAgICBOZXdJbnN0YW5jZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBkeW5hbWljRGVwZW5kZW5jaWVzID0gdGhpcy5keW5hbWljRGVwZW5kZW5jaWVzLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgPyB0aGlzLmR5bmFtaWNEZXBlbmRlbmNpZXMubWFwKGZ1bmN0aW9uIChkZXBlbmRlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVwZW5kZW5jeVsncHJvdG9jb2w6YXVyZWxpYTpyZXNvbHZlciddXHJcbiAgICAgICAgICAgICAgICAgICAgPyBkZXBlbmRlbmN5LmdldChjb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBjb250YWluZXIuZ2V0KGRlcGVuZGVuY3kpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICB2YXIgZm4gPSB0aGlzLmtleTtcclxuICAgICAgICB2YXIgcmVzb2x2ZXIgPSBjb250YWluZXIuZ2V0UmVzb2x2ZXIoZm4pO1xyXG4gICAgICAgIGlmIChyZXNvbHZlciAmJiByZXNvbHZlci5zdHJhdGVneSA9PT0gMykge1xyXG4gICAgICAgICAgICBmbiA9IHJlc29sdmVyLnN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBjb250YWluZXIuaW52b2tlKGZuLCBkeW5hbWljRGVwZW5kZW5jaWVzKTtcclxuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJJbnN0YW5jZSh0aGlzLmFzS2V5LCBpbnN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfTtcclxuICAgIE5ld0luc3RhbmNlLnByb3RvdHlwZS5hcyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLmFzS2V5ID0ga2V5O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIE5ld0luc3RhbmNlLm9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBkeW5hbWljRGVwZW5kZW5jaWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZHluYW1pY0RlcGVuZGVuY2llc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyAoTmV3SW5zdGFuY2VfMS5iaW5kLmFwcGx5KE5ld0luc3RhbmNlXzEsIFt2b2lkIDAsIGtleV0uY29uY2F0KGR5bmFtaWNEZXBlbmRlbmNpZXMpKSkoKTtcclxuICAgIH07XHJcbiAgICB2YXIgTmV3SW5zdGFuY2VfMTtcclxuICAgIE5ld0luc3RhbmNlID0gTmV3SW5zdGFuY2VfMSA9IF9fZGVjb3JhdGUoW1xyXG4gICAgICAgIHJlc29sdmVyKCksXHJcbiAgICAgICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXHJcbiAgICBdLCBOZXdJbnN0YW5jZSk7XHJcbiAgICByZXR1cm4gTmV3SW5zdGFuY2U7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGdldERlY29yYXRvckRlcGVuZGVuY2llcyh0YXJnZXQpIHtcclxuICAgIGF1dG9pbmplY3QodGFyZ2V0KTtcclxuICAgIHJldHVybiB0YXJnZXQuaW5qZWN0O1xyXG59XHJcbmZ1bmN0aW9uIGxhenkoa2V5VmFsdWUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBfa2V5LCBpbmRleCkge1xyXG4gICAgICAgIHZhciBpbmplY3QkJDEgPSBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXModGFyZ2V0KTtcclxuICAgICAgICBpbmplY3QkJDFbaW5kZXhdID0gTGF6eS5vZihrZXlWYWx1ZSk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGFsbChrZXlWYWx1ZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIF9rZXksIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGluamVjdCQkMSA9IGdldERlY29yYXRvckRlcGVuZGVuY2llcyh0YXJnZXQpO1xyXG4gICAgICAgIGluamVjdCQkMVtpbmRleF0gPSBBbGwub2Yoa2V5VmFsdWUpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBvcHRpb25hbChjaGVja1BhcmVudE9yVGFyZ2V0KSB7XHJcbiAgICBpZiAoY2hlY2tQYXJlbnRPclRhcmdldCA9PT0gdm9pZCAwKSB7IGNoZWNrUGFyZW50T3JUYXJnZXQgPSB0cnVlOyB9XHJcbiAgICB2YXIgZGVjbyA9IGZ1bmN0aW9uIChjaGVja1BhcmVudCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBfa2V5LCBpbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgaW5qZWN0JCQxID0gZ2V0RGVjb3JhdG9yRGVwZW5kZW5jaWVzKHRhcmdldCk7XHJcbiAgICAgICAgICAgIGluamVjdCQkMVtpbmRleF0gPSBPcHRpb25hbC5vZihpbmplY3QkJDFbaW5kZXhdLCBjaGVja1BhcmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBpZiAodHlwZW9mIGNoZWNrUGFyZW50T3JUYXJnZXQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgIHJldHVybiBkZWNvKGNoZWNrUGFyZW50T3JUYXJnZXQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlY28odHJ1ZSk7XHJcbn1cclxuZnVuY3Rpb24gcGFyZW50KHRhcmdldCwgX2tleSwgaW5kZXgpIHtcclxuICAgIHZhciBpbmplY3QkJDEgPSBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXModGFyZ2V0KTtcclxuICAgIGluamVjdCQkMVtpbmRleF0gPSBQYXJlbnQub2YoaW5qZWN0JCQxW2luZGV4XSk7XHJcbn1cclxuZnVuY3Rpb24gZmFjdG9yeShrZXlWYWx1ZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIF9rZXksIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGluamVjdCQkMSA9IGdldERlY29yYXRvckRlcGVuZGVuY2llcyh0YXJnZXQpO1xyXG4gICAgICAgIGluamVjdCQkMVtpbmRleF0gPSBGYWN0b3J5Lm9mKGtleVZhbHVlKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gbmV3SW5zdGFuY2UoYXNLZXlPclRhcmdldCkge1xyXG4gICAgdmFyIGR5bmFtaWNEZXBlbmRlbmNpZXMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgZHluYW1pY0RlcGVuZGVuY2llc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHZhciBkZWNvID0gZnVuY3Rpb24gKGFzS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIF9rZXksIGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmplY3QkJDEgPSBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXModGFyZ2V0KTtcclxuICAgICAgICAgICAgaW5qZWN0JCQxW2luZGV4XSA9IE5ld0luc3RhbmNlLm9mLmFwcGx5KE5ld0luc3RhbmNlLCBbaW5qZWN0JCQxW2luZGV4XV0uY29uY2F0KGR5bmFtaWNEZXBlbmRlbmNpZXMpKTtcclxuICAgICAgICAgICAgaWYgKCEhYXNLZXkpIHtcclxuICAgICAgICAgICAgICAgIGluamVjdCQkMVtpbmRleF0uYXMoYXNLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY28oYXNLZXlPclRhcmdldCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVjbygpO1xyXG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlS2V5KGtleSkge1xyXG4gICAgaWYgKGtleSA9PT0gbnVsbCB8fCBrZXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcigna2V5L3ZhbHVlIGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZC4gQXJlIHlvdSB0cnlpbmcgdG8gaW5qZWN0L3JlZ2lzdGVyIHNvbWV0aGluZyB0aGF0IGRvZXNuXFwndCBleGlzdCB3aXRoIERJPycpO1xyXG4gICAgfVxyXG59XHJcbnZhciBfZW1wdHlQYXJhbWV0ZXJzID0gT2JqZWN0LmZyZWV6ZShbXSk7XHJcbm1ldGFkYXRhLnJlZ2lzdHJhdGlvbiA9ICdhdXJlbGlhOnJlZ2lzdHJhdGlvbic7XHJcbm1ldGFkYXRhLmludm9rZXIgPSAnYXVyZWxpYTppbnZva2VyJztcclxudmFyIHJlc29sdmVyRGVjb3JhdGVzID0gcmVzb2x2ZXIuZGVjb3JhdGVzO1xyXG52YXIgSW52b2NhdGlvbkhhbmRsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW52b2NhdGlvbkhhbmRsZXIoZm4sIGludm9rZXIsIGRlcGVuZGVuY2llcykge1xyXG4gICAgICAgIHRoaXMuZm4gPSBmbjtcclxuICAgICAgICB0aGlzLmludm9rZXIgPSBpbnZva2VyO1xyXG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xyXG4gICAgfVxyXG4gICAgSW52b2NhdGlvbkhhbmRsZXIucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChjb250YWluZXIsIGR5bmFtaWNEZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICByZXR1cm4gZHluYW1pY0RlcGVuZGVuY2llcyAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdGhpcy5pbnZva2VyLmludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzKGNvbnRhaW5lciwgdGhpcy5mbiwgdGhpcy5kZXBlbmRlbmNpZXMsIGR5bmFtaWNEZXBlbmRlbmNpZXMpXHJcbiAgICAgICAgICAgIDogdGhpcy5pbnZva2VyLmludm9rZShjb250YWluZXIsIHRoaXMuZm4sIHRoaXMuZGVwZW5kZW5jaWVzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW52b2NhdGlvbkhhbmRsZXI7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzKGNvbnRhaW5lciwgZm4sIHN0YXRpY0RlcGVuZGVuY2llcywgZHluYW1pY0RlcGVuZGVuY2llcykge1xyXG4gICAgdmFyIGkgPSBzdGF0aWNEZXBlbmRlbmNpZXMubGVuZ3RoO1xyXG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XHJcbiAgICB2YXIgbG9va3VwO1xyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIGxvb2t1cCA9IHN0YXRpY0RlcGVuZGVuY2llc1tpXTtcclxuICAgICAgICBpZiAobG9va3VwID09PSBudWxsIHx8IGxvb2t1cCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29uc3RydWN0b3IgUGFyYW1ldGVyIHdpdGggaW5kZXggJyArXHJcbiAgICAgICAgICAgICAgICBpICtcclxuICAgICAgICAgICAgICAgICcgY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkLiBBcmUgeW91IHRyeWluZyB0byBpbmplY3QvcmVnaXN0ZXIgc29tZXRoaW5nIHRoYXQgZG9lc25cXCd0IGV4aXN0IHdpdGggREk/Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhcmdzW2ldID0gY29udGFpbmVyLmdldChsb29rdXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChkeW5hbWljRGVwZW5kZW5jaWVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBhcmdzID0gYXJncy5jb25jYXQoZHluYW1pY0RlcGVuZGVuY2llcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QoZm4sIGFyZ3MpO1xyXG59XHJcbnZhciBjbGFzc0ludm9rZXIgPSB7XHJcbiAgICBpbnZva2U6IGZ1bmN0aW9uIChjb250YWluZXIsIFR5cGUsIGRlcHMpIHtcclxuICAgICAgICB2YXIgaW5zdGFuY2VzID0gZGVwcy5tYXAoZnVuY3Rpb24gKGRlcCkgeyByZXR1cm4gY29udGFpbmVyLmdldChkZXApOyB9KTtcclxuICAgICAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QoVHlwZSwgaW5zdGFuY2VzKTtcclxuICAgIH0sXHJcbiAgICBpbnZva2VXaXRoRHluYW1pY0RlcGVuZGVuY2llczogaW52b2tlV2l0aER5bmFtaWNEZXBlbmRlbmNpZXNcclxufTtcclxuZnVuY3Rpb24gZ2V0RGVwZW5kZW5jaWVzKGYpIHtcclxuICAgIGlmICghZi5oYXNPd25Qcm9wZXJ0eSgnaW5qZWN0JykpIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGYuaW5qZWN0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmV0dXJuIGYuaW5qZWN0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZi5pbmplY3Q7XHJcbn1cclxudmFyIENvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb250YWluZXIoY29uZmlndXJhdGlvbikge1xyXG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uZmlndXJhdGlvbiA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcclxuICAgICAgICB0aGlzLl9vbkhhbmRsZXJDcmVhdGVkID0gY29uZmlndXJhdGlvbi5vbkhhbmRsZXJDcmVhdGVkO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZXJzID1cclxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5oYW5kbGVycyB8fCAoY29uZmlndXJhdGlvbi5oYW5kbGVycyA9IG5ldyBNYXAoKSk7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5tYWtlR2xvYmFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIENvbnRhaW5lci5pbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5zZXRIYW5kbGVyQ3JlYXRlZENhbGxiYWNrID0gZnVuY3Rpb24gKG9uSGFuZGxlckNyZWF0ZWQpIHtcclxuICAgICAgICB0aGlzLl9vbkhhbmRsZXJDcmVhdGVkID0gb25IYW5kbGVyQ3JlYXRlZDtcclxuICAgICAgICB0aGlzLl9jb25maWd1cmF0aW9uLm9uSGFuZGxlckNyZWF0ZWQgPSBvbkhhbmRsZXJDcmVhdGVkO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUucmVnaXN0ZXJJbnN0YW5jZSA9IGZ1bmN0aW9uIChrZXksIGluc3RhbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcihrZXksIG5ldyBTdHJhdGVneVJlc29sdmVyKDAsIGluc3RhbmNlID09PSB1bmRlZmluZWQgPyBrZXkgOiBpbnN0YW5jZSkpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUucmVnaXN0ZXJTaW5nbGV0b24gPSBmdW5jdGlvbiAoa2V5LCBmbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoa2V5LCBuZXcgU3RyYXRlZ3lSZXNvbHZlcigxLCBmbiA9PT0gdW5kZWZpbmVkID8ga2V5IDogZm4pKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlZ2lzdGVyVHJhbnNpZW50ID0gZnVuY3Rpb24gKGtleSwgZm4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKGtleSwgbmV3IFN0cmF0ZWd5UmVzb2x2ZXIoMiwgZm4gPT09IHVuZGVmaW5lZCA/IGtleSA6IGZuKSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5yZWdpc3RlckhhbmRsZXIgPSBmdW5jdGlvbiAoa2V5LCBoYW5kbGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcihrZXksIG5ldyBTdHJhdGVneVJlc29sdmVyKDMsIGhhbmRsZXIpKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlZ2lzdGVyQWxpYXMgPSBmdW5jdGlvbiAob3JpZ2luYWxLZXksIGFsaWFzS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcihhbGlhc0tleSwgbmV3IFN0cmF0ZWd5UmVzb2x2ZXIoNSwgb3JpZ2luYWxLZXkpKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLnJlZ2lzdGVyUmVzb2x2ZXIgPSBmdW5jdGlvbiAoa2V5LCByZXNvbHZlciQkMSkge1xyXG4gICAgICAgIHZhbGlkYXRlS2V5KGtleSk7XHJcbiAgICAgICAgdmFyIGFsbFJlc29sdmVycyA9IHRoaXMuX3Jlc29sdmVycztcclxuICAgICAgICB2YXIgcmVzdWx0ID0gYWxsUmVzb2x2ZXJzLmdldChrZXkpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBhbGxSZXNvbHZlcnMuc2V0KGtleSwgcmVzb2x2ZXIkJDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RyYXRlZ3kgPT09IDQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnN0YXRlLnB1c2gocmVzb2x2ZXIkJDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYWxsUmVzb2x2ZXJzLnNldChrZXksIG5ldyBTdHJhdGVneVJlc29sdmVyKDQsIFtyZXN1bHQsIHJlc29sdmVyJCQxXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZXIkJDE7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5hdXRvUmVnaXN0ZXIgPSBmdW5jdGlvbiAoa2V5LCBmbikge1xyXG4gICAgICAgIGZuID0gZm4gPT09IHVuZGVmaW5lZCA/IGtleSA6IGZuO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbiA9IG1ldGFkYXRhLmdldChtZXRhZGF0YS5yZWdpc3RyYXRpb24sIGZuKTtcclxuICAgICAgICAgICAgaWYgKHJlZ2lzdHJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKGtleSwgbmV3IFN0cmF0ZWd5UmVzb2x2ZXIoMSwgZm4pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLnJlZ2lzdGVyUmVzb2x2ZXIodGhpcywga2V5LCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoa2V5LCBuZXcgU3RyYXRlZ3lSZXNvbHZlcigwLCBmbikpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuYXV0b1JlZ2lzdGVyQWxsID0gZnVuY3Rpb24gKGZucykge1xyXG4gICAgICAgIHZhciBpID0gZm5zLmxlbmd0aDtcclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b1JlZ2lzdGVyKGZuc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB0aGlzLl9yZXNvbHZlcnMuZGVsZXRlKGtleSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5oYXNSZXNvbHZlciA9IGZ1bmN0aW9uIChrZXksIGNoZWNrUGFyZW50KSB7XHJcbiAgICAgICAgaWYgKGNoZWNrUGFyZW50ID09PSB2b2lkIDApIHsgY2hlY2tQYXJlbnQgPSBmYWxzZTsgfVxyXG4gICAgICAgIHZhbGlkYXRlS2V5KGtleSk7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9yZXNvbHZlcnMuaGFzKGtleSkgfHxcclxuICAgICAgICAgICAgKGNoZWNrUGFyZW50ICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuaGFzUmVzb2x2ZXIoa2V5LCBjaGVja1BhcmVudCkpKTtcclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLmdldFJlc29sdmVyID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNvbHZlcnMuZ2V0KGtleSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcclxuICAgICAgICBpZiAoa2V5ID09PSBDb250YWluZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNvbHZlckRlY29yYXRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBrZXkuZ2V0KHRoaXMsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXNvbHZlciQkMSA9IHRoaXMuX3Jlc29sdmVycy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAocmVzb2x2ZXIkJDEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dG9SZWdpc3RlcihrZXkpLmdldCh0aGlzLCBrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyYXRpb24gPSBtZXRhZGF0YS5nZXQobWV0YWRhdGEucmVnaXN0cmF0aW9uLCBrZXkpO1xyXG4gICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5yZWdpc3RlclJlc29sdmVyKHRoaXMsIGtleSwga2V5KS5nZXQodGhpcywga2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyJCQxLmdldCh0aGlzLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuX2dldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgcmVzb2x2ZXIkJDEgPSB0aGlzLl9yZXNvbHZlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyJCQxID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdXRvUmVnaXN0ZXIoa2V5KS5nZXQodGhpcywga2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuX2dldChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZXIkJDEuZ2V0KHRoaXMsIGtleSk7XHJcbiAgICB9O1xyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcclxuICAgICAgICB2YXIgcmVzb2x2ZXIkJDEgPSB0aGlzLl9yZXNvbHZlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyJCQxID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2VtcHR5UGFyYW1ldGVycztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0QWxsKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNvbHZlciQkMS5zdHJhdGVneSA9PT0gNCkge1xyXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSByZXNvbHZlciQkMS5zdGF0ZTtcclxuICAgICAgICAgICAgdmFyIGkgPSBzdGF0ZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gbmV3IEFycmF5KGkpO1xyXG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzW2ldID0gc3RhdGVbaV0uZ2V0KHRoaXMsIGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbcmVzb2x2ZXIkJDEuZ2V0KHRoaXMsIGtleSldO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbmV3IENvbnRhaW5lcih0aGlzLl9jb25maWd1cmF0aW9uKTtcclxuICAgICAgICBjaGlsZC5yb290ID0gdGhpcy5yb290O1xyXG4gICAgICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgfTtcclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGZuLCBkeW5hbWljRGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSB0aGlzLl9oYW5kbGVycy5nZXQoZm4pO1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gdGhpcy5fY3JlYXRlSW52b2NhdGlvbkhhbmRsZXIoZm4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMuc2V0KGZuLCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlci5pbnZva2UodGhpcywgZHluYW1pY0RlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBZ2dyZWdhdGVFcnJvcihcIkVycm9yIGludm9raW5nIFwiICsgZm4ubmFtZSArIFwiLiBDaGVjayB0aGUgaW5uZXIgZXJyb3IgZm9yIGRldGFpbHMuXCIsIGUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDb250YWluZXIucHJvdG90eXBlLl9jcmVhdGVJbnZvY2F0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHZhciBkZXBlbmRlbmNpZXM7XHJcbiAgICAgICAgaWYgKGZuLmluamVjdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5nZXRPd24obWV0YWRhdGEucGFyYW1UeXBlcywgZm4pIHx8IF9lbXB0eVBhcmFtZXRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGN0b3IgPSBmbjtcclxuICAgICAgICAgICAgd2hpbGUgKHR5cGVvZiBjdG9yID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMucHVzaC5hcHBseShkZXBlbmRlbmNpZXMsIGdldERlcGVuZGVuY2llcyhjdG9yKSk7XHJcbiAgICAgICAgICAgICAgICBjdG9yID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGN0b3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbnZva2VyID0gbWV0YWRhdGEuZ2V0T3duKG1ldGFkYXRhLmludm9rZXIsIGZuKSB8fCBjbGFzc0ludm9rZXI7XHJcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBuZXcgSW52b2NhdGlvbkhhbmRsZXIoZm4sIGludm9rZXIsIGRlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uSGFuZGxlckNyZWF0ZWQgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IHRoaXMuX29uSGFuZGxlckNyZWF0ZWQoaGFuZGxlcilcclxuICAgICAgICAgICAgOiBoYW5kbGVyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb250YWluZXI7XHJcbn0oKSk7XG5cbmZ1bmN0aW9uIGludm9rZXIodmFsdWUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgbWV0YWRhdGEuZGVmaW5lKG1ldGFkYXRhLmludm9rZXIsIHZhbHVlLCB0YXJnZXQpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBpbnZva2VBc0ZhY3RvcnkocG90ZW50aWFsVGFyZ2V0KSB7XHJcbiAgICB2YXIgZGVjbyA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICBtZXRhZGF0YS5kZWZpbmUobWV0YWRhdGEuaW52b2tlciwgRmFjdG9yeUludm9rZXIuaW5zdGFuY2UsIHRhcmdldCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHBvdGVudGlhbFRhcmdldCA/IGRlY28ocG90ZW50aWFsVGFyZ2V0KSA6IGRlY287XHJcbn1cclxudmFyIEZhY3RvcnlJbnZva2VyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY3RvcnlJbnZva2VyKCkge1xyXG4gICAgfVxyXG4gICAgRmFjdG9yeUludm9rZXIucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uIChjb250YWluZXIsIGZuLCBkZXBlbmRlbmNpZXMpIHtcclxuICAgICAgICB2YXIgaSA9IGRlcGVuZGVuY2llcy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICBhcmdzW2ldID0gY29udGFpbmVyLmdldChkZXBlbmRlbmNpZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm4uYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICBGYWN0b3J5SW52b2tlci5wcm90b3R5cGUuaW52b2tlV2l0aER5bmFtaWNEZXBlbmRlbmNpZXMgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBmbiwgc3RhdGljRGVwZW5kZW5jaWVzLCBkeW5hbWljRGVwZW5kZW5jaWVzKSB7XHJcbiAgICAgICAgdmFyIGkgPSBzdGF0aWNEZXBlbmRlbmNpZXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgYXJnc1tpXSA9IGNvbnRhaW5lci5nZXQoc3RhdGljRGVwZW5kZW5jaWVzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGR5bmFtaWNEZXBlbmRlbmNpZXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBhcmdzID0gYXJncy5jb25jYXQoZHluYW1pY0RlcGVuZGVuY2llcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmbi5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGYWN0b3J5SW52b2tlcjtcclxufSgpKTtcclxuRmFjdG9yeUludm9rZXIuaW5zdGFuY2UgPSBuZXcgRmFjdG9yeUludm9rZXIoKTtcblxuZnVuY3Rpb24gcmVnaXN0cmF0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIG1ldGFkYXRhLmRlZmluZShtZXRhZGF0YS5yZWdpc3RyYXRpb24sIHZhbHVlLCB0YXJnZXQpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiB0cmFuc2llbnQoa2V5KSB7XHJcbiAgICByZXR1cm4gcmVnaXN0cmF0aW9uKG5ldyBUcmFuc2llbnRSZWdpc3RyYXRpb24oa2V5KSk7XHJcbn1cclxuZnVuY3Rpb24gc2luZ2xldG9uKGtleU9yUmVnaXN0ZXJJbkNoaWxkLCByZWdpc3RlckluQ2hpbGQpIHtcclxuICAgIGlmIChyZWdpc3RlckluQ2hpbGQgPT09IHZvaWQgMCkgeyByZWdpc3RlckluQ2hpbGQgPSBmYWxzZTsgfVxyXG4gICAgcmV0dXJuIHJlZ2lzdHJhdGlvbihuZXcgU2luZ2xldG9uUmVnaXN0cmF0aW9uKGtleU9yUmVnaXN0ZXJJbkNoaWxkLCByZWdpc3RlckluQ2hpbGQpKTtcclxufVxyXG52YXIgVHJhbnNpZW50UmVnaXN0cmF0aW9uID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRyYW5zaWVudFJlZ2lzdHJhdGlvbihrZXkpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICBUcmFuc2llbnRSZWdpc3RyYXRpb24ucHJvdG90eXBlLnJlZ2lzdGVyUmVzb2x2ZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBrZXksIGZuKSB7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nUmVzb2x2ZXIgPSBjb250YWluZXIuZ2V0UmVzb2x2ZXIodGhpcy5fa2V5IHx8IGtleSk7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUmVzb2x2ZXIgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IGNvbnRhaW5lci5yZWdpc3RlclRyYW5zaWVudCgodGhpcy5fa2V5IHx8IGtleSksIGZuKVxyXG4gICAgICAgICAgICA6IGV4aXN0aW5nUmVzb2x2ZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zaWVudFJlZ2lzdHJhdGlvbjtcclxufSgpKTtcclxudmFyIFNpbmdsZXRvblJlZ2lzdHJhdGlvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaW5nbGV0b25SZWdpc3RyYXRpb24oa2V5T3JSZWdpc3RlckluQ2hpbGQsIHJlZ2lzdGVySW5DaGlsZCkge1xyXG4gICAgICAgIGlmIChyZWdpc3RlckluQ2hpbGQgPT09IHZvaWQgMCkgeyByZWdpc3RlckluQ2hpbGQgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmICh0eXBlb2Yga2V5T3JSZWdpc3RlckluQ2hpbGQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpc3RlckluQ2hpbGQgPSBrZXlPclJlZ2lzdGVySW5DaGlsZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleSA9IGtleU9yUmVnaXN0ZXJJbkNoaWxkO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpc3RlckluQ2hpbGQgPSByZWdpc3RlckluQ2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU2luZ2xldG9uUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5yZWdpc3RlclJlc29sdmVyID0gZnVuY3Rpb24gKGNvbnRhaW5lciwga2V5LCBmbikge1xyXG4gICAgICAgIHZhciB0YXJnZXRDb250YWluZXIgPSB0aGlzLl9yZWdpc3RlckluQ2hpbGQgPyBjb250YWluZXIgOiBjb250YWluZXIucm9vdDtcclxuICAgICAgICB2YXIgZXhpc3RpbmdSZXNvbHZlciA9IHRhcmdldENvbnRhaW5lci5nZXRSZXNvbHZlcih0aGlzLl9rZXkgfHwga2V5KTtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdSZXNvbHZlciA9PT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdGFyZ2V0Q29udGFpbmVyLnJlZ2lzdGVyU2luZ2xldG9uKHRoaXMuX2tleSB8fCBrZXksIGZuKVxyXG4gICAgICAgICAgICA6IGV4aXN0aW5nUmVzb2x2ZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNpbmdsZXRvblJlZ2lzdHJhdGlvbjtcclxufSgpKTtcblxuZXhwb3J0IHsgX2VtcHR5UGFyYW1ldGVycywgSW52b2NhdGlvbkhhbmRsZXIsIENvbnRhaW5lciwgYXV0b2luamVjdCwgaW5qZWN0LCBpbnZva2VyLCBpbnZva2VBc0ZhY3RvcnksIEZhY3RvcnlJbnZva2VyLCByZWdpc3RyYXRpb24sIHRyYW5zaWVudCwgc2luZ2xldG9uLCBUcmFuc2llbnRSZWdpc3RyYXRpb24sIFNpbmdsZXRvblJlZ2lzdHJhdGlvbiwgcmVzb2x2ZXIsIFN0cmF0ZWd5LCBTdHJhdGVneVJlc29sdmVyLCBMYXp5LCBBbGwsIE9wdGlvbmFsLCBQYXJlbnQsIEZhY3RvcnksIE5ld0luc3RhbmNlLCBnZXREZWNvcmF0b3JEZXBlbmRlbmNpZXMsIGxhenksIGFsbCwgb3B0aW9uYWwsIHBhcmVudCwgZmFjdG9yeSwgbmV3SW5zdGFuY2UgfTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3U8n\n");

/***/ }),

/***/ "aurelia-dynamic-html":
/*!*********************************************************************************!*\
  !*** ./node_modules/aurelia-dynamic-html/dist/commonjs/aurelia-dynamic-html.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst aurelia_pal_1 = __webpack_require__(/*! aurelia-pal */ \"70NS\");\nfunction configure(config) {\n    config.globalResources('./dynamic-html');\n}\nexports.configure = configure;\n__export(__webpack_require__(/*! ./dynamic-html */ \"aurelia-dynamic-html/dynamic-html\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1keW5hbWljLWh0bWwuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXVyZWxpYS1keW5hbWljLWh0bWwvZGlzdC9jb21tb25qcy9hdXJlbGlhLWR5bmFtaWMtaHRtbC5qcz9kY2Y1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGF1cmVsaWFfcGFsXzEgPSByZXF1aXJlKFwiYXVyZWxpYS1wYWxcIik7XG5mdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG4gICAgY29uZmlnLmdsb2JhbFJlc291cmNlcyhhdXJlbGlhX3BhbF8xLlBMQVRGT1JNLm1vZHVsZU5hbWUoXCIuL2R5bmFtaWMtaHRtbFwiKSk7XG59XG5leHBvcnRzLmNvbmZpZ3VyZSA9IGNvbmZpZ3VyZTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL2R5bmFtaWMtaHRtbFwiKSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///aurelia-dynamic-html\n");

/***/ }),

/***/ "aurelia-dynamic-html/dynamic-html":
/*!*************************************************************************!*\
  !*** ./node_modules/aurelia-dynamic-html/dist/commonjs/dynamic-html.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst aurelia_binding_1 = __webpack_require__(/*! aurelia-binding */ \"X5gX\");\nconst aurelia_dependency_injection_1 = __webpack_require__(/*! aurelia-dependency-injection */ \"3U8n\");\nconst aurelia_logging_1 = __webpack_require__(/*! aurelia-logging */ \"MP1E\");\nconst aurelia_task_queue_1 = __webpack_require__(/*! aurelia-task-queue */ \"K/SW\");\nconst aurelia_templating_1 = __webpack_require__(/*! aurelia-templating */ \"hij8\");\nconst logger = aurelia_logging_1.getLogger(\"dynamic-html\");\nlet DynamicHtml = class DynamicHtml {\n    constructor(el, tq, container, viewCompiler) {\n        this.el = el;\n        this.tq = tq;\n        this.container = container;\n        this.viewCompiler = viewCompiler;\n        this.html = this.context = this.slot = this.bindingContext = this.overrideContext = null;\n        this.renderErrors = this.isAttached = this.isBound = this.isCompiled = this.isInitialized = false;\n        this.isCleanedUp = true;\n    }\n    bind(bindingContext, overrideContext) {\n        this.isBound = true;\n        this.bindingContext = this.context || bindingContext.context || bindingContext;\n        this.overrideContext = aurelia_binding_1.createOverrideContext(bindingContext, overrideContext);\n        this.htmlChanged(this.html);\n    }\n    unbind() {\n        this.isBound = false;\n        this.bindingContext = null;\n        this.overrideContext = null;\n    }\n    attached() {\n        this.isAttached = true;\n        this.isInitialized = true;\n        this.slot = new aurelia_templating_1.ViewSlot(this.el.firstElementChild || this.el, true);\n        this.tq.queueMicroTask(() => {\n            this.tryCompile();\n        });\n    }\n    detached() {\n        this.isAttached = false;\n        if (this.isCompiled) {\n            this.cleanUp();\n        }\n        this.slot = null;\n    }\n    htmlChanged(newValue, __) {\n        if ((newValue === null || newValue === undefined) && !this.isCleanedUp) {\n            this.cleanUp();\n        }\n        else if (this.isBound || this.isInitialized) {\n            this.tq.queueMicroTask(() => {\n                this.tryCompile();\n            });\n        }\n    }\n    contextChanged(newValue, _) {\n        if ((newValue === null || newValue === undefined) && !!this.overrideContext) {\n            this.bindingContext = this.overrideContext.bindingContext;\n        }\n        else {\n            this.bindingContext = newValue;\n        }\n        if (this.isBound || this.isInitialized) {\n            this.tq.queueMicroTask(() => {\n                this.tryCompile();\n            });\n        }\n    }\n    tryCompile() {\n        if (this.isAttached) {\n            if (!this.isCleanedUp) {\n                this.cleanUp();\n            }\n            try {\n                this.tq.queueMicroTask(() => {\n                    this.compile();\n                });\n            }\n            catch (e) {\n                logger.warn(e.message);\n                if (this.renderErrors) {\n                    this.tq.queueMicroTask(() => {\n                        this.compile(`<template>${e.message}</template>`);\n                    });\n                }\n            }\n        }\n    }\n    cleanUp() {\n        this.isCompiled = false;\n        logger.debug(\"Cleaning up\");\n        const slot = this.slot;\n        try {\n            slot.detached();\n        }\n        catch (e) {\n            logger.error(e.message);\n        }\n        try {\n            slot.unbind();\n        }\n        catch (e) {\n            logger.error(e.message);\n        }\n        try {\n            slot.removeAll();\n        }\n        catch (e) {\n            logger.error(e.message);\n        }\n        this.isCleanedUp = true;\n    }\n    compile(message) {\n        if (!this.isCleanedUp) {\n            this.cleanUp();\n        }\n        if ((this.html === null || this.html === undefined) && message === undefined) {\n            logger.debug(\"Skipping compilation because no html value is set\");\n            return;\n        }\n        this.isCleanedUp = false;\n        const template = `<template>${message || this.html}</template>`;\n        logger.debug(\"Compiling\", template, this.bindingContext);\n        const viewResources = this.container.get(aurelia_templating_1.ViewResources);\n        const childContainer = this.container.createChild();\n        const factory = this.viewCompiler.compile(template, viewResources);\n        const view = factory.create(childContainer);\n        const slot = this.slot;\n        slot.add(view);\n        slot.bind(this.bindingContext, this.overrideContext);\n        slot.attached();\n        this.dispatchCompiledEvent();\n        this.isCompiled = true;\n    }\n    dispatchCompiledEvent() {\n        const event = new CustomEvent(\"compiled\", {\n            cancelable: true,\n            bubbles: true,\n            detail: this\n        });\n        this.el.dispatchEvent(event);\n    }\n};\n__decorate([\n    aurelia_templating_1.bindable({ defaultBindingMode: aurelia_binding_1.bindingMode.toView }),\n    __metadata(\"design:type\", Object)\n], DynamicHtml.prototype, \"html\", void 0);\n__decorate([\n    aurelia_templating_1.bindable({ defaultBindingMode: aurelia_binding_1.bindingMode.toView }),\n    __metadata(\"design:type\", Object)\n], DynamicHtml.prototype, \"context\", void 0);\n__decorate([\n    aurelia_templating_1.bindable({ defaultBindingMode: aurelia_binding_1.bindingMode.toView }),\n    __metadata(\"design:type\", Boolean)\n], DynamicHtml.prototype, \"renderErrors\", void 0);\nDynamicHtml = __decorate([\n    aurelia_templating_1.customElement(\"dynamic-html\"),\n    aurelia_templating_1.inlineView(\"<template><div></div></template>\"),\n    __metadata(\"design:paramtypes\", [Element, aurelia_task_queue_1.TaskQueue, aurelia_dependency_injection_1.Container, aurelia_templating_1.ViewCompiler])\n], DynamicHtml);\nexports.DynamicHtml = DynamicHtml;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1keW5hbWljLWh0bWwvZHluYW1pYy1odG1sLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F1cmVsaWEtZHluYW1pYy1odG1sL2Rpc3QvY29tbW9uanMvZHluYW1pYy1odG1sLmpzPzlmMDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgYXVyZWxpYV9iaW5kaW5nXzEgPSByZXF1aXJlKFwiYXVyZWxpYS1iaW5kaW5nXCIpO1xuY29uc3QgYXVyZWxpYV9kZXBlbmRlbmN5X2luamVjdGlvbl8xID0gcmVxdWlyZShcImF1cmVsaWEtZGVwZW5kZW5jeS1pbmplY3Rpb25cIik7XG5jb25zdCBhdXJlbGlhX2xvZ2dpbmdfMSA9IHJlcXVpcmUoXCJhdXJlbGlhLWxvZ2dpbmdcIik7XG5jb25zdCBhdXJlbGlhX3Rhc2tfcXVldWVfMSA9IHJlcXVpcmUoXCJhdXJlbGlhLXRhc2stcXVldWVcIik7XG5jb25zdCBhdXJlbGlhX3RlbXBsYXRpbmdfMSA9IHJlcXVpcmUoXCJhdXJlbGlhLXRlbXBsYXRpbmdcIik7XG5jb25zdCBsb2dnZXIgPSBhdXJlbGlhX2xvZ2dpbmdfMS5nZXRMb2dnZXIoXCJkeW5hbWljLWh0bWxcIik7XG5sZXQgRHluYW1pY0h0bWwgPSBjbGFzcyBEeW5hbWljSHRtbCB7XG4gICAgY29uc3RydWN0b3IoZWwsIHRxLCBjb250YWluZXIsIHZpZXdDb21waWxlcikge1xuICAgICAgICB0aGlzLmVsID0gZWw7XG4gICAgICAgIHRoaXMudHEgPSB0cTtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMudmlld0NvbXBpbGVyID0gdmlld0NvbXBpbGVyO1xuICAgICAgICB0aGlzLmh0bWwgPSB0aGlzLmNvbnRleHQgPSB0aGlzLnNsb3QgPSB0aGlzLmJpbmRpbmdDb250ZXh0ID0gdGhpcy5vdmVycmlkZUNvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlckVycm9ycyA9IHRoaXMuaXNBdHRhY2hlZCA9IHRoaXMuaXNCb3VuZCA9IHRoaXMuaXNDb21waWxlZCA9IHRoaXMuaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQ2xlYW5lZFVwID0gdHJ1ZTtcbiAgICB9XG4gICAgYmluZChiaW5kaW5nQ29udGV4dCwgb3ZlcnJpZGVDb250ZXh0KSB7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgIHRoaXMuYmluZGluZ0NvbnRleHQgPSB0aGlzLmNvbnRleHQgfHwgYmluZGluZ0NvbnRleHQuY29udGV4dCB8fCBiaW5kaW5nQ29udGV4dDtcbiAgICAgICAgdGhpcy5vdmVycmlkZUNvbnRleHQgPSBhdXJlbGlhX2JpbmRpbmdfMS5jcmVhdGVPdmVycmlkZUNvbnRleHQoYmluZGluZ0NvbnRleHQsIG92ZXJyaWRlQ29udGV4dCk7XG4gICAgICAgIHRoaXMuaHRtbENoYW5nZWQodGhpcy5odG1sKTtcbiAgICB9XG4gICAgdW5iaW5kKCkge1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMub3ZlcnJpZGVDb250ZXh0ID0gbnVsbDtcbiAgICB9XG4gICAgYXR0YWNoZWQoKSB7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2xvdCA9IG5ldyBhdXJlbGlhX3RlbXBsYXRpbmdfMS5WaWV3U2xvdCh0aGlzLmVsLmZpcnN0RWxlbWVudENoaWxkIHx8IHRoaXMuZWwsIHRydWUpO1xuICAgICAgICB0aGlzLnRxLnF1ZXVlTWljcm9UYXNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJ5Q29tcGlsZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGV0YWNoZWQoKSB7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5pc0NvbXBpbGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFuVXAoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNsb3QgPSBudWxsO1xuICAgIH1cbiAgICBodG1sQ2hhbmdlZChuZXdWYWx1ZSwgX18pIHtcbiAgICAgICAgaWYgKChuZXdWYWx1ZSA9PT0gbnVsbCB8fCBuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSAmJiAhdGhpcy5pc0NsZWFuZWRVcCkge1xuICAgICAgICAgICAgdGhpcy5jbGVhblVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc0JvdW5kIHx8IHRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy50cS5xdWV1ZU1pY3JvVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlDb21waWxlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb250ZXh0Q2hhbmdlZChuZXdWYWx1ZSwgXykge1xuICAgICAgICBpZiAoKG5ld1ZhbHVlID09PSBudWxsIHx8IG5ld1ZhbHVlID09PSB1bmRlZmluZWQpICYmICEhdGhpcy5vdmVycmlkZUNvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZ0NvbnRleHQgPSB0aGlzLm92ZXJyaWRlQ29udGV4dC5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZ0NvbnRleHQgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0JvdW5kIHx8IHRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy50cS5xdWV1ZU1pY3JvVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlDb21waWxlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cnlDb21waWxlKCkge1xuICAgICAgICBpZiAodGhpcy5pc0F0dGFjaGVkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDbGVhbmVkVXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFuVXAoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cS5xdWV1ZU1pY3JvVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlckVycm9ycykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRxLnF1ZXVlTWljcm9UYXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZShgPHRlbXBsYXRlPiR7ZS5tZXNzYWdlfTwvdGVtcGxhdGU+YCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhblVwKCkge1xuICAgICAgICB0aGlzLmlzQ29tcGlsZWQgPSBmYWxzZTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiQ2xlYW5pbmcgdXBcIik7XG4gICAgICAgIGNvbnN0IHNsb3QgPSB0aGlzLnNsb3Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzbG90LmRldGFjaGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzbG90LnVuYmluZCgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2xvdC5yZW1vdmVBbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0NsZWFuZWRVcCA9IHRydWU7XG4gICAgfVxuICAgIGNvbXBpbGUobWVzc2FnZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNDbGVhbmVkVXApIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYW5VcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgodGhpcy5odG1sID09PSBudWxsIHx8IHRoaXMuaHRtbCA9PT0gdW5kZWZpbmVkKSAmJiBtZXNzYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlNraXBwaW5nIGNvbXBpbGF0aW9uIGJlY2F1c2Ugbm8gaHRtbCB2YWx1ZSBpcyBzZXRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0NsZWFuZWRVcCA9IGZhbHNlO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGA8dGVtcGxhdGU+JHttZXNzYWdlIHx8IHRoaXMuaHRtbH08L3RlbXBsYXRlPmA7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkNvbXBpbGluZ1wiLCB0ZW1wbGF0ZSwgdGhpcy5iaW5kaW5nQ29udGV4dCk7XG4gICAgICAgIGNvbnN0IHZpZXdSZXNvdXJjZXMgPSB0aGlzLmNvbnRhaW5lci5nZXQoYXVyZWxpYV90ZW1wbGF0aW5nXzEuVmlld1Jlc291cmNlcyk7XG4gICAgICAgIGNvbnN0IGNoaWxkQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IHRoaXMudmlld0NvbXBpbGVyLmNvbXBpbGUodGVtcGxhdGUsIHZpZXdSZXNvdXJjZXMpO1xuICAgICAgICBjb25zdCB2aWV3ID0gZmFjdG9yeS5jcmVhdGUoY2hpbGRDb250YWluZXIpO1xuICAgICAgICBjb25zdCBzbG90ID0gdGhpcy5zbG90O1xuICAgICAgICBzbG90LmFkZCh2aWV3KTtcbiAgICAgICAgc2xvdC5iaW5kKHRoaXMuYmluZGluZ0NvbnRleHQsIHRoaXMub3ZlcnJpZGVDb250ZXh0KTtcbiAgICAgICAgc2xvdC5hdHRhY2hlZCgpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoQ29tcGlsZWRFdmVudCgpO1xuICAgICAgICB0aGlzLmlzQ29tcGlsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBkaXNwYXRjaENvbXBpbGVkRXZlbnQoKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiY29tcGlsZWRcIiwge1xuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBkZXRhaWw6IHRoaXNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWwuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIGF1cmVsaWFfdGVtcGxhdGluZ18xLmJpbmRhYmxlKHsgZGVmYXVsdEJpbmRpbmdNb2RlOiBhdXJlbGlhX2JpbmRpbmdfMS5iaW5kaW5nTW9kZS50b1ZpZXcgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIER5bmFtaWNIdG1sLnByb3RvdHlwZSwgXCJodG1sXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBhdXJlbGlhX3RlbXBsYXRpbmdfMS5iaW5kYWJsZSh7IGRlZmF1bHRCaW5kaW5nTW9kZTogYXVyZWxpYV9iaW5kaW5nXzEuYmluZGluZ01vZGUudG9WaWV3IH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBEeW5hbWljSHRtbC5wcm90b3R5cGUsIFwiY29udGV4dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYXVyZWxpYV90ZW1wbGF0aW5nXzEuYmluZGFibGUoeyBkZWZhdWx0QmluZGluZ01vZGU6IGF1cmVsaWFfYmluZGluZ18xLmJpbmRpbmdNb2RlLnRvVmlldyB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIER5bmFtaWNIdG1sLnByb3RvdHlwZSwgXCJyZW5kZXJFcnJvcnNcIiwgdm9pZCAwKTtcbkR5bmFtaWNIdG1sID0gX19kZWNvcmF0ZShbXG4gICAgYXVyZWxpYV90ZW1wbGF0aW5nXzEuY3VzdG9tRWxlbWVudChcImR5bmFtaWMtaHRtbFwiKSxcbiAgICBhdXJlbGlhX3RlbXBsYXRpbmdfMS5pbmxpbmVWaWV3KFwiPHRlbXBsYXRlPjxkaXY+PC9kaXY+PC90ZW1wbGF0ZT5cIiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtFbGVtZW50LCBhdXJlbGlhX3Rhc2tfcXVldWVfMS5UYXNrUXVldWUsIGF1cmVsaWFfZGVwZW5kZW5jeV9pbmplY3Rpb25fMS5Db250YWluZXIsIGF1cmVsaWFfdGVtcGxhdGluZ18xLlZpZXdDb21waWxlcl0pXG5dLCBEeW5hbWljSHRtbCk7XG5leHBvcnRzLkR5bmFtaWNIdG1sID0gRHluYW1pY0h0bWw7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///aurelia-dynamic-html/dynamic-html\n");

/***/ }),

/***/ "aurelia-event-aggregator":
/*!***********************************************************************************************!*\
  !*** ./node_modules/aurelia-event-aggregator/dist/native-modules/aurelia-event-aggregator.js ***!
  \***********************************************************************************************/
/*! exports provided: EventAggregator, includeEventsIn, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EventAggregator\", function() { return EventAggregator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"includeEventsIn\", function() { return includeEventsIn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var aurelia_logging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-logging */ \"MP1E\");\n\n\n\n\nvar logger = aurelia_logging__WEBPACK_IMPORTED_MODULE_0__[\"getLogger\"]('event-aggregator');\n\nvar Handler = function () {\n  function Handler(messageType, callback) {\n    \n\n    this.messageType = messageType;\n    this.callback = callback;\n  }\n\n  Handler.prototype.handle = function handle(message) {\n    if (message instanceof this.messageType) {\n      this.callback.call(null, message);\n    }\n  };\n\n  return Handler;\n}();\n\nfunction invokeCallback(callback, data, event) {\n  try {\n    callback(data, event);\n  } catch (e) {\n    logger.error(e);\n  }\n}\n\nfunction invokeHandler(handler, data) {\n  try {\n    handler.handle(data);\n  } catch (e) {\n    logger.error(e);\n  }\n}\n\nvar EventAggregator = function () {\n  function EventAggregator() {\n    \n\n    this.eventLookup = {};\n    this.messageHandlers = [];\n  }\n\n  EventAggregator.prototype.publish = function publish(event, data) {\n    var subscribers = void 0;\n    var i = void 0;\n\n    if (!event) {\n      throw new Error('Event was invalid.');\n    }\n\n    if (typeof event === 'string') {\n      subscribers = this.eventLookup[event];\n      if (subscribers) {\n        subscribers = subscribers.slice();\n        i = subscribers.length;\n\n        while (i--) {\n          invokeCallback(subscribers[i], data, event);\n        }\n      }\n    } else {\n      subscribers = this.messageHandlers.slice();\n      i = subscribers.length;\n\n      while (i--) {\n        invokeHandler(subscribers[i], event);\n      }\n    }\n  };\n\n  EventAggregator.prototype.subscribe = function subscribe(event, callback) {\n    var handler = void 0;\n    var subscribers = void 0;\n\n    if (!event) {\n      throw new Error('Event channel/type was invalid.');\n    }\n\n    if (typeof event === 'string') {\n      handler = callback;\n      subscribers = this.eventLookup[event] || (this.eventLookup[event] = []);\n    } else {\n      handler = new Handler(event, callback);\n      subscribers = this.messageHandlers;\n    }\n\n    subscribers.push(handler);\n\n    return {\n      dispose: function dispose() {\n        var idx = subscribers.indexOf(handler);\n        if (idx !== -1) {\n          subscribers.splice(idx, 1);\n        }\n      }\n    };\n  };\n\n  EventAggregator.prototype.subscribeOnce = function subscribeOnce(event, callback) {\n    var sub = this.subscribe(event, function (a, b) {\n      sub.dispose();\n      return callback(a, b);\n    });\n\n    return sub;\n  };\n\n  return EventAggregator;\n}();\n\nfunction includeEventsIn(obj) {\n  var ea = new EventAggregator();\n\n  obj.subscribeOnce = function (event, callback) {\n    return ea.subscribeOnce(event, callback);\n  };\n\n  obj.subscribe = function (event, callback) {\n    return ea.subscribe(event, callback);\n  };\n\n  obj.publish = function (event, data) {\n    ea.publish(event, data);\n  };\n\n  return ea;\n}\n\nfunction configure(config) {\n  config.instance(EventAggregator, includeEventsIn(config.aurelia));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1ldmVudC1hZ2dyZWdhdG9yLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F1cmVsaWEtZXZlbnQtYWdncmVnYXRvci9kaXN0L25hdGl2ZS1tb2R1bGVzL2F1cmVsaWEtZXZlbnQtYWdncmVnYXRvci5qcz9jYTk1Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgKiBhcyBMb2dNYW5hZ2VyIGZyb20gJ2F1cmVsaWEtbG9nZ2luZyc7XG5cbnZhciBsb2dnZXIgPSBMb2dNYW5hZ2VyLmdldExvZ2dlcignZXZlbnQtYWdncmVnYXRvcicpO1xuXG52YXIgSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSGFuZGxlcihtZXNzYWdlVHlwZSwgY2FsbGJhY2spIHtcbiAgICBcblxuICAgIHRoaXMubWVzc2FnZVR5cGUgPSBtZXNzYWdlVHlwZTtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGUgPSBmdW5jdGlvbiBoYW5kbGUobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgdGhpcy5tZXNzYWdlVHlwZSkge1xuICAgICAgdGhpcy5jYWxsYmFjay5jYWxsKG51bGwsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gSGFuZGxlcjtcbn0oKTtcblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soY2FsbGJhY2ssIGRhdGEsIGV2ZW50KSB7XG4gIHRyeSB7XG4gICAgY2FsbGJhY2soZGF0YSwgZXZlbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLmVycm9yKGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUhhbmRsZXIoaGFuZGxlciwgZGF0YSkge1xuICB0cnkge1xuICAgIGhhbmRsZXIuaGFuZGxlKGRhdGEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLmVycm9yKGUpO1xuICB9XG59XG5cbmV4cG9ydCB2YXIgRXZlbnRBZ2dyZWdhdG9yID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFdmVudEFnZ3JlZ2F0b3IoKSB7XG4gICAgXG5cbiAgICB0aGlzLmV2ZW50TG9va3VwID0ge307XG4gICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMgPSBbXTtcbiAgfVxuXG4gIEV2ZW50QWdncmVnYXRvci5wcm90b3R5cGUucHVibGlzaCA9IGZ1bmN0aW9uIHB1Ymxpc2goZXZlbnQsIGRhdGEpIHtcbiAgICB2YXIgc3Vic2NyaWJlcnMgPSB2b2lkIDA7XG4gICAgdmFyIGkgPSB2b2lkIDA7XG5cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IHdhcyBpbnZhbGlkLicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzdWJzY3JpYmVycyA9IHRoaXMuZXZlbnRMb29rdXBbZXZlbnRdO1xuICAgICAgaWYgKHN1YnNjcmliZXJzKSB7XG4gICAgICAgIHN1YnNjcmliZXJzID0gc3Vic2NyaWJlcnMuc2xpY2UoKTtcbiAgICAgICAgaSA9IHN1YnNjcmliZXJzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgaW52b2tlQ2FsbGJhY2soc3Vic2NyaWJlcnNbaV0sIGRhdGEsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdWJzY3JpYmVycyA9IHRoaXMubWVzc2FnZUhhbmRsZXJzLnNsaWNlKCk7XG4gICAgICBpID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGludm9rZUhhbmRsZXIoc3Vic2NyaWJlcnNbaV0sIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGhhbmRsZXIgPSB2b2lkIDA7XG4gICAgdmFyIHN1YnNjcmliZXJzID0gdm9pZCAwO1xuXG4gICAgaWYgKCFldmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudCBjaGFubmVsL3R5cGUgd2FzIGludmFsaWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGhhbmRsZXIgPSBjYWxsYmFjaztcbiAgICAgIHN1YnNjcmliZXJzID0gdGhpcy5ldmVudExvb2t1cFtldmVudF0gfHwgKHRoaXMuZXZlbnRMb29rdXBbZXZlbnRdID0gW10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBoYW5kbGVyID0gbmV3IEhhbmRsZXIoZXZlbnQsIGNhbGxiYWNrKTtcbiAgICAgIHN1YnNjcmliZXJzID0gdGhpcy5tZXNzYWdlSGFuZGxlcnM7XG4gICAgfVxuXG4gICAgc3Vic2NyaWJlcnMucHVzaChoYW5kbGVyKTtcblxuICAgIHJldHVybiB7XG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgaWR4ID0gc3Vic2NyaWJlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICBzdWJzY3JpYmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgRXZlbnRBZ2dyZWdhdG9yLnByb3RvdHlwZS5zdWJzY3JpYmVPbmNlID0gZnVuY3Rpb24gc3Vic2NyaWJlT25jZShldmVudCwgY2FsbGJhY2spIHtcbiAgICB2YXIgc3ViID0gdGhpcy5zdWJzY3JpYmUoZXZlbnQsIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICBzdWIuZGlzcG9zZSgpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGEsIGIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN1YjtcbiAgfTtcblxuICByZXR1cm4gRXZlbnRBZ2dyZWdhdG9yO1xufSgpO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZUV2ZW50c0luKG9iaikge1xuICB2YXIgZWEgPSBuZXcgRXZlbnRBZ2dyZWdhdG9yKCk7XG5cbiAgb2JqLnN1YnNjcmliZU9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGVhLnN1YnNjcmliZU9uY2UoZXZlbnQsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBvYmouc3Vic2NyaWJlID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgIHJldHVybiBlYS5zdWJzY3JpYmUoZXZlbnQsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBvYmoucHVibGlzaCA9IGZ1bmN0aW9uIChldmVudCwgZGF0YSkge1xuICAgIGVhLnB1Ymxpc2goZXZlbnQsIGRhdGEpO1xuICB9O1xuXG4gIHJldHVybiBlYTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgY29uZmlnLmluc3RhbmNlKEV2ZW50QWdncmVnYXRvciwgaW5jbHVkZUV2ZW50c0luKGNvbmZpZy5hdXJlbGlhKSk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///aurelia-event-aggregator\n");

/***/ }),

/***/ "tpqN":
/*!****************************************************************************!*\
  !*** ./node_modules/aurelia-fetch-client/dist/umd/aurelia-fetch-client.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("(function (global, factory) {\n   true ? factory(exports, __webpack_require__(/*! aurelia-pal */ \"70NS\")) :\n  undefined;\n}(this, function (exports, aureliaPal) { 'use strict';\n\n  function json(body, replacer) {\r\n      return JSON.stringify((body !== undefined ? body : {}), replacer);\r\n  }\n\n  var retryStrategy = {\r\n      fixed: 0,\r\n      incremental: 1,\r\n      exponential: 2,\r\n      random: 3\r\n  };\r\n  var defaultRetryConfig = {\r\n      maxRetries: 3,\r\n      interval: 1000,\r\n      strategy: retryStrategy.fixed\r\n  };\r\n  var RetryInterceptor = (function () {\r\n      function RetryInterceptor(retryConfig) {\r\n          this.retryConfig = Object.assign({}, defaultRetryConfig, retryConfig || {});\r\n          if (this.retryConfig.strategy === retryStrategy.exponential &&\r\n              this.retryConfig.interval <= 1000) {\r\n              throw new Error('An interval less than or equal to 1 second is not allowed when using the exponential retry strategy');\r\n          }\r\n      }\r\n      RetryInterceptor.prototype.request = function (request) {\r\n          var $r = request;\r\n          if (!$r.retryConfig) {\r\n              $r.retryConfig = Object.assign({}, this.retryConfig);\r\n              $r.retryConfig.counter = 0;\r\n          }\r\n          $r.retryConfig.requestClone = request.clone();\r\n          return request;\r\n      };\r\n      RetryInterceptor.prototype.response = function (response, request) {\r\n          delete request.retryConfig;\r\n          return response;\r\n      };\r\n      RetryInterceptor.prototype.responseError = function (error, request, httpClient) {\r\n          var retryConfig = request.retryConfig;\r\n          var requestClone = retryConfig.requestClone;\r\n          return Promise.resolve().then(function () {\r\n              if (retryConfig.counter < retryConfig.maxRetries) {\r\n                  var result = retryConfig.doRetry ? retryConfig.doRetry(error, request) : true;\r\n                  return Promise.resolve(result).then(function (doRetry) {\r\n                      if (doRetry) {\r\n                          retryConfig.counter++;\r\n                          return new Promise(function (resolve) { return aureliaPal.PLATFORM.global.setTimeout(resolve, calculateDelay(retryConfig) || 0); })\r\n                              .then(function () {\r\n                              var newRequest = requestClone.clone();\r\n                              if (typeof (retryConfig.beforeRetry) === 'function') {\r\n                                  return retryConfig.beforeRetry(newRequest, httpClient);\r\n                              }\r\n                              return newRequest;\r\n                          })\r\n                              .then(function (newRequest) {\r\n                              return httpClient.fetch(Object.assign(newRequest, { retryConfig: retryConfig }));\r\n                          });\r\n                      }\r\n                      delete request.retryConfig;\r\n                      throw error;\r\n                  });\r\n              }\r\n              delete request.retryConfig;\r\n              throw error;\r\n          });\r\n      };\r\n      return RetryInterceptor;\r\n  }());\r\n  function calculateDelay(retryConfig) {\r\n      var interval = retryConfig.interval, strategy = retryConfig.strategy, minRandomInterval = retryConfig.minRandomInterval, maxRandomInterval = retryConfig.maxRandomInterval, counter = retryConfig.counter;\r\n      if (typeof (strategy) === 'function') {\r\n          return retryConfig.strategy(counter);\r\n      }\r\n      switch (strategy) {\r\n          case (retryStrategy.fixed):\r\n              return retryStrategies[retryStrategy.fixed](interval);\r\n          case (retryStrategy.incremental):\r\n              return retryStrategies[retryStrategy.incremental](counter, interval);\r\n          case (retryStrategy.exponential):\r\n              return retryStrategies[retryStrategy.exponential](counter, interval);\r\n          case (retryStrategy.random):\r\n              return retryStrategies[retryStrategy.random](counter, interval, minRandomInterval, maxRandomInterval);\r\n          default:\r\n              throw new Error('Unrecognized retry strategy');\r\n      }\r\n  }\r\n  var retryStrategies = [\r\n      function (interval) { return interval; },\r\n      function (retryCount, interval) { return interval * retryCount; },\r\n      function (retryCount, interval) { return retryCount === 1 ? interval : Math.pow(interval, retryCount) / 1000; },\r\n      function (retryCount, interval, minRandomInterval, maxRandomInterval) {\r\n          if (minRandomInterval === void 0) { minRandomInterval = 0; }\r\n          if (maxRandomInterval === void 0) { maxRandomInterval = 60000; }\r\n          return Math.random() * (maxRandomInterval - minRandomInterval) + minRandomInterval;\r\n      }\r\n  ];\n\n  var HttpClientConfiguration = (function () {\r\n      function HttpClientConfiguration() {\r\n          this.baseUrl = '';\r\n          this.defaults = {};\r\n          this.interceptors = [];\r\n      }\r\n      HttpClientConfiguration.prototype.withBaseUrl = function (baseUrl) {\r\n          this.baseUrl = baseUrl;\r\n          return this;\r\n      };\r\n      HttpClientConfiguration.prototype.withDefaults = function (defaults) {\r\n          this.defaults = defaults;\r\n          return this;\r\n      };\r\n      HttpClientConfiguration.prototype.withInterceptor = function (interceptor) {\r\n          this.interceptors.push(interceptor);\r\n          return this;\r\n      };\r\n      HttpClientConfiguration.prototype.useStandardConfiguration = function () {\r\n          var standardConfig = { credentials: 'same-origin' };\r\n          Object.assign(this.defaults, standardConfig, this.defaults);\r\n          return this.rejectErrorResponses();\r\n      };\r\n      HttpClientConfiguration.prototype.rejectErrorResponses = function () {\r\n          return this.withInterceptor({ response: rejectOnError });\r\n      };\r\n      HttpClientConfiguration.prototype.withRetry = function (config) {\r\n          var interceptor = new RetryInterceptor(config);\r\n          return this.withInterceptor(interceptor);\r\n      };\r\n      return HttpClientConfiguration;\r\n  }());\r\n  function rejectOnError(response) {\r\n      if (!response.ok) {\r\n          throw response;\r\n      }\r\n      return response;\r\n  }\n\n  var HttpClient = (function () {\r\n      function HttpClient() {\r\n          this.activeRequestCount = 0;\r\n          this.isRequesting = false;\r\n          this.isConfigured = false;\r\n          this.baseUrl = '';\r\n          this.defaults = null;\r\n          this.interceptors = [];\r\n          if (typeof fetch === 'undefined') {\r\n              throw new Error('HttpClient requires a Fetch API implementation, but the current environment doesn\\'t support it. You may need to load a polyfill such as https://github.com/github/fetch');\r\n          }\r\n      }\r\n      HttpClient.prototype.configure = function (config) {\r\n          var normalizedConfig;\r\n          if (typeof config === 'object') {\r\n              normalizedConfig = { defaults: config };\r\n          }\r\n          else if (typeof config === 'function') {\r\n              normalizedConfig = new HttpClientConfiguration();\r\n              normalizedConfig.baseUrl = this.baseUrl;\r\n              normalizedConfig.defaults = Object.assign({}, this.defaults);\r\n              normalizedConfig.interceptors = this.interceptors;\r\n              var c = config(normalizedConfig);\r\n              if (HttpClientConfiguration.prototype.isPrototypeOf(c)) {\r\n                  normalizedConfig = c;\r\n              }\r\n          }\r\n          else {\r\n              throw new Error('invalid config');\r\n          }\r\n          var defaults = normalizedConfig.defaults;\r\n          if (defaults && Headers.prototype.isPrototypeOf(defaults.headers)) {\r\n              throw new Error('Default headers must be a plain object.');\r\n          }\r\n          var interceptors = normalizedConfig.interceptors;\r\n          if (interceptors && interceptors.length) {\r\n              if (interceptors.filter(function (x) { return RetryInterceptor.prototype.isPrototypeOf(x); }).length > 1) {\r\n                  throw new Error('Only one RetryInterceptor is allowed.');\r\n              }\r\n              var retryInterceptorIndex = interceptors.findIndex(function (x) { return RetryInterceptor.prototype.isPrototypeOf(x); });\r\n              if (retryInterceptorIndex >= 0 && retryInterceptorIndex !== interceptors.length - 1) {\r\n                  throw new Error('The retry interceptor must be the last interceptor defined.');\r\n              }\r\n          }\r\n          this.baseUrl = normalizedConfig.baseUrl;\r\n          this.defaults = defaults;\r\n          this.interceptors = normalizedConfig.interceptors || [];\r\n          this.isConfigured = true;\r\n          return this;\r\n      };\r\n      HttpClient.prototype.fetch = function (input, init) {\r\n          var _this = this;\r\n          trackRequestStart(this);\r\n          var request = this.buildRequest(input, init);\r\n          return processRequest(request, this.interceptors, this).then(function (result) {\r\n              var response = null;\r\n              if (Response.prototype.isPrototypeOf(result)) {\r\n                  response = Promise.resolve(result);\r\n              }\r\n              else if (Request.prototype.isPrototypeOf(result)) {\r\n                  request = result;\r\n                  response = fetch(result);\r\n              }\r\n              else {\r\n                  throw new Error(\"An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [\" + result + \"]\");\r\n              }\r\n              return processResponse(response, _this.interceptors, request, _this);\r\n          })\r\n              .then(function (result) {\r\n              if (Request.prototype.isPrototypeOf(result)) {\r\n                  return _this.fetch(result);\r\n              }\r\n              return result;\r\n          })\r\n              .then(function (result) {\r\n              trackRequestEnd(_this);\r\n              return result;\r\n          }, function (error) {\r\n              trackRequestEnd(_this);\r\n              throw error;\r\n          });\r\n      };\r\n      HttpClient.prototype.buildRequest = function (input, init) {\r\n          var defaults = this.defaults || {};\r\n          var request;\r\n          var body;\r\n          var requestContentType;\r\n          var parsedDefaultHeaders = parseHeaderValues(defaults.headers);\r\n          if (Request.prototype.isPrototypeOf(input)) {\r\n              request = input;\r\n              requestContentType = new Headers(request.headers).get('Content-Type');\r\n          }\r\n          else {\r\n              if (!init) {\r\n                  init = {};\r\n              }\r\n              body = init.body;\r\n              var bodyObj = body ? { body: body } : null;\r\n              var requestInit = Object.assign({}, defaults, { headers: {} }, init, bodyObj);\r\n              requestContentType = new Headers(requestInit.headers).get('Content-Type');\r\n              request = new Request(getRequestUrl(this.baseUrl, input), requestInit);\r\n          }\r\n          if (!requestContentType) {\r\n              if (new Headers(parsedDefaultHeaders).has('content-type')) {\r\n                  request.headers.set('Content-Type', new Headers(parsedDefaultHeaders).get('content-type'));\r\n              }\r\n              else if (body && isJSON(body)) {\r\n                  request.headers.set('Content-Type', 'application/json');\r\n              }\r\n          }\r\n          setDefaultHeaders(request.headers, parsedDefaultHeaders);\r\n          if (body && Blob.prototype.isPrototypeOf(body) && body.type) {\r\n              request.headers.set('Content-Type', body.type);\r\n          }\r\n          return request;\r\n      };\r\n      HttpClient.prototype.get = function (input, init) {\r\n          return this.fetch(input, init);\r\n      };\r\n      HttpClient.prototype.post = function (input, body, init) {\r\n          return callFetch(this, input, body, init, 'POST');\r\n      };\r\n      HttpClient.prototype.put = function (input, body, init) {\r\n          return callFetch(this, input, body, init, 'PUT');\r\n      };\r\n      HttpClient.prototype.patch = function (input, body, init) {\r\n          return callFetch(this, input, body, init, 'PATCH');\r\n      };\r\n      HttpClient.prototype.delete = function (input, body, init) {\r\n          return callFetch(this, input, body, init, 'DELETE');\r\n      };\r\n      return HttpClient;\r\n  }());\r\n  var absoluteUrlRegexp = /^([a-z][a-z0-9+\\-.]*:)?\\/\\//i;\r\n  function trackRequestStart(client) {\r\n      client.isRequesting = !!(++client.activeRequestCount);\r\n      if (client.isRequesting) {\r\n          var evt_1 = aureliaPal.DOM.createCustomEvent('aurelia-fetch-client-request-started', { bubbles: true, cancelable: true });\r\n          setTimeout(function () { return aureliaPal.DOM.dispatchEvent(evt_1); }, 1);\r\n      }\r\n  }\r\n  function trackRequestEnd(client) {\r\n      client.isRequesting = !!(--client.activeRequestCount);\r\n      if (!client.isRequesting) {\r\n          var evt_2 = aureliaPal.DOM.createCustomEvent('aurelia-fetch-client-requests-drained', { bubbles: true, cancelable: true });\r\n          setTimeout(function () { return aureliaPal.DOM.dispatchEvent(evt_2); }, 1);\r\n      }\r\n  }\r\n  function parseHeaderValues(headers) {\r\n      var parsedHeaders = {};\r\n      for (var name_1 in headers || {}) {\r\n          if (headers.hasOwnProperty(name_1)) {\r\n              parsedHeaders[name_1] = (typeof headers[name_1] === 'function') ? headers[name_1]() : headers[name_1];\r\n          }\r\n      }\r\n      return parsedHeaders;\r\n  }\r\n  function getRequestUrl(baseUrl, url) {\r\n      if (absoluteUrlRegexp.test(url)) {\r\n          return url;\r\n      }\r\n      return (baseUrl || '') + url;\r\n  }\r\n  function setDefaultHeaders(headers, defaultHeaders) {\r\n      for (var name_2 in defaultHeaders || {}) {\r\n          if (defaultHeaders.hasOwnProperty(name_2) && !headers.has(name_2)) {\r\n              headers.set(name_2, defaultHeaders[name_2]);\r\n          }\r\n      }\r\n  }\r\n  function processRequest(request, interceptors, http) {\r\n      return applyInterceptors(request, interceptors, 'request', 'requestError', http);\r\n  }\r\n  function processResponse(response, interceptors, request, http) {\r\n      return applyInterceptors(response, interceptors, 'response', 'responseError', request, http);\r\n  }\r\n  function applyInterceptors(input, interceptors, successName, errorName) {\r\n      var interceptorArgs = [];\r\n      for (var _i = 4; _i < arguments.length; _i++) {\r\n          interceptorArgs[_i - 4] = arguments[_i];\r\n      }\r\n      return (interceptors || [])\r\n          .reduce(function (chain, interceptor) {\r\n          var successHandler = interceptor[successName];\r\n          var errorHandler = interceptor[errorName];\r\n          return chain.then(successHandler && (function (value) { return successHandler.call.apply(successHandler, [interceptor, value].concat(interceptorArgs)); }) || identity, errorHandler && (function (reason) { return errorHandler.call.apply(errorHandler, [interceptor, reason].concat(interceptorArgs)); }) || thrower);\r\n      }, Promise.resolve(input));\r\n  }\r\n  function isJSON(str) {\r\n      try {\r\n          JSON.parse(str);\r\n      }\r\n      catch (err) {\r\n          return false;\r\n      }\r\n      return true;\r\n  }\r\n  function identity(x) {\r\n      return x;\r\n  }\r\n  function thrower(x) {\r\n      throw x;\r\n  }\r\n  function callFetch(client, input, body, init, method) {\r\n      if (!init) {\r\n          init = {};\r\n      }\r\n      init.method = method;\r\n      if (body) {\r\n          init.body = body;\r\n      }\r\n      return client.fetch(input, init);\r\n  }\n\n  exports.json = json;\n  exports.retryStrategy = retryStrategy;\n  exports.RetryInterceptor = RetryInterceptor;\n  exports.HttpClientConfiguration = HttpClientConfiguration;\n  exports.HttpClient = HttpClient;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHBxTi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhLWZldGNoLWNsaWVudC9kaXN0L3VtZC9hdXJlbGlhLWZldGNoLWNsaWVudC5qcz9iNjlhIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnYXVyZWxpYS1wYWwnKSkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJywgJ2F1cmVsaWEtcGFsJ10sIGZhY3RvcnkpIDpcbiAgKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KChnbG9iYWwuYXUgPSBnbG9iYWwuYXUgfHwge30sIGdsb2JhbC5hdS5mZXRjaENsaWVudCA9IHt9KSwgZ2xvYmFsLmF1KSk7XG59KHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzLCBhdXJlbGlhUGFsKSB7ICd1c2Ugc3RyaWN0JztcblxuICBmdW5jdGlvbiBqc29uKGJvZHksIHJlcGxhY2VyKSB7XHJcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgoYm9keSAhPT0gdW5kZWZpbmVkID8gYm9keSA6IHt9KSwgcmVwbGFjZXIpO1xyXG4gIH1cblxuICB2YXIgcmV0cnlTdHJhdGVneSA9IHtcclxuICAgICAgZml4ZWQ6IDAsXHJcbiAgICAgIGluY3JlbWVudGFsOiAxLFxyXG4gICAgICBleHBvbmVudGlhbDogMixcclxuICAgICAgcmFuZG9tOiAzXHJcbiAgfTtcclxuICB2YXIgZGVmYXVsdFJldHJ5Q29uZmlnID0ge1xyXG4gICAgICBtYXhSZXRyaWVzOiAzLFxyXG4gICAgICBpbnRlcnZhbDogMTAwMCxcclxuICAgICAgc3RyYXRlZ3k6IHJldHJ5U3RyYXRlZ3kuZml4ZWRcclxuICB9O1xyXG4gIHZhciBSZXRyeUludGVyY2VwdG9yID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgZnVuY3Rpb24gUmV0cnlJbnRlcmNlcHRvcihyZXRyeUNvbmZpZykge1xyXG4gICAgICAgICAgdGhpcy5yZXRyeUNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRSZXRyeUNvbmZpZywgcmV0cnlDb25maWcgfHwge30pO1xyXG4gICAgICAgICAgaWYgKHRoaXMucmV0cnlDb25maWcuc3RyYXRlZ3kgPT09IHJldHJ5U3RyYXRlZ3kuZXhwb25lbnRpYWwgJiZcclxuICAgICAgICAgICAgICB0aGlzLnJldHJ5Q29uZmlnLmludGVydmFsIDw9IDEwMDApIHtcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FuIGludGVydmFsIGxlc3MgdGhhbiBvciBlcXVhbCB0byAxIHNlY29uZCBpcyBub3QgYWxsb3dlZCB3aGVuIHVzaW5nIHRoZSBleHBvbmVudGlhbCByZXRyeSBzdHJhdGVneScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFJldHJ5SW50ZXJjZXB0b3IucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgdmFyICRyID0gcmVxdWVzdDtcclxuICAgICAgICAgIGlmICghJHIucmV0cnlDb25maWcpIHtcclxuICAgICAgICAgICAgICAkci5yZXRyeUNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucmV0cnlDb25maWcpO1xyXG4gICAgICAgICAgICAgICRyLnJldHJ5Q29uZmlnLmNvdW50ZXIgPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJHIucmV0cnlDb25maWcucmVxdWVzdENsb25lID0gcmVxdWVzdC5jbG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICAgIH07XHJcbiAgICAgIFJldHJ5SW50ZXJjZXB0b3IucHJvdG90eXBlLnJlc3BvbnNlID0gZnVuY3Rpb24gKHJlc3BvbnNlLCByZXF1ZXN0KSB7XHJcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdC5yZXRyeUNvbmZpZztcclxuICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgfTtcclxuICAgICAgUmV0cnlJbnRlcmNlcHRvci5wcm90b3R5cGUucmVzcG9uc2VFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgcmVxdWVzdCwgaHR0cENsaWVudCkge1xyXG4gICAgICAgICAgdmFyIHJldHJ5Q29uZmlnID0gcmVxdWVzdC5yZXRyeUNvbmZpZztcclxuICAgICAgICAgIHZhciByZXF1ZXN0Q2xvbmUgPSByZXRyeUNvbmZpZy5yZXF1ZXN0Q2xvbmU7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHJldHJ5Q29uZmlnLmNvdW50ZXIgPCByZXRyeUNvbmZpZy5tYXhSZXRyaWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXRyeUNvbmZpZy5kb1JldHJ5ID8gcmV0cnlDb25maWcuZG9SZXRyeShlcnJvciwgcmVxdWVzdCkgOiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihmdW5jdGlvbiAoZG9SZXRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRvUmV0cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvbmZpZy5jb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiBhdXJlbGlhUGFsLlBMQVRGT1JNLmdsb2JhbC5zZXRUaW1lb3V0KHJlc29sdmUsIGNhbGN1bGF0ZURlbGF5KHJldHJ5Q29uZmlnKSB8fCAwKTsgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3UmVxdWVzdCA9IHJlcXVlc3RDbG9uZS5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChyZXRyeUNvbmZpZy5iZWZvcmVSZXRyeSkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRyeUNvbmZpZy5iZWZvcmVSZXRyeShuZXdSZXF1ZXN0LCBodHRwQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3UmVxdWVzdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobmV3UmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHR0cENsaWVudC5mZXRjaChPYmplY3QuYXNzaWduKG5ld1JlcXVlc3QsIHsgcmV0cnlDb25maWc6IHJldHJ5Q29uZmlnIH0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0LnJldHJ5Q29uZmlnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBkZWxldGUgcmVxdWVzdC5yZXRyeUNvbmZpZztcclxuICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gUmV0cnlJbnRlcmNlcHRvcjtcclxuICB9KCkpO1xyXG4gIGZ1bmN0aW9uIGNhbGN1bGF0ZURlbGF5KHJldHJ5Q29uZmlnKSB7XHJcbiAgICAgIHZhciBpbnRlcnZhbCA9IHJldHJ5Q29uZmlnLmludGVydmFsLCBzdHJhdGVneSA9IHJldHJ5Q29uZmlnLnN0cmF0ZWd5LCBtaW5SYW5kb21JbnRlcnZhbCA9IHJldHJ5Q29uZmlnLm1pblJhbmRvbUludGVydmFsLCBtYXhSYW5kb21JbnRlcnZhbCA9IHJldHJ5Q29uZmlnLm1heFJhbmRvbUludGVydmFsLCBjb3VudGVyID0gcmV0cnlDb25maWcuY291bnRlcjtcclxuICAgICAgaWYgKHR5cGVvZiAoc3RyYXRlZ3kpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmV0cnlDb25maWcuc3RyYXRlZ3koY291bnRlcik7XHJcbiAgICAgIH1cclxuICAgICAgc3dpdGNoIChzdHJhdGVneSkge1xyXG4gICAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5maXhlZCk6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJldHJ5U3RyYXRlZ2llc1tyZXRyeVN0cmF0ZWd5LmZpeGVkXShpbnRlcnZhbCk7XHJcbiAgICAgICAgICBjYXNlIChyZXRyeVN0cmF0ZWd5LmluY3JlbWVudGFsKTpcclxuICAgICAgICAgICAgICByZXR1cm4gcmV0cnlTdHJhdGVnaWVzW3JldHJ5U3RyYXRlZ3kuaW5jcmVtZW50YWxdKGNvdW50ZXIsIGludGVydmFsKTtcclxuICAgICAgICAgIGNhc2UgKHJldHJ5U3RyYXRlZ3kuZXhwb25lbnRpYWwpOlxyXG4gICAgICAgICAgICAgIHJldHVybiByZXRyeVN0cmF0ZWdpZXNbcmV0cnlTdHJhdGVneS5leHBvbmVudGlhbF0oY291bnRlciwgaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5yYW5kb20pOlxyXG4gICAgICAgICAgICAgIHJldHVybiByZXRyeVN0cmF0ZWdpZXNbcmV0cnlTdHJhdGVneS5yYW5kb21dKGNvdW50ZXIsIGludGVydmFsLCBtaW5SYW5kb21JbnRlcnZhbCwgbWF4UmFuZG9tSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCByZXRyeSBzdHJhdGVneScpO1xyXG4gICAgICB9XHJcbiAgfVxyXG4gIHZhciByZXRyeVN0cmF0ZWdpZXMgPSBbXHJcbiAgICAgIGZ1bmN0aW9uIChpbnRlcnZhbCkgeyByZXR1cm4gaW50ZXJ2YWw7IH0sXHJcbiAgICAgIGZ1bmN0aW9uIChyZXRyeUNvdW50LCBpbnRlcnZhbCkgeyByZXR1cm4gaW50ZXJ2YWwgKiByZXRyeUNvdW50OyB9LFxyXG4gICAgICBmdW5jdGlvbiAocmV0cnlDb3VudCwgaW50ZXJ2YWwpIHsgcmV0dXJuIHJldHJ5Q291bnQgPT09IDEgPyBpbnRlcnZhbCA6IE1hdGgucG93KGludGVydmFsLCByZXRyeUNvdW50KSAvIDEwMDA7IH0sXHJcbiAgICAgIGZ1bmN0aW9uIChyZXRyeUNvdW50LCBpbnRlcnZhbCwgbWluUmFuZG9tSW50ZXJ2YWwsIG1heFJhbmRvbUludGVydmFsKSB7XHJcbiAgICAgICAgICBpZiAobWluUmFuZG9tSW50ZXJ2YWwgPT09IHZvaWQgMCkgeyBtaW5SYW5kb21JbnRlcnZhbCA9IDA7IH1cclxuICAgICAgICAgIGlmIChtYXhSYW5kb21JbnRlcnZhbCA9PT0gdm9pZCAwKSB7IG1heFJhbmRvbUludGVydmFsID0gNjAwMDA7IH1cclxuICAgICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heFJhbmRvbUludGVydmFsIC0gbWluUmFuZG9tSW50ZXJ2YWwpICsgbWluUmFuZG9tSW50ZXJ2YWw7XHJcbiAgICAgIH1cclxuICBdO1xuXG4gIHZhciBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZ1bmN0aW9uIEh0dHBDbGllbnRDb25maWd1cmF0aW9uKCkge1xyXG4gICAgICAgICAgdGhpcy5iYXNlVXJsID0gJyc7XHJcbiAgICAgICAgICB0aGlzLmRlZmF1bHRzID0ge307XHJcbiAgICAgICAgICB0aGlzLmludGVyY2VwdG9ycyA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIEh0dHBDbGllbnRDb25maWd1cmF0aW9uLnByb3RvdHlwZS53aXRoQmFzZVVybCA9IGZ1bmN0aW9uIChiYXNlVXJsKSB7XHJcbiAgICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgIH07XHJcbiAgICAgIEh0dHBDbGllbnRDb25maWd1cmF0aW9uLnByb3RvdHlwZS53aXRoRGVmYXVsdHMgPSBmdW5jdGlvbiAoZGVmYXVsdHMpIHtcclxuICAgICAgICAgIHRoaXMuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9O1xyXG4gICAgICBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUud2l0aEludGVyY2VwdG9yID0gZnVuY3Rpb24gKGludGVyY2VwdG9yKSB7XHJcbiAgICAgICAgICB0aGlzLmludGVyY2VwdG9ycy5wdXNoKGludGVyY2VwdG9yKTtcclxuICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9O1xyXG4gICAgICBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUudXNlU3RhbmRhcmRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIHN0YW5kYXJkQ29uZmlnID0geyBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJyB9O1xyXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmRlZmF1bHRzLCBzdGFuZGFyZENvbmZpZywgdGhpcy5kZWZhdWx0cyk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZWplY3RFcnJvclJlc3BvbnNlcygpO1xyXG4gICAgICB9O1xyXG4gICAgICBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUucmVqZWN0RXJyb3JSZXNwb25zZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy53aXRoSW50ZXJjZXB0b3IoeyByZXNwb25zZTogcmVqZWN0T25FcnJvciB9KTtcclxuICAgICAgfTtcclxuICAgICAgSHR0cENsaWVudENvbmZpZ3VyYXRpb24ucHJvdG90eXBlLndpdGhSZXRyeSA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICAgIHZhciBpbnRlcmNlcHRvciA9IG5ldyBSZXRyeUludGVyY2VwdG9yKGNvbmZpZyk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy53aXRoSW50ZXJjZXB0b3IoaW50ZXJjZXB0b3IpO1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gSHR0cENsaWVudENvbmZpZ3VyYXRpb247XHJcbiAgfSgpKTtcclxuICBmdW5jdGlvbiByZWplY3RPbkVycm9yKHJlc3BvbnNlKSB7XHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgIHRocm93IHJlc3BvbnNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXNwb25zZTtcclxuICB9XG5cbiAgdmFyIEh0dHBDbGllbnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICBmdW5jdGlvbiBIdHRwQ2xpZW50KCkge1xyXG4gICAgICAgICAgdGhpcy5hY3RpdmVSZXF1ZXN0Q291bnQgPSAwO1xyXG4gICAgICAgICAgdGhpcy5pc1JlcXVlc3RpbmcgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMuaXNDb25maWd1cmVkID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLmJhc2VVcmwgPSAnJztcclxuICAgICAgICAgIHRoaXMuZGVmYXVsdHMgPSBudWxsO1xyXG4gICAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMgPSBbXTtcclxuICAgICAgICAgIGlmICh0eXBlb2YgZmV0Y2ggPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIdHRwQ2xpZW50IHJlcXVpcmVzIGEgRmV0Y2ggQVBJIGltcGxlbWVudGF0aW9uLCBidXQgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lc25cXCd0IHN1cHBvcnQgaXQuIFlvdSBtYXkgbmVlZCB0byBsb2FkIGEgcG9seWZpbGwgc3VjaCBhcyBodHRwczovL2dpdGh1Yi5jb20vZ2l0aHViL2ZldGNoJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgSHR0cENsaWVudC5wcm90b3R5cGUuY29uZmlndXJlID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgICAgdmFyIG5vcm1hbGl6ZWRDb25maWc7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICBub3JtYWxpemVkQ29uZmlnID0geyBkZWZhdWx0czogY29uZmlnIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29uZmlnID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZyA9IG5ldyBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbigpO1xyXG4gICAgICAgICAgICAgIG5vcm1hbGl6ZWRDb25maWcuYmFzZVVybCA9IHRoaXMuYmFzZVVybDtcclxuICAgICAgICAgICAgICBub3JtYWxpemVkQ29uZmlnLmRlZmF1bHRzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0cyk7XHJcbiAgICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZy5pbnRlcmNlcHRvcnMgPSB0aGlzLmludGVyY2VwdG9ycztcclxuICAgICAgICAgICAgICB2YXIgYyA9IGNvbmZpZyhub3JtYWxpemVkQ29uZmlnKTtcclxuICAgICAgICAgICAgICBpZiAoSHR0cENsaWVudENvbmZpZ3VyYXRpb24ucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYykpIHtcclxuICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZyA9IGM7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGNvbmZpZycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmFyIGRlZmF1bHRzID0gbm9ybWFsaXplZENvbmZpZy5kZWZhdWx0cztcclxuICAgICAgICAgIGlmIChkZWZhdWx0cyAmJiBIZWFkZXJzLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGRlZmF1bHRzLmhlYWRlcnMpKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEZWZhdWx0IGhlYWRlcnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC4nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciBpbnRlcmNlcHRvcnMgPSBub3JtYWxpemVkQ29uZmlnLmludGVyY2VwdG9ycztcclxuICAgICAgICAgIGlmIChpbnRlcmNlcHRvcnMgJiYgaW50ZXJjZXB0b3JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIGlmIChpbnRlcmNlcHRvcnMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiBSZXRyeUludGVyY2VwdG9yLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHgpOyB9KS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBvbmUgUmV0cnlJbnRlcmNlcHRvciBpcyBhbGxvd2VkLicpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB2YXIgcmV0cnlJbnRlcmNlcHRvckluZGV4ID0gaW50ZXJjZXB0b3JzLmZpbmRJbmRleChmdW5jdGlvbiAoeCkgeyByZXR1cm4gUmV0cnlJbnRlcmNlcHRvci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih4KTsgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKHJldHJ5SW50ZXJjZXB0b3JJbmRleCA+PSAwICYmIHJldHJ5SW50ZXJjZXB0b3JJbmRleCAhPT0gaW50ZXJjZXB0b3JzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcmV0cnkgaW50ZXJjZXB0b3IgbXVzdCBiZSB0aGUgbGFzdCBpbnRlcmNlcHRvciBkZWZpbmVkLicpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuYmFzZVVybCA9IG5vcm1hbGl6ZWRDb25maWcuYmFzZVVybDtcclxuICAgICAgICAgIHRoaXMuZGVmYXVsdHMgPSBkZWZhdWx0cztcclxuICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3JzID0gbm9ybWFsaXplZENvbmZpZy5pbnRlcmNlcHRvcnMgfHwgW107XHJcbiAgICAgICAgICB0aGlzLmlzQ29uZmlndXJlZCA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgfTtcclxuICAgICAgSHR0cENsaWVudC5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAoaW5wdXQsIGluaXQpIHtcclxuICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICB0cmFja1JlcXVlc3RTdGFydCh0aGlzKTtcclxuICAgICAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoaW5wdXQsIGluaXQpO1xyXG4gICAgICAgICAgcmV0dXJuIHByb2Nlc3NSZXF1ZXN0KHJlcXVlc3QsIHRoaXMuaW50ZXJjZXB0b3JzLCB0aGlzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgIGlmIChSZXNwb25zZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YocmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGZldGNoKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBpbnZhbGlkIHJlc3VsdCB3YXMgcmV0dXJuZWQgYnkgdGhlIGludGVyY2VwdG9yIGNoYWluLiBFeHBlY3RlZCBhIFJlcXVlc3Qgb3IgUmVzcG9uc2UgaW5zdGFuY2UsIGJ1dCBnb3QgW1wiICsgcmVzdWx0ICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gcHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCBfdGhpcy5pbnRlcmNlcHRvcnMsIHJlcXVlc3QsIF90aGlzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICB0cmFja1JlcXVlc3RFbmQoX3RoaXMpO1xyXG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICB0cmFja1JlcXVlc3RFbmQoX3RoaXMpO1xyXG4gICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICAgIEh0dHBDbGllbnQucHJvdG90eXBlLmJ1aWxkUmVxdWVzdCA9IGZ1bmN0aW9uIChpbnB1dCwgaW5pdCkge1xyXG4gICAgICAgICAgdmFyIGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyB8fCB7fTtcclxuICAgICAgICAgIHZhciByZXF1ZXN0O1xyXG4gICAgICAgICAgdmFyIGJvZHk7XHJcbiAgICAgICAgICB2YXIgcmVxdWVzdENvbnRlbnRUeXBlO1xyXG4gICAgICAgICAgdmFyIHBhcnNlZERlZmF1bHRIZWFkZXJzID0gcGFyc2VIZWFkZXJWYWx1ZXMoZGVmYXVsdHMuaGVhZGVycyk7XHJcbiAgICAgICAgICBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkpIHtcclxuICAgICAgICAgICAgICByZXF1ZXN0ID0gaW5wdXQ7XHJcbiAgICAgICAgICAgICAgcmVxdWVzdENvbnRlbnRUeXBlID0gbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKS5nZXQoJ0NvbnRlbnQtVHlwZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKCFpbml0KSB7XHJcbiAgICAgICAgICAgICAgICAgIGluaXQgPSB7fTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYm9keSA9IGluaXQuYm9keTtcclxuICAgICAgICAgICAgICB2YXIgYm9keU9iaiA9IGJvZHkgPyB7IGJvZHk6IGJvZHkgfSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgdmFyIHJlcXVlc3RJbml0ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIHsgaGVhZGVyczoge30gfSwgaW5pdCwgYm9keU9iaik7XHJcbiAgICAgICAgICAgICAgcmVxdWVzdENvbnRlbnRUeXBlID0gbmV3IEhlYWRlcnMocmVxdWVzdEluaXQuaGVhZGVycykuZ2V0KCdDb250ZW50LVR5cGUnKTtcclxuICAgICAgICAgICAgICByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoZ2V0UmVxdWVzdFVybCh0aGlzLmJhc2VVcmwsIGlucHV0KSwgcmVxdWVzdEluaXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCFyZXF1ZXN0Q29udGVudFR5cGUpIHtcclxuICAgICAgICAgICAgICBpZiAobmV3IEhlYWRlcnMocGFyc2VkRGVmYXVsdEhlYWRlcnMpLmhhcygnY29udGVudC10eXBlJykpIHtcclxuICAgICAgICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgbmV3IEhlYWRlcnMocGFyc2VkRGVmYXVsdEhlYWRlcnMpLmdldCgnY29udGVudC10eXBlJykpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmIChib2R5ICYmIGlzSlNPTihib2R5KSkge1xyXG4gICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHNldERlZmF1bHRIZWFkZXJzKHJlcXVlc3QuaGVhZGVycywgcGFyc2VkRGVmYXVsdEhlYWRlcnMpO1xyXG4gICAgICAgICAgaWYgKGJvZHkgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSAmJiBib2R5LnR5cGUpIHtcclxuICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuc2V0KCdDb250ZW50LVR5cGUnLCBib2R5LnR5cGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICAgIH07XHJcbiAgICAgIEh0dHBDbGllbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpbnB1dCwgaW5pdCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goaW5wdXQsIGluaXQpO1xyXG4gICAgICB9O1xyXG4gICAgICBIdHRwQ2xpZW50LnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGlucHV0LCBib2R5LCBpbml0KSB7XHJcbiAgICAgICAgICByZXR1cm4gY2FsbEZldGNoKHRoaXMsIGlucHV0LCBib2R5LCBpbml0LCAnUE9TVCcpO1xyXG4gICAgICB9O1xyXG4gICAgICBIdHRwQ2xpZW50LnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoaW5wdXQsIGJvZHksIGluaXQpIHtcclxuICAgICAgICAgIHJldHVybiBjYWxsRmV0Y2godGhpcywgaW5wdXQsIGJvZHksIGluaXQsICdQVVQnKTtcclxuICAgICAgfTtcclxuICAgICAgSHR0cENsaWVudC5wcm90b3R5cGUucGF0Y2ggPSBmdW5jdGlvbiAoaW5wdXQsIGJvZHksIGluaXQpIHtcclxuICAgICAgICAgIHJldHVybiBjYWxsRmV0Y2godGhpcywgaW5wdXQsIGJvZHksIGluaXQsICdQQVRDSCcpO1xyXG4gICAgICB9O1xyXG4gICAgICBIdHRwQ2xpZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoaW5wdXQsIGJvZHksIGluaXQpIHtcclxuICAgICAgICAgIHJldHVybiBjYWxsRmV0Y2godGhpcywgaW5wdXQsIGJvZHksIGluaXQsICdERUxFVEUnKTtcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIEh0dHBDbGllbnQ7XHJcbiAgfSgpKTtcclxuICB2YXIgYWJzb2x1dGVVcmxSZWdleHAgPSAvXihbYS16XVthLXowLTkrXFwtLl0qOik/XFwvXFwvL2k7XHJcbiAgZnVuY3Rpb24gdHJhY2tSZXF1ZXN0U3RhcnQoY2xpZW50KSB7XHJcbiAgICAgIGNsaWVudC5pc1JlcXVlc3RpbmcgPSAhISgrK2NsaWVudC5hY3RpdmVSZXF1ZXN0Q291bnQpO1xyXG4gICAgICBpZiAoY2xpZW50LmlzUmVxdWVzdGluZykge1xyXG4gICAgICAgICAgdmFyIGV2dF8xID0gYXVyZWxpYVBhbC5ET00uY3JlYXRlQ3VzdG9tRXZlbnQoJ2F1cmVsaWEtZmV0Y2gtY2xpZW50LXJlcXVlc3Qtc3RhcnRlZCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gYXVyZWxpYVBhbC5ET00uZGlzcGF0Y2hFdmVudChldnRfMSk7IH0sIDEpO1xyXG4gICAgICB9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIHRyYWNrUmVxdWVzdEVuZChjbGllbnQpIHtcclxuICAgICAgY2xpZW50LmlzUmVxdWVzdGluZyA9ICEhKC0tY2xpZW50LmFjdGl2ZVJlcXVlc3RDb3VudCk7XHJcbiAgICAgIGlmICghY2xpZW50LmlzUmVxdWVzdGluZykge1xyXG4gICAgICAgICAgdmFyIGV2dF8yID0gYXVyZWxpYVBhbC5ET00uY3JlYXRlQ3VzdG9tRXZlbnQoJ2F1cmVsaWEtZmV0Y2gtY2xpZW50LXJlcXVlc3RzLWRyYWluZWQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGF1cmVsaWFQYWwuRE9NLmRpc3BhdGNoRXZlbnQoZXZ0XzIpOyB9LCAxKTtcclxuICAgICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBwYXJzZUhlYWRlclZhbHVlcyhoZWFkZXJzKSB7XHJcbiAgICAgIHZhciBwYXJzZWRIZWFkZXJzID0ge307XHJcbiAgICAgIGZvciAodmFyIG5hbWVfMSBpbiBoZWFkZXJzIHx8IHt9KSB7XHJcbiAgICAgICAgICBpZiAoaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShuYW1lXzEpKSB7XHJcbiAgICAgICAgICAgICAgcGFyc2VkSGVhZGVyc1tuYW1lXzFdID0gKHR5cGVvZiBoZWFkZXJzW25hbWVfMV0gPT09ICdmdW5jdGlvbicpID8gaGVhZGVyc1tuYW1lXzFdKCkgOiBoZWFkZXJzW25hbWVfMV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHBhcnNlZEhlYWRlcnM7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGdldFJlcXVlc3RVcmwoYmFzZVVybCwgdXJsKSB7XHJcbiAgICAgIGlmIChhYnNvbHV0ZVVybFJlZ2V4cC50ZXN0KHVybCkpIHtcclxuICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIChiYXNlVXJsIHx8ICcnKSArIHVybDtcclxuICB9XHJcbiAgZnVuY3Rpb24gc2V0RGVmYXVsdEhlYWRlcnMoaGVhZGVycywgZGVmYXVsdEhlYWRlcnMpIHtcclxuICAgICAgZm9yICh2YXIgbmFtZV8yIGluIGRlZmF1bHRIZWFkZXJzIHx8IHt9KSB7XHJcbiAgICAgICAgICBpZiAoZGVmYXVsdEhlYWRlcnMuaGFzT3duUHJvcGVydHkobmFtZV8yKSAmJiAhaGVhZGVycy5oYXMobmFtZV8yKSkge1xyXG4gICAgICAgICAgICAgIGhlYWRlcnMuc2V0KG5hbWVfMiwgZGVmYXVsdEhlYWRlcnNbbmFtZV8yXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICB9XHJcbiAgZnVuY3Rpb24gcHJvY2Vzc1JlcXVlc3QocmVxdWVzdCwgaW50ZXJjZXB0b3JzLCBodHRwKSB7XHJcbiAgICAgIHJldHVybiBhcHBseUludGVyY2VwdG9ycyhyZXF1ZXN0LCBpbnRlcmNlcHRvcnMsICdyZXF1ZXN0JywgJ3JlcXVlc3RFcnJvcicsIGh0dHApO1xyXG4gIH1cclxuICBmdW5jdGlvbiBwcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UsIGludGVyY2VwdG9ycywgcmVxdWVzdCwgaHR0cCkge1xyXG4gICAgICByZXR1cm4gYXBwbHlJbnRlcmNlcHRvcnMocmVzcG9uc2UsIGludGVyY2VwdG9ycywgJ3Jlc3BvbnNlJywgJ3Jlc3BvbnNlRXJyb3InLCByZXF1ZXN0LCBodHRwKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gYXBwbHlJbnRlcmNlcHRvcnMoaW5wdXQsIGludGVyY2VwdG9ycywgc3VjY2Vzc05hbWUsIGVycm9yTmFtZSkge1xyXG4gICAgICB2YXIgaW50ZXJjZXB0b3JBcmdzID0gW107XHJcbiAgICAgIGZvciAodmFyIF9pID0gNDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICBpbnRlcmNlcHRvckFyZ3NbX2kgLSA0XSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIChpbnRlcmNlcHRvcnMgfHwgW10pXHJcbiAgICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChjaGFpbiwgaW50ZXJjZXB0b3IpIHtcclxuICAgICAgICAgIHZhciBzdWNjZXNzSGFuZGxlciA9IGludGVyY2VwdG9yW3N1Y2Nlc3NOYW1lXTtcclxuICAgICAgICAgIHZhciBlcnJvckhhbmRsZXIgPSBpbnRlcmNlcHRvcltlcnJvck5hbWVdO1xyXG4gICAgICAgICAgcmV0dXJuIGNoYWluLnRoZW4oc3VjY2Vzc0hhbmRsZXIgJiYgKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gc3VjY2Vzc0hhbmRsZXIuY2FsbC5hcHBseShzdWNjZXNzSGFuZGxlciwgW2ludGVyY2VwdG9yLCB2YWx1ZV0uY29uY2F0KGludGVyY2VwdG9yQXJncykpOyB9KSB8fCBpZGVudGl0eSwgZXJyb3JIYW5kbGVyICYmIChmdW5jdGlvbiAocmVhc29uKSB7IHJldHVybiBlcnJvckhhbmRsZXIuY2FsbC5hcHBseShlcnJvckhhbmRsZXIsIFtpbnRlcmNlcHRvciwgcmVhc29uXS5jb25jYXQoaW50ZXJjZXB0b3JBcmdzKSk7IH0pIHx8IHRocm93ZXIpO1xyXG4gICAgICB9LCBQcm9taXNlLnJlc29sdmUoaW5wdXQpKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gaXNKU09OKHN0cikge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICAgSlNPTi5wYXJzZShzdHIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xyXG4gICAgICByZXR1cm4geDtcclxuICB9XHJcbiAgZnVuY3Rpb24gdGhyb3dlcih4KSB7XHJcbiAgICAgIHRocm93IHg7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGNhbGxGZXRjaChjbGllbnQsIGlucHV0LCBib2R5LCBpbml0LCBtZXRob2QpIHtcclxuICAgICAgaWYgKCFpbml0KSB7XHJcbiAgICAgICAgICBpbml0ID0ge307XHJcbiAgICAgIH1cclxuICAgICAgaW5pdC5tZXRob2QgPSBtZXRob2Q7XHJcbiAgICAgIGlmIChib2R5KSB7XHJcbiAgICAgICAgICBpbml0LmJvZHkgPSBib2R5O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjbGllbnQuZmV0Y2goaW5wdXQsIGluaXQpO1xyXG4gIH1cblxuICBleHBvcnRzLmpzb24gPSBqc29uO1xuICBleHBvcnRzLnJldHJ5U3RyYXRlZ3kgPSByZXRyeVN0cmF0ZWd5O1xuICBleHBvcnRzLlJldHJ5SW50ZXJjZXB0b3IgPSBSZXRyeUludGVyY2VwdG9yO1xuICBleHBvcnRzLkh0dHBDbGllbnRDb25maWd1cmF0aW9uID0gSHR0cENsaWVudENvbmZpZ3VyYXRpb247XG4gIGV4cG9ydHMuSHR0cENsaWVudCA9IEh0dHBDbGllbnQ7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0EsV0FDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///tpqN\n");

/***/ })

}]);