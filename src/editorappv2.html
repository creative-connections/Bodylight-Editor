<template>
  <require from="./components/toolbar"></require>
  <require from="./components/a-dialog"></require>
  <require from="./components/file-dialog"></require>
  <require from="./components/help"></require>
  <require from="./components/editor"></require>
  <require from="./components/viewer.html"></require>
  <require from="./components/project"></require>
  <require from="w3-css/w3.css"></require>
  <require from="./w3-theme-bodylight.css"></require>
  <require from="./editorapp.css"></require>
  <require from="./components/animationbinding"></require>
  <require from="./components/toolbareditor"></require>
  <require from="./components/a-dialog"></require>

  <div style="height:30px">
    <button class="w3-button w3-padding-small" click.delegate="toggleproject()" title="see project files"><i class="fa fa-folder"></i></button>
    <toolbareditor></toolbareditor>
    <button class="w3-button w3-padding-small w3-theme-l1" click.delegate="openbodylightdialog()" title="Bodylight Components">
        <i class="fa fa-file-text-o"></i>
      </button>
      <button class="w3-button w3-padding-small w3-theme-l1" click.delegate="openanimationdialog()" title="Animation">
        <i class="fa fa-file-image-o"></i>
      </button>
    
    <b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bodylight Editor v${version}</b>
  </div>
  <div class="w3-row">

    <div class="w3-col" ref="dialogdiv" show.bind="projectmode" style="width:300px">
      <div class="w3-small">
        <project></project>
        <!--div id="components">
          <a-dialog></a-dialog>
        </div>
        <div id="mapping">
          <animationbinding></animationbinding>
        </div>
        <help></help-->
      </div>
    </div>

    <div class="w3-rest" ref="editordiv">
      <div class="w3-row" style="height:100%">
        <div class="w3-half" show.bind="!api.previewmode">
          <span id="modelmdref"></span> <!-- this DOM sends model.md content update -->
          <editor></editor> <!-- this DOM sends MD content update during editing editorref -->
        </div>
        <div class="w3-col w3-theme-l3"  style="width:30px; height:calc(100vh - 30px)">          
          <button class="w3-button w3-padding-small" click.delegate="toggleeditor()" title="edit mode"><i class="fa fa-columns"></i></button>
          <button class="w3-button w3-padding-small" click.delegate="togglepreview()" title="reader mode"><i class="fa fa-eye"></i></button>
          
          <div style="bottom:0;position:absolute">
            <button class="w3-button w3-padding-small" click.delegate="togglepreview()"><i class="fa fa-eye"></i></button>
          </div>
        
        </div>
        <div class="w3-rest" style="height:calc(100vh - 30px); overflow-y:scroll">
          <div style.bind="api.previewmode?'width:100%':'transform: scale(0.5);transform-origin:top left;width:200%'">
          <span if.bind="api.sharedmodel">shared model added
            <viewer id2listen="modelmdref"></viewer>
          </span>
          <viewer id2listen="editorref"></viewer>
        </div>
      </div>
      </div>
    </div>
  </div>
  <div class="w3-modal" id="id02" style="z-index:7;display:block;" show.bind="bodylightdialog">
    <div class="w3-modal-content w3-animate-opacity">
      <header class="w3-container w3-theme-d1">
        <button class="w3-right w3-button w3-large" click.delegate="closebodylightdialog()">&times;</button>
        <h2>Bodylight components</h2>
      </header>
      <div class="w3-container">
        <a-dialog></a-dialog>
      </div>
    </div>
  </div>
  <div class="w3-modal" id="id03" style="z-index:7;display:block;" show.bind="animationdialog">
    <div class="w3-modal-content w3-animate-opacity">
      <header class="w3-container w3-theme-d1">
        <button class="w3-right w3-button w3-large" click.delegate="closeanimationdialog()">&times;</button>
        <h2>Animation</h2> 
      </header>
      <div class="w3-container">
        <animationbinding></animationbinding>
      </div>
    </div>
  </div>

</template>