(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["vendors~569a8411"],{

/***/ "aurelia-animator-css":
/*!*******************************************************************************!*\
  !*** ./node_modules/aurelia-animator-css/dist/es2015/aurelia-animator-css.js ***!
  \*******************************************************************************/
/*! exports provided: CssAnimator, configure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CssAnimator\", function() { return CssAnimator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"configure\", function() { return configure; });\n/* harmony import */ var aurelia_templating__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia-templating */ \"SkM8\");\n/* harmony import */ var aurelia_pal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia-pal */ \"xIXs\");\n\n\n\nlet CssAnimator = class CssAnimator {\n  constructor() {\n    this.useAnimationDoneClasses = false;\n    this.animationEnteredClass = 'au-entered';\n    this.animationLeftClass = 'au-left';\n    this.isAnimating = false;\n\n    this.verifyKeyframesExist = true;\n  }\n\n  _addMultipleEventListener(el, s, fn) {\n    let evts = s.split(' ');\n    for (let i = 0, ii = evts.length; i < ii; ++i) {\n      el.addEventListener(evts[i], fn, false);\n    }\n  }\n\n  _removeMultipleEventListener(el, s, fn) {\n    let evts = s.split(' ');\n    for (let i = 0, ii = evts.length; i < ii; ++i) {\n      el.removeEventListener(evts[i], fn, false);\n    }\n  }\n\n  _getElementAnimationDelay(element) {\n    let styl = aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].getComputedStyle(element);\n    let prop;\n    let delay;\n\n    if (styl.getPropertyValue('animation-delay')) {\n      prop = 'animation-delay';\n    } else if (styl.getPropertyValue('-webkit-animation-delay')) {\n      prop = '-webkit-animation-delay';\n    } else if (styl.getPropertyValue('-moz-animation-delay')) {\n      prop = '-moz-animation-delay';\n    } else {\n      return 0;\n    }\n\n    delay = styl.getPropertyValue(prop);\n    delay = Number(delay.replace(/[^\\d\\.]/g, ''));\n\n    return delay * 1000;\n  }\n\n  _getElementAnimationNames(element) {\n    let styl = aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].getComputedStyle(element);\n    let prefix;\n\n    if (styl.getPropertyValue('animation-name')) {\n      prefix = '';\n    } else if (styl.getPropertyValue('-webkit-animation-name')) {\n      prefix = '-webkit-';\n    } else if (styl.getPropertyValue('-moz-animation-name')) {\n      prefix = '-moz-';\n    } else {\n      return [];\n    }\n\n    let animationNames = styl.getPropertyValue(prefix + 'animation-name');\n    return animationNames ? animationNames.split(' ') : [];\n  }\n\n  _performSingleAnimate(element, className) {\n    this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateBegin, element);\n\n    return this.addClass(element, className, true).then(result => {\n      this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateActive, element);\n\n      if (result !== false) {\n        return this.removeClass(element, className, true).then(() => {\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateDone, element);\n        });\n      }\n\n      return false;\n    }).catch(() => {\n      this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].animateTimeout, element);\n    });\n  }\n\n  _triggerDOMEvent(eventType, element) {\n    let evt = aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].createCustomEvent(eventType, { bubbles: true, cancelable: true, detail: element });\n    aurelia_pal__WEBPACK_IMPORTED_MODULE_1__[\"DOM\"].dispatchEvent(evt);\n  }\n\n  _animationChangeWithValidKeyframe(animationNames, prevAnimationNames) {\n    let newAnimationNames = animationNames.filter(name => prevAnimationNames.indexOf(name) === -1);\n\n    if (newAnimationNames.length === 0) {\n      return false;\n    }\n\n    if (!this.verifyKeyframesExist) {\n      return true;\n    }\n\n    const keyframesRuleType = window.CSSRule.KEYFRAMES_RULE || window.CSSRule.MOZ_KEYFRAMES_RULE || window.CSSRule.WEBKIT_KEYFRAMES_RULE;\n\n    let styleSheets = document.styleSheets;\n\n    try {\n      for (let i = 0; i < styleSheets.length; ++i) {\n        let cssRules = null;\n\n        try {\n          cssRules = styleSheets[i].cssRules;\n        } catch (e) {}\n\n        if (!cssRules) {\n          continue;\n        }\n\n        for (let j = 0; j < cssRules.length; ++j) {\n          let cssRule = cssRules[j];\n\n          if (cssRule.type === keyframesRuleType) {\n            if (newAnimationNames.indexOf(cssRule.name) !== -1) {\n              return true;\n            }\n          }\n        }\n      }\n    } catch (e) {}\n\n    return false;\n  }\n\n  animate(element, className) {\n    if (Array.isArray(element)) {\n      return Promise.all(element.map(el => {\n        return this._performSingleAnimate(el, className);\n      }));\n    }\n\n    return this._performSingleAnimate(element, className);\n  }\n\n  runSequence(animations) {\n    this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].sequenceBegin, null);\n\n    return animations.reduce((p, anim) => {\n      return p.then(() => {\n        return this.animate(anim.element, anim.className);\n      });\n    }, Promise.resolve(true)).then(() => {\n      this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].sequenceDone, null);\n    });\n  }\n\n  _stateAnim(element, direction, doneClass) {\n    const auClass = 'au-' + direction;\n    const auClassActive = auClass + '-active';\n    return new Promise((resolve, reject) => {\n      const classList = element.classList;\n\n      this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Begin'], element);\n\n      if (this.useAnimationDoneClasses) {\n        classList.remove(this.animationEnteredClass);\n        classList.remove(this.animationLeftClass);\n      }\n\n      classList.add(auClass);\n      const prevAnimationNames = this._getElementAnimationNames(element);\n\n      let animStart;\n      let animHasStarted = false;\n      this._addMultipleEventListener(element, 'webkitAnimationStart animationstart', animStart = evAnimStart => {\n        if (evAnimStart.target !== element) {\n          return;\n        }\n        animHasStarted = true;\n        this.isAnimating = true;\n\n        this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Active'], element);\n\n        evAnimStart.stopPropagation();\n\n        evAnimStart.target.removeEventListener(evAnimStart.type, animStart);\n      }, false);\n\n      let animEnd;\n      this._addMultipleEventListener(element, 'webkitAnimationEnd animationend', animEnd = evAnimEnd => {\n        if (!animHasStarted) {\n          return;\n        }\n        if (evAnimEnd.target !== element) {\n          return;\n        }\n\n        evAnimEnd.stopPropagation();\n\n        classList.remove(auClassActive);\n        classList.remove(auClass);\n\n        evAnimEnd.target.removeEventListener(evAnimEnd.type, animEnd);\n\n        if (this.useAnimationDoneClasses && doneClass !== undefined && doneClass !== null) {\n          classList.add(doneClass);\n        }\n\n        this.isAnimating = false;\n        this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Done'], element);\n\n        resolve(true);\n      }, false);\n\n      const parent = element.parentElement;\n      const attrib = 'data-animator-pending' + direction;\n\n      const cleanupAnimation = () => {\n        const animationNames = this._getElementAnimationNames(element);\n        if (!this._animationChangeWithValidKeyframe(animationNames, prevAnimationNames)) {\n          classList.remove(auClassActive);\n          classList.remove(auClass);\n\n          this._removeMultipleEventListener(element, 'webkitAnimationEnd animationend', animEnd);\n          this._removeMultipleEventListener(element, 'webkitAnimationStart animationstart', animStart);\n\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"][direction + 'Timeout'], element);\n          resolve(false);\n        }\n        parent && parent.setAttribute(attrib, +(parent.getAttribute(attrib) || 1) - 1);\n      };\n\n      if (parent !== null && parent !== undefined && (parent.classList.contains('au-stagger') || parent.classList.contains('au-stagger-' + direction))) {\n        const offset = +(parent.getAttribute(attrib) || 0);\n        parent.setAttribute(attrib, offset + 1);\n        const delay = this._getElementAnimationDelay(parent) * offset;\n        this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].staggerNext, element);\n\n        setTimeout(() => {\n          classList.add(auClassActive);\n          cleanupAnimation();\n        }, delay);\n      } else {\n        classList.add(auClassActive);\n        cleanupAnimation();\n      }\n    });\n  }\n\n  enter(element) {\n    return this._stateAnim(element, 'enter', this.animationEnteredClass);\n  }\n\n  leave(element) {\n    return this._stateAnim(element, 'leave', this.animationLeftClass);\n  }\n\n  removeClass(element, className, suppressEvents = false) {\n    return new Promise((resolve, reject) => {\n      let classList = element.classList;\n\n      if (!classList.contains(className) && !classList.contains(className + '-add')) {\n        resolve(false);\n        return;\n      }\n\n      if (suppressEvents !== true) {\n        this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassBegin, element);\n      }\n\n      if (classList.contains(className + '-add')) {\n        classList.remove(className + '-add');\n        classList.add(className);\n      }\n\n      classList.remove(className);\n      let prevAnimationNames = this._getElementAnimationNames(element);\n\n      let animStart;\n      let animHasStarted = false;\n      this._addMultipleEventListener(element, 'webkitAnimationStart animationstart', animStart = evAnimStart => {\n        if (evAnimStart.target !== element) {\n          return;\n        }\n        animHasStarted = true;\n        this.isAnimating = true;\n\n        if (suppressEvents !== true) {\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassActive, element);\n        }\n\n        evAnimStart.stopPropagation();\n\n        evAnimStart.target.removeEventListener(evAnimStart.type, animStart);\n      }, false);\n\n      let animEnd;\n      this._addMultipleEventListener(element, 'webkitAnimationEnd animationend', animEnd = evAnimEnd => {\n        if (!animHasStarted) {\n          return;\n        }\n        if (evAnimEnd.target !== element) {\n          return;\n        }\n\n        if (!element.classList.contains(className + '-remove')) {\n          resolve(true);\n        }\n\n        evAnimEnd.stopPropagation();\n\n        classList.remove(className);\n\n        classList.remove(className + '-remove');\n\n        evAnimEnd.target.removeEventListener(evAnimEnd.type, animEnd);\n\n        this.isAnimating = false;\n\n        if (suppressEvents !== true) {\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassDone, element);\n        }\n\n        resolve(true);\n      }, false);\n\n      classList.add(className + '-remove');\n\n      let animationNames = this._getElementAnimationNames(element);\n      if (!this._animationChangeWithValidKeyframe(animationNames, prevAnimationNames)) {\n        classList.remove(className + '-remove');\n        classList.remove(className);\n\n        this._removeMultipleEventListener(element, 'webkitAnimationEnd animationend', animEnd);\n        this._removeMultipleEventListener(element, 'webkitAnimationStart animationstart', animStart);\n\n        if (suppressEvents !== true) {\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].removeClassTimeout, element);\n        }\n\n        resolve(false);\n      }\n    });\n  }\n\n  addClass(element, className, suppressEvents = false) {\n    return new Promise((resolve, reject) => {\n      let classList = element.classList;\n\n      if (suppressEvents !== true) {\n        this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassBegin, element);\n      }\n\n      if (classList.contains(className + '-remove')) {\n        classList.remove(className + '-remove');\n        classList.remove(className);\n      }\n\n      let animStart;\n      let animHasStarted = false;\n      this._addMultipleEventListener(element, 'webkitAnimationStart animationstart', animStart = evAnimStart => {\n        if (evAnimStart.target !== element) {\n          return;\n        }\n        animHasStarted = true;\n        this.isAnimating = true;\n\n        if (suppressEvents !== true) {\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassActive, element);\n        }\n\n        evAnimStart.stopPropagation();\n\n        evAnimStart.target.removeEventListener(evAnimStart.type, animStart);\n      }, false);\n\n      let animEnd;\n      this._addMultipleEventListener(element, 'webkitAnimationEnd animationend', animEnd = evAnimEnd => {\n        if (!animHasStarted) {\n          return;\n        }\n        if (evAnimEnd.target !== element) {\n          return;\n        }\n\n        if (!element.classList.contains(className + '-add')) {\n          resolve(true);\n        }\n\n        evAnimEnd.stopPropagation();\n\n        classList.add(className);\n\n        classList.remove(className + '-add');\n\n        evAnimEnd.target.removeEventListener(evAnimEnd.type, animEnd);\n\n        this.isAnimating = false;\n\n        if (suppressEvents !== true) {\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassDone, element);\n        }\n\n        resolve(true);\n      }, false);\n\n      let prevAnimationNames = this._getElementAnimationNames(element);\n\n      classList.add(className + '-add');\n\n      let animationNames = this._getElementAnimationNames(element);\n      if (!this._animationChangeWithValidKeyframe(animationNames, prevAnimationNames)) {\n        classList.remove(className + '-add');\n        classList.add(className);\n\n        this._removeMultipleEventListener(element, 'webkitAnimationEnd animationend', animEnd);\n        this._removeMultipleEventListener(element, 'webkitAnimationStart animationstart', animStart);\n\n        if (suppressEvents !== true) {\n          this._triggerDOMEvent(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"animationEvent\"].addClassTimeout, element);\n        }\n\n        resolve(false);\n      }\n    });\n  }\n\n};\n\nfunction configure(config, callback) {\n  let animator = config.container.get(CssAnimator);\n  config.container.get(aurelia_templating__WEBPACK_IMPORTED_MODULE_0__[\"TemplatingEngine\"]).configureAnimator(animator);\n  if (typeof callback === 'function') {\n    callback(animator);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyZWxpYS1hbmltYXRvci1jc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXVyZWxpYS1hbmltYXRvci1jc3MvZGlzdC9lczIwMTUvYXVyZWxpYS1hbmltYXRvci1jc3MuanM/YTE2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhbmltYXRpb25FdmVudCwgVGVtcGxhdGluZ0VuZ2luZSB9IGZyb20gJ2F1cmVsaWEtdGVtcGxhdGluZyc7XG5pbXBvcnQgeyBET00gfSBmcm9tICdhdXJlbGlhLXBhbCc7XG5cbmV4cG9ydCBsZXQgQ3NzQW5pbWF0b3IgPSBjbGFzcyBDc3NBbmltYXRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudXNlQW5pbWF0aW9uRG9uZUNsYXNzZXMgPSBmYWxzZTtcbiAgICB0aGlzLmFuaW1hdGlvbkVudGVyZWRDbGFzcyA9ICdhdS1lbnRlcmVkJztcbiAgICB0aGlzLmFuaW1hdGlvbkxlZnRDbGFzcyA9ICdhdS1sZWZ0JztcbiAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG5cbiAgICB0aGlzLnZlcmlmeUtleWZyYW1lc0V4aXN0ID0gdHJ1ZTtcbiAgfVxuXG4gIF9hZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWwsIHMsIGZuKSB7XG4gICAgbGV0IGV2dHMgPSBzLnNwbGl0KCcgJyk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZXZ0cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2dHNbaV0sIGZuLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgX3JlbW92ZU11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbCwgcywgZm4pIHtcbiAgICBsZXQgZXZ0cyA9IHMuc3BsaXQoJyAnKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBldnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0c1tpXSwgZm4sIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0RWxlbWVudEFuaW1hdGlvbkRlbGF5KGVsZW1lbnQpIHtcbiAgICBsZXQgc3R5bCA9IERPTS5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgIGxldCBwcm9wO1xuICAgIGxldCBkZWxheTtcblxuICAgIGlmIChzdHlsLmdldFByb3BlcnR5VmFsdWUoJ2FuaW1hdGlvbi1kZWxheScpKSB7XG4gICAgICBwcm9wID0gJ2FuaW1hdGlvbi1kZWxheSc7XG4gICAgfSBlbHNlIGlmIChzdHlsLmdldFByb3BlcnR5VmFsdWUoJy13ZWJraXQtYW5pbWF0aW9uLWRlbGF5JykpIHtcbiAgICAgIHByb3AgPSAnLXdlYmtpdC1hbmltYXRpb24tZGVsYXknO1xuICAgIH0gZWxzZSBpZiAoc3R5bC5nZXRQcm9wZXJ0eVZhbHVlKCctbW96LWFuaW1hdGlvbi1kZWxheScpKSB7XG4gICAgICBwcm9wID0gJy1tb3otYW5pbWF0aW9uLWRlbGF5JztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgZGVsYXkgPSBzdHlsLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG4gICAgZGVsYXkgPSBOdW1iZXIoZGVsYXkucmVwbGFjZSgvW15cXGRcXC5dL2csICcnKSk7XG5cbiAgICByZXR1cm4gZGVsYXkgKiAxMDAwO1xuICB9XG5cbiAgX2dldEVsZW1lbnRBbmltYXRpb25OYW1lcyhlbGVtZW50KSB7XG4gICAgbGV0IHN0eWwgPSBET00uZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICBsZXQgcHJlZml4O1xuXG4gICAgaWYgKHN0eWwuZ2V0UHJvcGVydHlWYWx1ZSgnYW5pbWF0aW9uLW5hbWUnKSkge1xuICAgICAgcHJlZml4ID0gJyc7XG4gICAgfSBlbHNlIGlmIChzdHlsLmdldFByb3BlcnR5VmFsdWUoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnKSkge1xuICAgICAgcHJlZml4ID0gJy13ZWJraXQtJztcbiAgICB9IGVsc2UgaWYgKHN0eWwuZ2V0UHJvcGVydHlWYWx1ZSgnLW1vei1hbmltYXRpb24tbmFtZScpKSB7XG4gICAgICBwcmVmaXggPSAnLW1vei0nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IGFuaW1hdGlvbk5hbWVzID0gc3R5bC5nZXRQcm9wZXJ0eVZhbHVlKHByZWZpeCArICdhbmltYXRpb24tbmFtZScpO1xuICAgIHJldHVybiBhbmltYXRpb25OYW1lcyA/IGFuaW1hdGlvbk5hbWVzLnNwbGl0KCcgJykgOiBbXTtcbiAgfVxuXG4gIF9wZXJmb3JtU2luZ2xlQW5pbWF0ZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICB0aGlzLl90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnQuYW5pbWF0ZUJlZ2luLCBlbGVtZW50KTtcblxuICAgIHJldHVybiB0aGlzLmFkZENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSwgdHJ1ZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LmFuaW1hdGVBY3RpdmUsIGVsZW1lbnQpO1xuXG4gICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUsIHRydWUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5hbmltYXRlRG9uZSwgZWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LmFuaW1hdGVUaW1lb3V0LCBlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIF90cmlnZ2VyRE9NRXZlbnQoZXZlbnRUeXBlLCBlbGVtZW50KSB7XG4gICAgbGV0IGV2dCA9IERPTS5jcmVhdGVDdXN0b21FdmVudChldmVudFR5cGUsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSwgZGV0YWlsOiBlbGVtZW50IH0pO1xuICAgIERPTS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gIH1cblxuICBfYW5pbWF0aW9uQ2hhbmdlV2l0aFZhbGlkS2V5ZnJhbWUoYW5pbWF0aW9uTmFtZXMsIHByZXZBbmltYXRpb25OYW1lcykge1xuICAgIGxldCBuZXdBbmltYXRpb25OYW1lcyA9IGFuaW1hdGlvbk5hbWVzLmZpbHRlcihuYW1lID0+IHByZXZBbmltYXRpb25OYW1lcy5pbmRleE9mKG5hbWUpID09PSAtMSk7XG5cbiAgICBpZiAobmV3QW5pbWF0aW9uTmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZlcmlmeUtleWZyYW1lc0V4aXN0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXlmcmFtZXNSdWxlVHlwZSA9IHdpbmRvdy5DU1NSdWxlLktFWUZSQU1FU19SVUxFIHx8IHdpbmRvdy5DU1NSdWxlLk1PWl9LRVlGUkFNRVNfUlVMRSB8fCB3aW5kb3cuQ1NTUnVsZS5XRUJLSVRfS0VZRlJBTUVTX1JVTEU7XG5cbiAgICBsZXQgc3R5bGVTaGVldHMgPSBkb2N1bWVudC5zdHlsZVNoZWV0cztcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlU2hlZXRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGxldCBjc3NSdWxlcyA9IG51bGw7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjc3NSdWxlcyA9IHN0eWxlU2hlZXRzW2ldLmNzc1J1bGVzO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAgIGlmICghY3NzUnVsZXMpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY3NzUnVsZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICBsZXQgY3NzUnVsZSA9IGNzc1J1bGVzW2pdO1xuXG4gICAgICAgICAgaWYgKGNzc1J1bGUudHlwZSA9PT0ga2V5ZnJhbWVzUnVsZVR5cGUpIHtcbiAgICAgICAgICAgIGlmIChuZXdBbmltYXRpb25OYW1lcy5pbmRleE9mKGNzc1J1bGUubmFtZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhbmltYXRlKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudC5tYXAoZWwgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVyZm9ybVNpbmdsZUFuaW1hdGUoZWwsIGNsYXNzTmFtZSk7XG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3BlcmZvcm1TaW5nbGVBbmltYXRlKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gIH1cblxuICBydW5TZXF1ZW5jZShhbmltYXRpb25zKSB7XG4gICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnNlcXVlbmNlQmVnaW4sIG51bGwpO1xuXG4gICAgcmV0dXJuIGFuaW1hdGlvbnMucmVkdWNlKChwLCBhbmltKSA9PiB7XG4gICAgICByZXR1cm4gcC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZShhbmltLmVsZW1lbnQsIGFuaW0uY2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuICAgIH0sIFByb21pc2UucmVzb2x2ZSh0cnVlKSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnQuc2VxdWVuY2VEb25lLCBudWxsKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zdGF0ZUFuaW0oZWxlbWVudCwgZGlyZWN0aW9uLCBkb25lQ2xhc3MpIHtcbiAgICBjb25zdCBhdUNsYXNzID0gJ2F1LScgKyBkaXJlY3Rpb247XG4gICAgY29uc3QgYXVDbGFzc0FjdGl2ZSA9IGF1Q2xhc3MgKyAnLWFjdGl2ZSc7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGNsYXNzTGlzdCA9IGVsZW1lbnQuY2xhc3NMaXN0O1xuXG4gICAgICB0aGlzLl90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnRbZGlyZWN0aW9uICsgJ0JlZ2luJ10sIGVsZW1lbnQpO1xuXG4gICAgICBpZiAodGhpcy51c2VBbmltYXRpb25Eb25lQ2xhc3Nlcykge1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKHRoaXMuYW5pbWF0aW9uRW50ZXJlZENsYXNzKTtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmFuaW1hdGlvbkxlZnRDbGFzcyk7XG4gICAgICB9XG5cbiAgICAgIGNsYXNzTGlzdC5hZGQoYXVDbGFzcyk7XG4gICAgICBjb25zdCBwcmV2QW5pbWF0aW9uTmFtZXMgPSB0aGlzLl9nZXRFbGVtZW50QW5pbWF0aW9uTmFtZXMoZWxlbWVudCk7XG5cbiAgICAgIGxldCBhbmltU3RhcnQ7XG4gICAgICBsZXQgYW5pbUhhc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FkZE11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uU3RhcnQgYW5pbWF0aW9uc3RhcnQnLCBhbmltU3RhcnQgPSBldkFuaW1TdGFydCA9PiB7XG4gICAgICAgIGlmIChldkFuaW1TdGFydC50YXJnZXQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYW5pbUhhc1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnRbZGlyZWN0aW9uICsgJ0FjdGl2ZSddLCBlbGVtZW50KTtcblxuICAgICAgICBldkFuaW1TdGFydC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBldkFuaW1TdGFydC50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldkFuaW1TdGFydC50eXBlLCBhbmltU3RhcnQpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICBsZXQgYW5pbUVuZDtcbiAgICAgIHRoaXMuX2FkZE11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIGFuaW1FbmQgPSBldkFuaW1FbmQgPT4ge1xuICAgICAgICBpZiAoIWFuaW1IYXNTdGFydGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldkFuaW1FbmQudGFyZ2V0ICE9PSBlbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZBbmltRW5kLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoYXVDbGFzc0FjdGl2ZSk7XG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoYXVDbGFzcyk7XG5cbiAgICAgICAgZXZBbmltRW5kLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2QW5pbUVuZC50eXBlLCBhbmltRW5kKTtcblxuICAgICAgICBpZiAodGhpcy51c2VBbmltYXRpb25Eb25lQ2xhc3NlcyAmJiBkb25lQ2xhc3MgIT09IHVuZGVmaW5lZCAmJiBkb25lQ2xhc3MgIT09IG51bGwpIHtcbiAgICAgICAgICBjbGFzc0xpc3QuYWRkKGRvbmVDbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudFtkaXJlY3Rpb24gKyAnRG9uZSddLCBlbGVtZW50KTtcblxuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICBjb25zdCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICBjb25zdCBhdHRyaWIgPSAnZGF0YS1hbmltYXRvci1wZW5kaW5nJyArIGRpcmVjdGlvbjtcblxuICAgICAgY29uc3QgY2xlYW51cEFuaW1hdGlvbiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uTmFtZXMgPSB0aGlzLl9nZXRFbGVtZW50QW5pbWF0aW9uTmFtZXMoZWxlbWVudCk7XG4gICAgICAgIGlmICghdGhpcy5fYW5pbWF0aW9uQ2hhbmdlV2l0aFZhbGlkS2V5ZnJhbWUoYW5pbWF0aW9uTmFtZXMsIHByZXZBbmltYXRpb25OYW1lcykpIHtcbiAgICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGF1Q2xhc3NBY3RpdmUpO1xuICAgICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoYXVDbGFzcyk7XG5cbiAgICAgICAgICB0aGlzLl9yZW1vdmVNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBhbmltRW5kKTtcbiAgICAgICAgICB0aGlzLl9yZW1vdmVNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvblN0YXJ0IGFuaW1hdGlvbnN0YXJ0JywgYW5pbVN0YXJ0KTtcblxuICAgICAgICAgIHRoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudFtkaXJlY3Rpb24gKyAnVGltZW91dCddLCBlbGVtZW50KTtcbiAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQgJiYgcGFyZW50LnNldEF0dHJpYnV0ZShhdHRyaWIsICsocGFyZW50LmdldEF0dHJpYnV0ZShhdHRyaWIpIHx8IDEpIC0gMSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAocGFyZW50ICE9PSBudWxsICYmIHBhcmVudCAhPT0gdW5kZWZpbmVkICYmIChwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdS1zdGFnZ2VyJykgfHwgcGFyZW50LmNsYXNzTGlzdC5jb250YWlucygnYXUtc3RhZ2dlci0nICsgZGlyZWN0aW9uKSkpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gKyhwYXJlbnQuZ2V0QXR0cmlidXRlKGF0dHJpYikgfHwgMCk7XG4gICAgICAgIHBhcmVudC5zZXRBdHRyaWJ1dGUoYXR0cmliLCBvZmZzZXQgKyAxKTtcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLl9nZXRFbGVtZW50QW5pbWF0aW9uRGVsYXkocGFyZW50KSAqIG9mZnNldDtcbiAgICAgICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnN0YWdnZXJOZXh0LCBlbGVtZW50KTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjbGFzc0xpc3QuYWRkKGF1Q2xhc3NBY3RpdmUpO1xuICAgICAgICAgIGNsZWFudXBBbmltYXRpb24oKTtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChhdUNsYXNzQWN0aXZlKTtcbiAgICAgICAgY2xlYW51cEFuaW1hdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZW50ZXIoZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZUFuaW0oZWxlbWVudCwgJ2VudGVyJywgdGhpcy5hbmltYXRpb25FbnRlcmVkQ2xhc3MpO1xuICB9XG5cbiAgbGVhdmUoZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZUFuaW0oZWxlbWVudCwgJ2xlYXZlJywgdGhpcy5hbmltYXRpb25MZWZ0Q2xhc3MpO1xuICB9XG5cbiAgcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lLCBzdXBwcmVzc0V2ZW50cyA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBjbGFzc0xpc3QgPSBlbGVtZW50LmNsYXNzTGlzdDtcblxuICAgICAgaWYgKCFjbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSAmJiAhY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSArICctYWRkJykpIHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHN1cHByZXNzRXZlbnRzICE9PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5yZW1vdmVDbGFzc0JlZ2luLCBlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUgKyAnLWFkZCcpKSB7XG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lICsgJy1hZGQnKTtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgfVxuXG4gICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICBsZXQgcHJldkFuaW1hdGlvbk5hbWVzID0gdGhpcy5fZ2V0RWxlbWVudEFuaW1hdGlvbk5hbWVzKGVsZW1lbnQpO1xuXG4gICAgICBsZXQgYW5pbVN0YXJ0O1xuICAgICAgbGV0IGFuaW1IYXNTdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9hZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvblN0YXJ0IGFuaW1hdGlvbnN0YXJ0JywgYW5pbVN0YXJ0ID0gZXZBbmltU3RhcnQgPT4ge1xuICAgICAgICBpZiAoZXZBbmltU3RhcnQudGFyZ2V0ICE9PSBlbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1IYXNTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgaWYgKHN1cHByZXNzRXZlbnRzICE9PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnJlbW92ZUNsYXNzQWN0aXZlLCBlbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV2QW5pbVN0YXJ0LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGV2QW5pbVN0YXJ0LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2QW5pbVN0YXJ0LnR5cGUsIGFuaW1TdGFydCk7XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIGxldCBhbmltRW5kO1xuICAgICAgdGhpcy5fYWRkTXVsdGlwbGVFdmVudExpc3RlbmVyKGVsZW1lbnQsICd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgYW5pbUVuZCA9IGV2QW5pbUVuZCA9PiB7XG4gICAgICAgIGlmICghYW5pbUhhc1N0YXJ0ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2QW5pbUVuZC50YXJnZXQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSArICctcmVtb3ZlJykpIHtcbiAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZBbmltRW5kLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblxuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSArICctcmVtb3ZlJyk7XG5cbiAgICAgICAgZXZBbmltRW5kLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2QW5pbUVuZC50eXBlLCBhbmltRW5kKTtcblxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHN1cHByZXNzRXZlbnRzICE9PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LnJlbW92ZUNsYXNzRG9uZSwgZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSArICctcmVtb3ZlJyk7XG5cbiAgICAgIGxldCBhbmltYXRpb25OYW1lcyA9IHRoaXMuX2dldEVsZW1lbnRBbmltYXRpb25OYW1lcyhlbGVtZW50KTtcbiAgICAgIGlmICghdGhpcy5fYW5pbWF0aW9uQ2hhbmdlV2l0aFZhbGlkS2V5ZnJhbWUoYW5pbWF0aW9uTmFtZXMsIHByZXZBbmltYXRpb25OYW1lcykpIHtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUgKyAnLXJlbW92ZScpO1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cbiAgICAgICAgdGhpcy5fcmVtb3ZlTXVsdGlwbGVFdmVudExpc3RlbmVyKGVsZW1lbnQsICd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgYW5pbUVuZCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZU11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uU3RhcnQgYW5pbWF0aW9uc3RhcnQnLCBhbmltU3RhcnQpO1xuXG4gICAgICAgIGlmIChzdXBwcmVzc0V2ZW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuX3RyaWdnZXJET01FdmVudChhbmltYXRpb25FdmVudC5yZW1vdmVDbGFzc1RpbWVvdXQsIGVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUsIHN1cHByZXNzRXZlbnRzID0gZmFsc2UpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGNsYXNzTGlzdCA9IGVsZW1lbnQuY2xhc3NMaXN0O1xuXG4gICAgICBpZiAoc3VwcHJlc3NFdmVudHMgIT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LmFkZENsYXNzQmVnaW4sIGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSArICctcmVtb3ZlJykpIHtcbiAgICAgICAgY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUgKyAnLXJlbW92ZScpO1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGxldCBhbmltU3RhcnQ7XG4gICAgICBsZXQgYW5pbUhhc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FkZE11bHRpcGxlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnd2Via2l0QW5pbWF0aW9uU3RhcnQgYW5pbWF0aW9uc3RhcnQnLCBhbmltU3RhcnQgPSBldkFuaW1TdGFydCA9PiB7XG4gICAgICAgIGlmIChldkFuaW1TdGFydC50YXJnZXQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYW5pbUhhc1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICBpZiAoc3VwcHJlc3NFdmVudHMgIT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLl90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnQuYWRkQ2xhc3NBY3RpdmUsIGVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZBbmltU3RhcnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgZXZBbmltU3RhcnQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZBbmltU3RhcnQudHlwZSwgYW5pbVN0YXJ0KTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgbGV0IGFuaW1FbmQ7XG4gICAgICB0aGlzLl9hZGRNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBhbmltRW5kID0gZXZBbmltRW5kID0+IHtcbiAgICAgICAgaWYgKCFhbmltSGFzU3RhcnRlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZBbmltRW5kLnRhcmdldCAhPT0gZWxlbWVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lICsgJy1hZGQnKSkge1xuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBldkFuaW1FbmQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lICsgJy1hZGQnKTtcblxuICAgICAgICBldkFuaW1FbmQudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZBbmltRW5kLnR5cGUsIGFuaW1FbmQpO1xuXG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAoc3VwcHJlc3NFdmVudHMgIT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLl90cmlnZ2VyRE9NRXZlbnQoYW5pbWF0aW9uRXZlbnQuYWRkQ2xhc3NEb25lLCBlbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIGxldCBwcmV2QW5pbWF0aW9uTmFtZXMgPSB0aGlzLl9nZXRFbGVtZW50QW5pbWF0aW9uTmFtZXMoZWxlbWVudCk7XG5cbiAgICAgIGNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lICsgJy1hZGQnKTtcblxuICAgICAgbGV0IGFuaW1hdGlvbk5hbWVzID0gdGhpcy5fZ2V0RWxlbWVudEFuaW1hdGlvbk5hbWVzKGVsZW1lbnQpO1xuICAgICAgaWYgKCF0aGlzLl9hbmltYXRpb25DaGFuZ2VXaXRoVmFsaWRLZXlmcmFtZShhbmltYXRpb25OYW1lcywgcHJldkFuaW1hdGlvbk5hbWVzKSkge1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSArICctYWRkJyk7XG4gICAgICAgIGNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblxuICAgICAgICB0aGlzLl9yZW1vdmVNdWx0aXBsZUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ3dlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBhbmltRW5kKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlTXVsdGlwbGVFdmVudExpc3RlbmVyKGVsZW1lbnQsICd3ZWJraXRBbmltYXRpb25TdGFydCBhbmltYXRpb25zdGFydCcsIGFuaW1TdGFydCk7XG5cbiAgICAgICAgaWYgKHN1cHByZXNzRXZlbnRzICE9PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5fdHJpZ2dlckRPTUV2ZW50KGFuaW1hdGlvbkV2ZW50LmFkZENsYXNzVGltZW91dCwgZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlKGNvbmZpZywgY2FsbGJhY2spIHtcbiAgbGV0IGFuaW1hdG9yID0gY29uZmlnLmNvbnRhaW5lci5nZXQoQ3NzQW5pbWF0b3IpO1xuICBjb25maWcuY29udGFpbmVyLmdldChUZW1wbGF0aW5nRW5naW5lKS5jb25maWd1cmVBbmltYXRvcihhbmltYXRvcik7XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayhhbmltYXRvcik7XG4gIH1cbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///aurelia-animator-css\n");

/***/ })

}]);